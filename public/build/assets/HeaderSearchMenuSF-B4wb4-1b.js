var C=Object.defineProperty;var M=(t,a,n)=>a in t?C(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;var b=(t,a,n)=>M(t,typeof a!="symbol"?a+"":a,n);import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as s}from"./index-BH53Isel.js";import{G as O}from"./Global-ErywZRdd.js";import{m as L}from"./main-BvVILmTO.js";import"./index-CMHsc23u.js";import{S as F}from"./search-TwiiKGP5.js";import R from"./TopBarCart-CyTivad-.js";import"./index-yBjzXJbu.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./createLucideIcon-Cy5Ya80P.js";import"./General-BmbBKdsB.js";import"./adjustTextColor-FzLvY4Q1.js";import"./Logout-7s5dsuEK.js";import"./HeaderSearch-B_41BEro.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-Chjiymov.js";import"./CartItemRow-4VUVjpPz.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-BWiGTO87.js";import"./proxy-BTYtmp9V.js";import"./trash-2-DK1wnsDn.js";import"./plus-Bot15Khs.js";import"./index-CFtDjG4d.js";import"./door-closed-Z4GbcMb-.js";import"./shopping-cart-CZEUxbmv.js";class N{}b(N,"getProducts",async a=>{try{const{status:n,result:o}=await L.Fetch("/api/items/searchProducts",{method:"POST",body:JSON.stringify(a)});if(!n)throw new Error((o==null?void 0:o.message)||"Error al obtener datos");return o}catch{return!1}});const S=({search:t,setSearch:a})=>{const[n,o]=s.useState([]),[f,m]=s.useState(!1),[p,x]=s.useState(!1),h=s.useRef(null),g=s.useRef();return s.useEffect(()=>{const r=i=>{g.current&&!g.current.contains(i.target)&&m(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]),s.useEffect(()=>{if(h.current&&clearTimeout(h.current),t.trim().length===0){o([]),m(!1);return}h.current=setTimeout(async()=>{var d;x(!0);const r={query:t.trim()},i=await N.getProducts(r);i&&((d=i.data)!=null&&d.length)?(o(i.data),m(!0)):(o([]),m(!1)),x(!1)},300)},[t]),e.jsxs("div",{className:"relative w-80",ref:g,children:[e.jsx("input",{type:"search",placeholder:"Buscar productos",value:t,onChange:r=>a(r.target.value),className:"w-full pr-14 py-4 pl-4 border rounded-full focus:ring-0 focus:outline-none placeholder:text-gray-400"}),e.jsx("a",{href:t.trim()?`/catalogo?search=${encodeURIComponent(t)}`:"#",className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 bg-primary text-white rounded-lg","aria-label":"Buscar",children:e.jsx(F,{})}),f&&e.jsx("div",{className:"absolute mt-2 w-full bg-white border rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:p?e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Buscando..."}):n.length>0?n.map(r=>{const i=parseFloat(r.price),d=parseFloat(r.discount);return e.jsx("a",{href:`/item/${r.slug}`,className:"block px-1 py-1 hover:bg-gray-100 transition text-sm !font-font-general",children:e.jsxs("div",{className:"flex items-center gap-3 px-2 py-2",children:[e.jsx("div",{className:"w-12 h-12 shrink-0",children:e.jsx("img",{src:`/storage/images/item/${r.image}`,alt:r.name,onError:c=>c.target.src="/assets/img/noimage/no_img.jpg",className:"w-full h-full object-cover rounded",loading:"lazy"})}),e.jsx("div",{className:"flex-1",children:e.jsx("h2",{className:"text-[13px] font-medium customtext-neutral-dark leading-tight line-clamp-3",children:r.name})}),e.jsxs("div",{className:"text-right text-sm min-w-[80px] customtext-neutral-dark",children:[e.jsxs("p",{className:"text-primary font-semibold",children:["S/ ",d>0?d.toFixed(2):i.toFixed(2)]}),d>0&&e.jsxs("p",{className:"text-xs text-gray-500 line-through",children:["S/ ",i.toFixed(2)]})]})]})},r.id)}):e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Sin resultados"})})]})};function z({search:t,setSearch:a,pages:n,items:o,headerPosts:f}){const[m,p]=s.useState("main"),[x,h]=s.useState(null),[g,r]=s.useState(null),[i,d]=s.useState();return e.jsx("div",{className:"w-full fixed top-[120px] h-screen customtext-neutral-dark mx-auto bg-white",children:e.jsx("div",{className:"bg-white z-50 w-full",children:e.jsxs("div",{className:"p-5 w-full flex flex-col gap-3 font-font-general",children:[e.jsx("div",{className:"relative mb-2",children:e.jsx(S,{search:t,setSearch:a})}),e.jsx("ul",{className:"bg-white flex font-font-general font-semibold text-lg",children:e.jsx("div",{className:"flex-col lg:flex-row order-2 lg:order-1 lg:w-full lg:justify-center",children:n.map((c,j)=>c.menuable&&(c.name!=="Blogs"||f.length>0)&&e.jsx("li",{className:"flex flex-col py-1",children:e.jsx("a",{href:c.path,className:"hover:customtext-neutral-dark cursor-pointer transition-all duration-300 pr-6",onClick:()=>setMenuOpen(!1),children:c.name})},j))})})]})})})}const ie=({items:t,data:a,cart:n,setCart:o,isUser:f,pages:m,headerPosts:p,contacts:x,generals:h=[]})=>{const[g,r]=s.useState(!1),[i,d]=s.useState(!1),[c,j]=s.useState(""),[w,k]=s.useState(!1),y=s.useRef(null);s.useEffect(()=>(w?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[w]);const v=l=>{var u;return((u=x.find(E=>E.correlative===l))==null?void 0:u.description)||""};return n.reduce((l,u)=>Number(l)+Number(u.quantity),0),s.useEffect(()=>{function l(u){y.current&&!y.current.contains(u.target)&&setIsOpen(!1)}return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),e.jsxs("header",{id:"main-header",className:"sticky top-0 w-full z-20 bg-white font-font-general",children:[e.jsx(R,{data:a,items:t,cart:n,setCart:o,isUser:f}),e.jsx("div",{className:"left-0 right-0",children:e.jsx("div",{className:"flex justify-between w-full px-[5%]",children:e.jsxs("nav",{className:"flex h-[80px] items-center justify-between gap-10 w-full",children:[e.jsx("input",{type:"checkbox",id:"menu",className:"peer/menu menu hidden"}),e.jsxs("label",{onClick:()=>k(!w),htmlFor:"menu",className:"transition-all flex flex-col gap-1 z-40 lg:hidden hamburguesa justify-center items-center order-3 lg:order-none",children:[e.jsx("p",{className:"w-7 h-1 bg-primary transition-transform duration-500"}),e.jsx("p",{className:"w-7 h-1 bg-primary transition-transform duration-500"}),e.jsx("p",{className:"w-7 h-1 bg-primary transition-transform duration-500"})]}),e.jsx("div",{className:"flex justify-center items-center z-40",children:e.jsx("a",{href:"/",className:"flex items-center gap-2",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:O.APP_NAME,className:"h-14 object-contain object-center",onError:l=>{l.target.onerror=null,l.target.src="/assets/img/logo-bk.svg"}})})}),e.jsx("ul",{className:"bg-white flex font-gilroy_regular font-semibold text-lg",children:e.jsx("div",{className:"hidden lg:flex flex-col lg:flex-row order-2 lg:order-1 lg:w-full lg:justify-center gap-1 lg:gap-4",children:m.map((l,u)=>l.menuable&&(l.name!=="Blogs"||p.length>0)&&e.jsx("li",{className:"flex flex-col py-1 lg:py-0",children:e.jsx("a",{href:l.path,className:"hover:customtext-primary cursor-pointer transition-all duration-300 pr-6",onClick:()=>setMenuOpen(!1),children:l.name})},u))})}),e.jsx("div",{className:"hidden lg:flex justify-end",children:e.jsx(S,{search:c,setSearch:j})}),e.jsx("div",{className:`${w?"block":"hidden"}  lg:hidden bg-white w-full min-h-screen absolute z-50 top-[120px] left-0`,children:e.jsx(z,{search:c,setSearch:j,pages:m,items:t,headerPosts:p})})]})})}),e.jsx("div",{className:"flex justify-end relative",children:e.jsx("div",{className:"fixed bottom-[36px] z-[10] right-1 md:right-[25px]",children:e.jsx("a",{target:"_blank",href:`https://api.whatsapp.com/send?phone=${v("phone_whatsapp")}&text=${encodeURIComponent(v("message_whatsapp"))}`,className:"",children:e.jsx("img",{src:`/assets/resources/botonwhatsapp.svg?v=${crypto.randomUUID()}`,alt:"whatsapp",className:"w-14 sm:w-16"})})})})]})};export{ie as default};
