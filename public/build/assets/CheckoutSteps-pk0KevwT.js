import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as p}from"./index-BH53Isel.js";import{N as j}from"./Number2Currency-e57Tgsuk.js";import{B as U,a as J,D as se,A as ae,O as re}from"./OptionCard-BDHfVt8o.js";import{M as ie}from"./CartItemRow-4VUVjpPz.js";import{P as ne}from"./plus-Bot15Khs.js";import{T as oe}from"./trash-2-DK1wnsDn.js";import{m as le}from"./main-BvVILmTO.js";import{G as I}from"./Global-ErywZRdd.js";import{t as C}from"./index-CMHsc23u.js";import{I as F}from"./InputForm-ZnsQvLid.js";import{l as ce}from"./lodash-CblvOeJM.js";import{c as H}from"./createLucideIcon-Cy5Ya80P.js";import{m as P}from"./proxy-BTYtmp9V.js";import"./ProductNavigation-CR30xqv8.js";import"./ProductCard-Ap6bpF1Q.js";/* empty css              */import"./BlogCarousel-CCgb3gK1.js";/* empty css               */import"./InfiniteCategory-BtlY-czj.js";import{M as de}from"./PaymentModal-Bxx5p2o_.js";import{H as me}from"./HtmlContent-FTivcJrM.js";import{X as pe}from"./x-DBMwyD6F.js";import"./index-yBjzXJbu.js";import"./useStateManager-7e1e8489.esm-oj4m82YY.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./tippy-react.esm-BWiGTO87.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./ItemsRest-DGjwRLrz.js";import"./BasicRest-B3rfI5GY.js";import"./HeaderSearch-B_41BEro.js";import"./index-CFtDjG4d.js";import"./eye-CKCH9ORv.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=H("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=H("OctagonX",[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=H("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]),he=({setCart:o,...n})=>{const x=()=>{o(m=>m.filter(i=>i.id!==n.id))},f=()=>{o(m=>m.map(i=>i.id===n.id?{...i,quantity:(i.quantity||1)+1}:i))},c=()=>{o(m=>m.map(i=>{if(i.id===n.id){const l=(i.quantity||1)-1;return l<=0?(x(n.id),null):{...i,quantity:l}}return i}).filter(Boolean))};return e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:n.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:n.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[n.stock>=n.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:n.sku})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between md:flex-col items-end md:items-end gap-4 mt-4 md:mt-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(n.price*n.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg",children:["S/ ",Number(n.final_price*n.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:c,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(ie,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:n.quantity||1})}),e.jsx("button",{type:"button",onClick:f,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(ne,{size:16})})]}),e.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(oe,{size:18})})]})]})]})},n.id)};function ge({cart:o,setCart:n,onContinue:x,subTotal:f,envio:c,igv:m,totalFinal:i,openModal:l}){const h=o.length===0;return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-4 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("svg",{className:"w-24 h-24 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Tu carrito est√° vac√≠o"}),e.jsx("p",{className:"text-gray-500",children:"¬°Explora nuestros productos y encuentra algo especial!"})]}):o.map((b,s)=>e.jsx(he,{...b,setCart:n},s))}),e.jsxs("div",{className:"lg:col-span-2 bg-[#F7F9FB] rounded-xl shadow-lg p-4 md:p-6 h-max mt-4 md:mt-0",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold pb-4 md:pb-6",children:"Resumen"}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(m)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Env√≠o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(c)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-4 md:mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg md:text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",j(i)]})]})}),e.jsxs("div",{className:"space-y-2 pt-3 md:pt-4",children:[e.jsx(U,{onClick:x,className:"w-full",disabled:h,children:h?"Carrito Vac√≠o":"Continuar Compra"}),e.jsx(J,{href:"/",className:"w-full",children:h?"Ir a Comprar":"Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-xs md:text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los¬†",e.jsx("a",{href:"#",onClick:()=>l(1),className:"customtext-primary font-bold",children:"T√©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra¬†",e.jsx("a",{href:"#",onClick:()=>l(0),className:"customtext-primary font-bold",children:"Pol√≠tica de Privacidad"}),"."]})})]})]})]})}function fe(){let o="";for(let n=0;n<12;n++){const x=Math.floor(Math.random()*10);o+=x}return o}const be=o=>new Promise((n,x)=>{try{console.log(o);const f=fe(o.email);console.log(f),window.Culqi.publicKey=I.CULQI_PUBLIC_KEY,window.Culqi.settings({title:I.APP_NAME,email:o.email,currency:"PEN",amount:o.amount*100,order:`${f}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:I.APP_URL+"/assets/resources/logo.png",bannerColor:I.APP_COLOR_PRIMARY,buttonBackground:I.APP_COLOR_PRIMARY}}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){x("No se obtuvo un token de Culqi");return}const c=window.Culqi.token.id;console.log("‚úÖ Token generado:",c),o={...o,token:c,orderNumber:f},console.log("_request actualizado",o);const{status:m,result:i}=await le.Fetch("./api/pago",{method:"POST",body:JSON.stringify(o)});m||console.log((i==null?void 0:i.message)||"Error en el pago"),window.Culqi.close(),C.success("¬°Pago exitoso!",{description:"Tu pago se proces√≥ correctamente. Pronto recibir√°s la confirmaci√≥n de tu pedido.",duration:3e3,position:"top-right",richColors:!0}),n(i)}catch(c){C.error("¬°Error en el Pago!",{description:c.message,duration:3e3,position:"top-right",richColors:!0}),x(c.message||"Error en el pago")}},document.addEventListener("culqi.error",function(c){var m,i;C.error("¬°Error en Culqi!",{description:((m=c.detail)==null?void 0:m.message)||"Error desconocido",duration:3e3,position:"top-right",richColors:!0}),x(((i=c.detail)==null?void 0:i.message)||"Error desconocido")})}catch(f){C.error("¬°Error en la integraci√≥n con Culqi!",{description:f.message,duration:3e3,position:"top-right",richColors:!0}),x("Error en la integraci√≥n con Culqi")}});function ye({cart:o,setSale:n,setCode:x,setDelivery:f,setCart:c,onContinue:m,noContinue:i,subTotal:l,igv:h,totalFinal:b,user:s,setEnvio:w,envio:$,ubigeos:R=[],openModal:A}){var Y,Q;const[_,E]=p.useState(null),[V,z]=p.useState(null),[d,y]=p.useState({name:(s==null?void 0:s.name)||"",lastname:(s==null?void 0:s.lastname)||"",email:(s==null?void 0:s.email)||"",department:(s==null?void 0:s.department)||"",province:(s==null?void 0:s.province)||"",district:(s==null?void 0:s.district)||"",address:(s==null?void 0:s.address)||"",number:(s==null?void 0:s.number)||"",comment:"",reference:(s==null?void 0:s.reference)||"",ubigeo:(s==null?void 0:s.ubigeo)||null});p.useEffect(()=>{if(s!=null&&s.ubigeo&&(s!=null&&s.district)&&(s!=null&&s.province)&&(s!=null&&s.department)){const t={value:s.ubigeo,label:`${s.district}, ${s.province}, ${s.department}`,data:{reniec:s.ubigeo,departamento:s.department,provincia:s.province,distrito:s.district}};z(t),E(t),K(t)}},[s]);const[M,D]=p.useState(!1),[k,T]=p.useState([]),[S,u]=p.useState(null),[O,B]=p.useState(null),[N,q]=p.useState({}),[G,L]=p.useState(""),Z=()=>{const t={},a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return d.name.trim()||(t.name="Nombre es requerido"),d.lastname.trim()||(t.lastname="Apellido es requerido"),d.email.trim()?a.test(d.email)||(t.email="Email inv√°lido"):t.email="Email es requerido",d.ubigeo||(t.ubigeo="Ubicaci√≥n es requerida"),d.address||(t.address="Direcci√≥n es requerida"),S||(t.shipping="Seleccione un m√©todo de env√≠o"),q(t),Object.keys(t).length===0},K=async t=>{if(!t)return;q(r=>({...r,ubigeo:""}));const{data:a}=t;y(r=>({...r,department:a.departamento,province:a.provincia,district:a.distrito,ubigeo:a.reniec})),D(!0);try{const r=await se.getShippingCost({ubigeo:a.reniec}),g=[];r.data.is_free?(g.push({type:"free",price:0,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),r.data.express.price>0&&g.push({type:"express",price:r.data.express.price,description:r.data.express.description,deliveryType:r.data.express.type,characteristics:r.data.express.characteristics})):r.data.is_agency?g.push({type:"agency",price:0,description:r.data.agency.description,deliveryType:r.data.agency.type,characteristics:r.data.agency.characteristics}):g.push({type:"standard",price:r.data.standard.price,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),T(g),u(g[0].type),w(g[0].price)}catch(r){console.error("Error al obtener precios de env√≠o:",r),C.error("Sin cobertura",{description:"No realizamos env√≠os a esta ubicaci√≥n.",icon:e.jsx(W,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),T([]),u(null),w(0)}D(!1)},X=async t=>{var a;if(t.preventDefault(),!s){C.error("Acceso requerido",{description:"Debe iniciar sesi√≥n para continuar.",icon:e.jsx(ue,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"});return}if(!Z()){const r=Object.keys(N)[0];r&&((a=document.querySelector(`[name="${r}"]`))==null||a.scrollIntoView({behavior:"smooth",block:"center"}));return}try{const r={user_id:s.id,...d,fullname:`${d.name} ${d.lastname}`,country:"Per√∫",amount:b,delivery:$,cart:o},g=await be(r);g.status?(n(g.sale),f(g.delivery),x(g.code),c([]),m()):C.error("Error en el pago",{description:g.message||"Pago rechazado",icon:e.jsx(ShoppingCart,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch{C.error("Lo sentimos, no puede continuar con la compra",{description:"Ocurri√≥ un error al procesar el pedido.",icon:e.jsx(W,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}},ee=p.useCallback(ce.debounce((t,a)=>{if(t.length<3){a([]);return}fetch(`/api/ubigeo/search?q=${encodeURIComponent(t)}`).then(r=>{if(!r.ok)throw new Error("Error en la respuesta");return r.json()}).then(r=>{const g=r.map(v=>({value:v.reniec,label:`${v.distrito}, ${v.provincia}, ${v.departamento}`,data:{inei:v.inei,reniec:v.reniec,departamento:v.departamento,provincia:v.provincia,distrito:v.distrito}}));a(g)}).catch(r=>{console.error("Error:",r),a([])})},300),[]);p.useEffect(()=>{q(t=>{const a={...t};return Object.keys(d).forEach(r=>{d[r]&&delete a[r]}),a})},[d]);const te=t=>({control:a=>({...a,border:`1px solid ${t?"#ef4444":"#e5e7eb"}`,boxShadow:"none",minHeight:"50px","&:hover":{borderColor:t?"#ef4444":"#6b7280"},borderRadius:"0.75rem",padding:"2px 8px"}),menu:a=>({...a,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:a=>({...a,color:"#1f2937",backgroundColor:"white","&:hover":{backgroundColor:"#f3f4f6"},padding:"12px 16px"})});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-4 md:space-y-6 bg-white p-4 md:p-6 rounded-xl shadow-sm",onSubmit:X,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(F,{name:"name",label:"Nombres",value:d.name,error:N.name,onChange:t=>y(a=>({...a,name:t.target.value})),required:!0,className:"border-gray-200"}),e.jsx(F,{name:"lastname",label:"Apellidos",value:d.lastname,error:N.lastname,onChange:t=>y(a=>({...a,lastname:t.target.value})),required:!0,className:"border-gray-200"})]}),e.jsx(F,{name:"email",label:"Correo electr√≥nico",type:"email",value:d.email,error:N.email,onChange:t=>y(a=>({...a,email:t.target.value})),required:!0,className:"border-gray-200"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm 2xl:text-base mb-2 font-medium customtext-neutral-dark",children:"Ubicaci√≥n de entrega (Distrito)*"}),e.jsx(ae,{name:"ubigeo",cacheOptions:!0,value:_,loadOptions:ee,onChange:t=>{E(t),K(t),L("")},inputValue:G,onInputChange:(t,{action:a})=>{a==="input-change"&&L(t)},onFocus:()=>{E(null),L("")},onMenuOpen:()=>{_&&(E(null),L(""))},placeholder:"Buscar por Distrito ...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:t})=>t.length<3?"Buscar por Distrito ...":"No se encontraron resultados",isLoading:M,styles:te(!!N.ubigeo),formatOptionLabel:({data:t})=>e.jsxs("div",{className:"text-sm py-1",children:[e.jsx("div",{className:"font-medium",children:t.distrito}),e.jsxs("div",{className:"text-gray-500",children:[t.provincia,", ",t.departamento]})]}),className:"w-full rounded-xl transition-all duration-300",menuPortalTarget:document.body,isClearable:!0}),N.ubigeo&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:N.ubigeo})]}),e.jsx(F,{name:"address",label:"Direcci√≥n *",value:d.address,error:N.address,onChange:t=>y(a=>({...a,address:t.target.value})),required:!0,className:"border-gray-200"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(F,{label:"N√∫mero",value:d.number,onChange:t=>y(a=>({...a,number:t.target.value})),className:"border-gray-200"}),e.jsx(F,{label:"Referencia",value:d.reference,onChange:t=>y(a=>({...a,reference:t.target.value})),className:"border-gray-200"})]}),k.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"M√©todo de env√≠o"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map(t=>e.jsx(re,{title:t.deliveryType,price:t.price,description:t.description,selected:S===t.type,onSelect:()=>{u(t.type),w(t.price),q(a=>({...a,shipping:""}))}},t.type))}),S&&k.length>0&&e.jsx("div",{className:"space-y-3 mt-4",children:(Q=(Y=k.find(t=>t.type===S))==null?void 0:Y.characteristics)==null?void 0:Q.map((t,a)=>e.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"w-5 flex-shrink-0",children:e.jsx(xe,{className:"customtext-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:t})})]},`char-${a}`))})]}),!i&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-end gap-3 md:gap-4 mt-6",children:[e.jsx(J,{type:"button",onClick:()=>window.history.back(),className:"w-full md:w-auto",children:"Regresar"}),e.jsx(U,{type:"submit",loading:M,className:"w-full md:w-auto",children:"Continuar"})]})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen"}),e.jsx("div",{className:"space-y-4 border-b-2 pb-6",children:o.map(t=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${t.image}`,alt:t.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad: ",t.quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["S/ ",j(t.price)]})]})]},t.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["S/ ",j(l)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",j(h)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Env√≠o:"}),e.jsxs("span",{children:["S/ ",j($)]})]}),e.jsx("div",{className:"pt-4 border-t-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",j(b)]})]})}),e.jsx(U,{onClick:X,className:"w-full mt-6",children:"Ir a Pagar"}),e.jsxs("p",{className:"text-xs md:text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los¬†",e.jsx("a",{href:"#",onClick:()=>A(1),className:"customtext-primary font-bold",children:"T√©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra¬†",e.jsx("a",{href:"#",onClick:()=>A(0),className:"customtext-primary font-bold",children:"Pol√≠tica de Privacidad"}),"."]})]})]})]})}function je({cart:o,code:n,delivery:x}){const c=(o.reduce((l,h)=>{const b=h.final_price;return l+b*h.quantity},0)/1.18).toFixed(2),m=(c*.18).toFixed(2),i=parseFloat(c)+parseFloat(m)+parseFloat(x);return e.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-10",children:e.jsxs(P.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.3},className:"text-center space-y-6",children:[e.jsx(P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.5},className:"w-20 h-20 bg-secondary rounded-full mx-auto flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"‚úì"})}),e.jsx("h2",{className:"text-2xl md:text-3xl customtext-neutral-light animate-bounce",children:"¬°Gracias por tu compra! üéâ"}),e.jsx("p",{className:"customtext-neutral-dark text-3xl md:text-5xl font-bold",children:"Tu orden ha sido recibida"}),e.jsxs(P.div,{whileHover:{scale:1.05},className:"py-6 px-4 bg-secondary rounded-xl inline-block",children:[e.jsx("div",{className:"customtext-neutral-light",children:"C√≥digo de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-xl font-bold",children:`#${n}`})]}),e.jsxs("div",{className:"space-y-6 bg-[#F7F9FB] p-6 md:p-8 rounded-xl shadow-inner",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:o.map((l,h)=>e.jsx(P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:h*.2},className:"bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow duration-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-center sm:items-start",children:[e.jsx("div",{className:"bg-gray-50 p-3 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${l.image}`,alt:l.name,className:"w-24 h-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsx("h3",{className:"font-semibold text-xl mb-3",children:l.name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:l.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:l.quantity})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:l.sku})]})]})]})]})},h))}),e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"space-y-4 mt-6",children:[[{label:"Subtotal",value:c},{label:"IGV",value:m},{label:"Env√≠o",value:x}].map((l,h)=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"customtext-neutral-dark",children:l.label}),e.jsxs("span",{className:"font-semibold",children:["S/ ",j(l.value)]})]},h)),e.jsx("div",{className:"py-4 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-xl md:text-2xl items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",j(i)]})]})})]}),e.jsx(P.div,{className:"pt-6",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(U,{href:"/catalogo",className:"w-full md:w-auto",children:"Seguir Comprando"})})]})]})})})}function at({cart:o,setCart:n,user:x,ubigeos:f=[],items:c,generals:m}){const[i,l]=p.useState(1),h=o.reduce((u,O)=>u+O.final_price*O.quantity,0),b=parseFloat((h/1.18).toFixed(2)),s=parseFloat((h-b).toFixed(2)),[w,$]=p.useState(0),R=b+s+parseFloat(w),[A,_]=p.useState([]),[E,V]=p.useState([]),[z,d]=p.useState([]);p.useEffect(()=>{const u=document.createElement("script");return u.src=I.CULQI_API,u.async=!0,u.onload=()=>{window.culqi=function(){window.Culqi.token||window.Culqi.order}},document.body.appendChild(u),()=>document.body.removeChild(u)},[]);const y=u=>{l(u),window.scrollTo({top:0,behavior:"smooth"})},M={privacy_policy:"Pol√≠ticas de privacidad",terms_conditions:"T√©rminos y condiciones",saleback_policy:"Pol√≠ticas de devolucion y cambio"},[D,k]=p.useState(null),T=u=>k(u),S=()=>k(null);return e.jsxs("div",{className:"min-h-screen bg-[#F7F9FB] py-4 md:py-12 px-2 sm:px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white p-3 md:p-8 rounded-lg md:rounded-xl shadow-sm",children:[e.jsx("div",{className:"mb-4 md:mb-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-1 md:gap-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${i===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:" bg-primary text-white w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm",children:"1"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Carrito"})]}),e.jsx("div",{className:"mb-4 lg:mb-0  flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:i>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${i>1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm ${i>1?"bg-primary text-white":"bg-white customtext-primary"}`,children:"2"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Env√≠o"})]}),e.jsx("div",{className:"mb-4 lg:mb-0  flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:i>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${i===3?"customtext-primary  font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm ${i===3?"bg-primary text-white":"bg-white customtext-primary"}`,children:"3"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Confirmaci√≥n"})]})]})}),i===1&&e.jsx(ge,{cart:o,setCart:n,onContinue:()=>y(2),subTotal:b,envio:w,igv:s,totalFinal:R,openModal:T}),i===2&&e.jsx(ye,{items:c,setCode:V,setDelivery:d,cart:o,setSale:_,setCart:n,onContinue:()=>y(3),noContinue:()=>y(1),subTotal:b,envio:w,setEnvio:$,igv:s,totalFinal:R,user:x,ubigeos:f,openModal:T}),i===3&&e.jsx(je,{code:E,delivery:z,cart:A,subTotal:b,envio:w,igv:s,totalFinal:R})]}),Object.keys(M).map((u,O)=>{var q;const B=M[u],N=((q=m.find(G=>G.correlative==u))==null?void 0:q.description)??"";return e.jsxs(de,{isOpen:D===O,onRequestClose:S,contentLabel:B,className:"absolute left-1/2 -translate-x-1/2 bg-white p-6 rounded-xl shadow-lg w-[95%] max-w-4xl my-8",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[e.jsx("button",{onClick:S,className:"float-right text-red-500 hover:text-red-700 transition-all duration-300 ",children:e.jsx(pe,{width:"2rem",strokeWidth:"4px"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:B}),e.jsx(me,{className:"prose",html:N})]},O)})]})}export{at as default};
