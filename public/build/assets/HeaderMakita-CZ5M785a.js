import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as a,R as pe}from"./index-BH53Isel.js";import{G as q}from"./Global-ErywZRdd.js";import{C as ue}from"./HeaderSearch-B_41BEro.js";import{L as fe}from"./Logout-7s5dsuEK.js";import"./lodash-CblvOeJM.js";import{S as C}from"./search-TwiiKGP5.js";import{C as G,D as ge}from"./door-closed-Z4GbcMb-.js";import{A as g}from"./index-CFtDjG4d.js";import{m as b}from"./proxy-BTYtmp9V.js";import{S as V}from"./shopping-cart-CZEUxbmv.js";import{X as be}from"./x-DBMwyD6F.js";import{C as T}from"./chevron-right-Ckt5D2ka.js";import{C as je}from"./chevron-left-B2s3ZsB7.js";import{U as we}from"./user-BvYmyGTY.js";import{S as ye}from"./settings-BSPs3Zt8.js";import"./index-yBjzXJbu.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";import"./CartItemRow-4VUVjpPz.js";import"./Number2Currency-e57Tgsuk.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./trash-2-DK1wnsDn.js";import"./createLucideIcon-Cy5Ya80P.js";import"./plus-Bot15Khs.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";const ss=({items:m,data:f,cart:M,setCart:X,isUser:E,pages:Ne,generals:B=[]})=>{const j=B.find(s=>s.correlative==="phone_whatsapp"),w=B.find(s=>s.correlative==="message_whatsapp"),Y=(j==null?void 0:j.description)??null,K=(w==null?void 0:w.description)??null,[Q,z]=a.useState(!1),[y,Z]=a.useState(!1),[ve,ee]=a.useState(!1),[N,se]=a.useState(""),[$,L]=a.useState(!1),[x,O]=a.useState(!1),[I,v]=a.useState(!1),[S,p]=a.useState(!1),[n,u]=a.useState(null),[Se,U]=a.useState(null),[l,P]=a.useState(null),[te,re]=a.useState(""),[ae,R]=a.useState(!1),[o,F]=a.useState(null),A=Array.from(new Set(m.map(s=>JSON.stringify(s.category)))).map(s=>{try{return JSON.parse(s)}catch{return null}}).filter(s=>s&&s.name),ie=Array.from(new Set(m.map(s=>JSON.stringify(s.platform)))).map(s=>{try{return JSON.parse(s)}catch{return null}}).filter(s=>s&&s.name);Array.from(new Set(m.map(s=>JSON.stringify(s.family)))).map(s=>{try{return JSON.parse(s)}catch{return null}}).filter(s=>s&&s.name);const le=Array.from(new Set(m.map(s=>s.applications&&Array.isArray(s.applications)?s.applications.map(t=>JSON.stringify(t)):[]).flat())).map(s=>{try{return JSON.parse(s)}catch{return null}}).filter(s=>s&&s.name).filter((s,t,r)=>t===r.findIndex(d=>d.name.trim().toUpperCase()===s.name.trim().toUpperCase())),J=s=>{let t=m;return o&&(t=m.filter(r=>r.applications&&r.applications.some(d=>d.id===o.id))),ie.filter(r=>t.some(d=>{var c,i;return((c=d.category)==null?void 0:c.id)===s&&((i=d.platform)==null?void 0:i.id)===(r==null?void 0:r.id)}))},ne=(s,t)=>{const r=[],d=new Set;let c=m;return o&&(c=m.filter(i=>i.applications&&i.applications.some(h=>h.id===o.id))),c.forEach(i=>{var h,D;if(((h=i.category)==null?void 0:h.id)===s&&((D=i.platform)==null?void 0:D.id)===t&&i.family){const H=i.family.name.trim().toUpperCase();d.has(H)||(r.push(i.family),d.add(H))}}),r},oe=s=>{const t=[],r=new Set;let d=m;return o&&(d=m.filter(c=>c.applications&&c.applications.some(i=>i.id===o.id))),d.forEach(c=>{var i;if(((i=c.category)==null?void 0:i.id)===s&&c.family){const h=c.family.name.trim().toUpperCase();r.has(h)||(t.push(c.family),r.add(h))}}),t},k=a.useRef(null),W=a.useRef(null),_=M.reduce((s,t)=>Number(s)+Number(t.quantity),0);a.useEffect(()=>{function s(t){k.current&&!k.current.contains(t.target)&&L(!1),W.current&&!W.current.contains(t.target)&&ee(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),a.useEffect(()=>{const s=()=>{window.scrollY>0?O(!0):O(!1)};return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]);const ce={hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.2}}},de=[{icon:e.jsx(we,{size:16}),label:"Mi Perfil",href:"/profile"},{icon:e.jsx(V,{size:16}),label:"Mis Pedidos",href:"/customer/dashboard"},{icon:e.jsx(ye,{size:16}),label:"Configuración",href:"/account"},{icon:e.jsx(ge,{size:16}),label:"Cerrar Sesión",onClick:fe}],me=`
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 20px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 20px;
      border: 2px solid transparent;
      background-clip: padding-box;
    }
  `,he=s=>{P(s),R(!0)},xe=()=>{R(!1),P(null)};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:me}),e.jsxs("header",{className:`w-full top-0 left-0 z-50 transition-all duration-300 ${x?"fixed":"relative"} bg-primary`,style:{boxShadow:x?"0 2px 8px rgba(0,0,0,0.08)":"none"},children:[e.jsxs("div",{className:"hidden md:flex px-4 2xl:px-0 2xl:max-w-7xl items-center justify-between mx-auto py-3 font-paragraph text-base font-semibold text-white",children:[e.jsx("a",{href:"/",className:"flex items-center gap-2 z-[51] py-2 rounded",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:q.APP_NAME,className:"h-8 object-contain object-center",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})}),e.jsx("nav",{className:"flex gap-1 relative flex-1 justify-center",children:A.map(s=>e.jsx("div",{className:"relative",children:e.jsx("button",{className:`font-medium px-4 py-2 text-sm uppercase tracking-wide hover:bg-white/10 transition-colors duration-200 ${(n==null?void 0:n.id)===s.id&&S?"bg-white/20":""}`,onMouseEnter:()=>{v(!1),p(!0),u(s),U(null)},onClick:()=>{(n==null?void 0:n.id)===s.id&&S?(p(!1),u(null)):(p(!0),u(s),U(null))},children:s.name})},s.id))}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("button",{onClick:()=>{p(!1),u(null),v(!I)},className:"p-2 bg-secondary hover:bg-secondary rounded transition-colors",children:e.jsx(C,{size:20})})}),(f==null?void 0:f.showLoginCart)&&e.jsxs("div",{className:"flex items-center gap-4 relative text-sm",children:[e.jsxs("div",{ref:k,children:[E?e.jsxs("button",{"aria-label":"user",className:"flex items-center gap-2 hover:bg-white/10 px-3 py-2 rounded transition-colors duration-300",onClick:()=>L(!$),children:[e.jsx(G,{size:20}),e.jsx("span",{className:"hidden lg:inline",children:E.name})]}):e.jsxs("a",{href:"/iniciar-sesion",className:"flex items-center gap-2 text-sm hover:bg-white/10 px-3 py-2 rounded transition-colors duration-300",children:[e.jsx(G,{size:20}),e.jsx("span",{className:"hidden lg:inline",children:"Iniciar Sesión"})]}),e.jsx(g,{children:$&&e.jsx(b.div,{initial:"hidden",animate:"visible",exit:"exit",variants:ce,className:"absolute z-50 top-full right-0 bg-white shadow-xl border rounded-lg w-48 mt-2",children:e.jsx("div",{className:"p-4",children:e.jsx("ul",{className:"space-y-3",children:de.map((s,t)=>e.jsx("li",{children:s.onClick?e.jsxs("button",{"aria-label":"menu-items",onClick:s.onClick,className:"flex w-full items-center gap-3 text-gray-700 text-sm hover:text-[#00B5CE] transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]}):e.jsxs("a",{href:s.href,className:"flex items-center gap-3 text-gray-700 text-sm hover:text-[#00B5CE] transition-colors duration-300",children:[s.icon,e.jsx("span",{children:s.label})]})},t))})})})})]}),e.jsxs("button",{"aria-label":"cart",onClick:()=>z(!0),className:"flex items-center relative p-2 hover:bg-white/10 rounded transition-colors",children:[e.jsx(V,{size:20}),_>0&&e.jsx("span",{className:"absolute -right-1 -top-1 inline-flex items-center justify-center w-5 h-5 bg-red-500 text-white rounded-full text-xs font-bold",children:_})]})]})]})]}),e.jsxs("div",{className:"flex md:hidden items-center justify-between px-4 py-2",children:[e.jsx("a",{href:"/",className:"flex items-center justify-start z-[51]",children:e.jsx("img",{src:`/assets/resources/logo.png?v=${crypto.randomUUID()}`,alt:q.APP_NAME,className:"h-10 object-contain object-center",onError:s=>{s.target.onerror=null,s.target.src="/assets/img/logo-bk.svg"}})}),e.jsx("button",{"aria-label":"Menú",onClick:()=>Z(!y),className:"flex items-center justify-center bg-secondary p-2 rounded-lg text-white z-[51]",children:y?e.jsx(be,{size:24}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M10 5H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 12H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 19H14",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),e.jsx(ue,{data:f,cart:M,setCart:X,modalOpen:Q,setModalOpen:z}),e.jsx("div",{className:"flex justify-end w-full mx-auto z-[100] relative",children:e.jsx("div",{className:"hidden lg:block fixed bottom-6 sm:bottom-[2rem] lg:bottom-[4rem] z-20 cursor-pointer",children:e.jsx("a",{target:"_blank",id:"whatsapp-toggle",href:`https://api.whatsapp.com/send?phone=${Y}&text=${K}`,rel:"noreferrer",children:e.jsx("img",{src:"/assets/img/whatsapp.svg",alt:"whatsapp",className:"mr-3 w-16 h-16 animate-bounce duration-300"})})})})]}),e.jsx(g,{children:S&&n&&e.jsxs(b.div,{initial:{opacity:0,y:-20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,ease:[.4,0,.2,1]},className:"fixed left-0 right-0 z-40 w-full bg-secondary text-white shadow-2xl hidden md:block",style:{top:x?64:120},onMouseLeave:()=>{p(!1),u(null)},children:[e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8 max-h-[calc(80vh-100px)] overflow-hidden",children:J(n.id).length>0?e.jsx("div",{className:"flex gap-8 overflow-x-auto pb-2 custom-scrollbar",style:{WebkitOverflowScrolling:"touch",maxWidth:"100%",overflowX:"auto"},children:J(n.id).map(s=>{const t="min(400px, 33vw)";return e.jsxs("div",{className:"flex-shrink-0 space-y-4 bg-secondary rounded-lg p-4",style:{minWidth:t,maxWidth:t,width:t,boxSizing:"border-box"},children:[e.jsxs("div",{className:"pb-2",children:[e.jsx("img",{src:`/storage/images/platform/${s.image}`,alt:s.name,className:"h-10 object-contain",onError:r=>r.target.src="/api/cover/thumbnail/null"}),e.jsx("h3",{className:"text-white font-bold text-lg mt-2",children:s.name})]}),e.jsx("ul",{className:"space-y-2 max-h-[320px] overflow-y-auto pr-2 custom-scrollbar",children:ne(n.id,s.id).map(r=>e.jsx("li",{children:e.jsxs("a",{href:`/catalogo?category=${n.slug}&platform=${s.slug}&family=${r.slug}`,className:"text-white hover:text-[#00B5CE] border-b pb-2 border-white/40 transition-colors text-sm flex items-center gap-2",children:[e.jsx("span",{className:"text-[#00B5CE]",children:"•"}),e.jsx("span",{children:r.name})]})},r.id))})]},s.id)})}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:oe(n.id).map(s=>e.jsx("a",{href:`/categoria/${n.slug}/${s.slug}`,className:"bg-secondary hover:bg-white/10 rounded-lg p-4 transition-colors",children:e.jsx("h3",{className:"text-white font-medium text-sm",children:s.name})},s.id))})}),e.jsx("div",{className:"bg-secondary border-t border-gray-600",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h4",{className:"text-2xl font-bold text-white",children:"Filtrar por Aplicación:"}),o&&e.jsx("button",{onClick:()=>F(null),className:"text-[#00B5CE] hover:text-white transition-colors text-sm font-medium px-3 py-1 border border-[#00B5CE] rounded-full",children:"Limpiar filtro"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-4 md:gap-6",children:le.map((s,t,r)=>e.jsxs(pe.Fragment,{children:[e.jsx("button",{onClick:()=>{F((o==null?void 0:o.id)===s.id?null:s)},className:`transition-colors text-sm font-medium uppercase tracking-wide px-3 py-1 rounded-full ${(o==null?void 0:o.id)===s.id?"bg-[#00B5CE] text-white":"text-white hover:text-[#00B5CE] hover:bg-white/10"}`,children:s.name}),t<r.length-1&&e.jsx("span",{className:"text-white hidden md:inline",children:"|"})]},s.id||s.name))})]})})})]})}),e.jsx(g,{children:I&&e.jsx(b.div,{initial:{opacity:0,y:-20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.35,ease:[.4,0,.2,1]},className:"fixed left-0 right-0 z-40 w-full bg-white text-black shadow-2xl hidden md:block",style:{top:x?64:125},onMouseLeave:()=>{v(!1)},children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8 max-h-[calc(80vh-100px)] overflow-hidden",children:e.jsxs("div",{className:"block relative w-full max-w-xl",children:[e.jsx("a",{href:N.trim()?`/catalogo?search=${encodeURIComponent(N)}`:"#",className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-2 customtext-neutral-dark transition-colors","aria-label":"Buscar",children:e.jsx(C,{})}),e.jsx("input",{type:"search",placeholder:"Buscar productos",value:N,onChange:s=>se(s.target.value),className:"w-full pl-20 py-2 border-none rounded-full focus:ring-0 focus:outline-none"})]})})})}),e.jsx(g,{children:y&&e.jsxs(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"md:hidden bg-primary fixed left-0 w-full h-[calc(100vh-56px)] z-[9999] overflow-hidden",style:{top:x?50:110},children:[e.jsx("div",{className:"px-4 py-3 border-b border-white/10 bg-white",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(C,{className:"absolute left-3 customtext-neutral-dark",size:20}),e.jsx("input",{type:"search",placeholder:"Búsqueda",value:te,onChange:s=>re(s.target.value),className:"w-full pl-10 py-2 bg-transparent border-b border-white/40 customtext-neutral-dark placeholder-black focus:outline-none focus:border-white"})]})}),ae?e.jsxs("div",{className:"h-full flex flex-col bg-secondary",children:[e.jsx("div",{className:"sticky top-0 bg-secondary border-b border-white/10",children:e.jsxs("button",{onClick:xe,className:"flex items-center gap-2 p-4 text-white",children:[e.jsx(je,{size:20}),e.jsx("span",{className:"text-sm font-medium uppercase",children:l==null?void 0:l.name})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pt-4 pb-14",children:getBrandsByCategory(l==null?void 0:l.id).length>0?e.jsx("div",{className:"p-4 space-y-6",children:getBrandsByCategory(l==null?void 0:l.id).map(s=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("img",{src:`/storage/images/brand/${s.image}`,alt:s.name,className:"h-6 w-auto object-contain",onError:t=>t.target.src="/api/cover/thumbnail/null"})}),e.jsx("ul",{className:"pl-4 space-y-2",children:getSubcategoriesByCategoryAndBrand(l==null?void 0:l.id,s.id).map(t=>e.jsx("li",{children:e.jsxs("a",{href:`/categoria/${t.slug}/${t.slug}`,className:"text-white hover:customtext-primary border-b pb-2 border-white/40 transition-colors text-sm flex items-center gap-2",children:[e.jsx("span",{className:"text-[#00B5CE]",children:"•"}),e.jsx("span",{children:t.name})]})},t.id))})]},s.id))}):e.jsx("ul",{className:"p-4 space-y-2",children:getSubcategoriesByCategory(l==null?void 0:l.id).map(s=>e.jsx("li",{children:e.jsxs("a",{href:`/categoria/${s.slug}/${s.slug}`,className:"text-white hover:customtext-primary border-b pb-2 border-white/40 transition-colors text-sm flex items-center gap-2",children:[e.jsx("span",{className:"text-[#00B5CE]",children:"•"}),e.jsx("span",{children:s.name})]})},s.id))})})]}):e.jsx("div",{className:"h-full flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsxs("ul",{className:"divide-y divide-white/10",children:[A.map(s=>e.jsx("li",{className:"border-b border-white/10 text-white",children:e.jsxs("button",{onClick:()=>he(s),className:"flex items-center justify-between w-full p-4 text-left hover:bg-white/5",children:[e.jsx("span",{className:"text-base font-medium uppercase",children:s.name}),e.jsx(T,{size:20})]})},s.id)),e.jsx("li",{className:"border-b border-white/10 text-white",children:e.jsxs("a",{href:"/blog",className:"flex items-center justify-between w-full p-4 text-left hover:bg-white/5",children:[e.jsx("span",{className:"text-base font-medium uppercase",children:"NUESTRO BLOG"}),e.jsx(T,{size:20})]})})]})})})]})})]})};export{ss as default};
