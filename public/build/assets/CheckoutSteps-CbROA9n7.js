import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as o}from"./index-BH53Isel.js";import{N as w}from"./Number2Currency-e57Tgsuk.js";import{B as te,a as de,D as be}from"./DeliveryPricesRest-COBkq4ZZ.js";import{M as je}from"./minus-jyhodMPN.js";import{P as ve}from"./plus-Bot15Khs.js";import{T as Ne}from"./trash-2-DK1wnsDn.js";import{a as we,b as k,h as Se,c as Z,d as Ce,u as ke,S as Oe,_ as qe}from"./useStateManager-7e1e8489.esm-oj4m82YY.js";import"./index-rimy3MAc.js";import{m as K}from"./main-BvVILmTO.js";import{G as U}from"./Global-ErywZRdd.js";import{I as D}from"./InputForm-DN14ZGms.js";import{l as Ee}from"./CheckoutSteps-j3_tvQyk.js";import{t as ee}from"./index-CMHsc23u.js";import{c as re}from"./createLucideIcon-Cy5Ya80P.js";import{m as A}from"./proxy-BTYtmp9V.js";import"./index-yBjzXJbu.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=re("OctagonX",[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=re("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]),Ie=({setCart:r,...i})=>{const l=()=>{r(c=>c.filter(d=>d.id!==i.id))},x=()=>{r(c=>c.map(d=>d.id===i.id?{...d,quantity:(d.quantity||1)+1}:d))},m=()=>{r(c=>c.map(d=>{if(d.id===i.id){const p=(d.quantity||1)-1;return p<=0?(l(i.id),null):{...d,quantity:p}}return d}).filter(Boolean))};return e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${i.image}`,alt:i.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:i.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:i.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[i.stock>=i.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:i.sku})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between md:flex-col items-end md:items-end gap-4 mt-4 md:mt-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(i.price*i.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg",children:["S/ ",Number(i.final_price*i.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:m,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(je,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:i.quantity||1})}),e.jsx("button",{type:"button",onClick:x,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(ve,{size:16})})]}),e.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(Ne,{size:18})})]})]})]})},i.id)};function Fe({cart:r,setCart:i,onContinue:l,subTotal:x,envio:m,igv:c,totalFinal:d}){const p=r.length===0;return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-4 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:p?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("svg",{className:"w-24 h-24 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Tu carrito est√° vac√≠o"}),e.jsx("p",{className:"text-gray-500",children:"¬°Explora nuestros productos y encuentra algo especial!"})]}):r.map((h,y)=>e.jsx(Ie,{...h,setCart:i},y))}),e.jsxs("div",{className:"lg:col-span-2 bg-[#F7F9FB] rounded-xl shadow-lg p-4 md:p-6 h-max mt-4 md:mt-0",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold pb-4 md:pb-6",children:"Resumen"}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",w(x)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",w(c)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Env√≠o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",w(m)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-4 md:mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg md:text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",w(d)]})]})}),e.jsxs("div",{className:"space-y-2 pt-3 md:pt-4",children:[e.jsx(te,{onClick:l,className:"w-full",disabled:p,children:p?"Carrito Vac√≠o":"Continuar Compra"}),e.jsx(de,{href:"/",className:"w-full",children:p?"Ir a Comprar":"Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-xs md:text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los ",e.jsx("a",{className:"customtext-primary font-bold",children:"T√©rminos"})," y ",e.jsx("a",{className:"customtext-primary font-bold",children:"Privacidad"}),"."]})})]})]})]})}var $e=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function Ae(r){var i=r.defaultOptions,l=i===void 0?!1:i,x=r.cacheOptions,m=x===void 0?!1:x,c=r.loadOptions;r.options;var d=r.isLoading,p=d===void 0?!1:d,h=r.onInputChange,y=r.filterOption,s=y===void 0?null:y,O=we(r,$e),S=O.inputValue,q=o.useRef(void 0),C=o.useRef(!1),E=o.useState(Array.isArray(l)?l:void 0),B=k(E,2),V=B[0],u=B[1],b=o.useState(typeof S<"u"?S:""),g=k(b,2),P=g[0],_=g[1],X=o.useState(l===!0),F=k(X,2),z=F[0],L=F[1],ie=o.useState(void 0),v=k(ie,2),I=v[0],G=v[1],M=o.useState([]),Y=k(M,2),Q=Y[0],R=Y[1],se=o.useState(!1),W=k(se,2),J=W[0],$=W[1],t=o.useState({}),n=k(t,2),a=n[0],f=n[1],N=o.useState(void 0),oe=k(N,2),me=oe[0],pe=oe[1],ue=o.useState(void 0),le=k(ue,2),xe=le[0],he=le[1];m!==xe&&(f({}),he(m)),l!==me&&(u(Array.isArray(l)?l:void 0),pe(l)),o.useEffect(function(){return C.current=!0,function(){C.current=!1}},[]);var ae=o.useCallback(function(H,T){if(!c)return T();var j=c(H,T);j&&typeof j.then=="function"&&j.then(T,function(){return T()})},[c]);o.useEffect(function(){l===!0&&ae(P,function(H){C.current&&(u(H||[]),L(!!q.current))})},[]);var fe=o.useCallback(function(H,T){var j=Se(H,T,h);if(!j){q.current=void 0,_(""),G(""),R([]),L(!1),$(!1);return}if(m&&a[j])_(j),G(j),R(a[j]),L(!1),$(!1);else{var ye=q.current={};_(j),L(!0),$(!I),ae(j,function(ne){C&&ye===q.current&&(q.current=void 0,L(!1),G(j),R(ne||[]),$(!1),f(ne?Z(Z({},a),{},Ce({},j,ne)):a))})}},[m,ae,I,a,h]),ge=J?[]:P&&I?Q:V||[];return Z(Z({},O),{},{options:ge,isLoading:z||p,onInputChange:fe,filterOption:s})}var Le=o.forwardRef(function(r,i){var l=Ae(r),x=ke(l);return o.createElement(Oe,qe({ref:i},x))}),Me=Le;function Re(){let r="";for(let i=0;i<12;i++){const l=Math.floor(Math.random()*10);r+=l}return r}const Te=r=>new Promise((i,l)=>{try{console.log(r);const x=Re(r.email);console.log(x),window.Culqi.publicKey=U.CULQI_PUBLIC_KEY,window.Culqi.settings({title:U.APP_NAME,email:r.email,currency:"PEN",amount:r.amount*100,order:`${x}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:U.APP_URL+"/assets/resources/logo.png",bannerColor:U.APP_COLOR_PRIMARY,buttonBackground:U.APP_COLOR_PRIMARY}}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){l("No se obtuvo un token de Culqi");return}const m=window.Culqi.token.id;console.log("‚úÖ Token generado:",m),r={...r,token:m,orderNumber:x},console.log("_request actualizado",r);const{status:c,result:d}=await K.Fetch("./api/pago",{method:"POST",body:JSON.stringify(r)});c||console.log((d==null?void 0:d.message)||"Error en el pago"),window.Culqi.close(),K.Notify.add({icon:"/assets/img/icon.svg",title:"Pago Exitoso",body:"El pago se proces√≥ correctamente.",type:"success"}),i(d)}catch(m){K.Notify.add({icon:"/assets/img/icon.svg",title:"Error en el Pago",body:m.message,type:"danger"}),l(m.message||"Error en el pago")}},document.addEventListener("culqi.error",function(m){var c,d;K.Notify.add({icon:"/assets/img/icon.svg",title:"Error en Culqi",body:((c=m.detail)==null?void 0:c.message)||"Error desconocido",type:"danger"}),l(((d=m.detail)==null?void 0:d.message)||"Error desconocido")})}catch(x){K.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:x.message,type:"danger"}),l("Error en la integraci√≥n con Culqi")}}),De=({title:r,description:i,selected:l,onSelect:x,disabled:m})=>e.jsxs("div",{className:`flex w-full items-center gap-3 p-4 border rounded-xl cursor-pointer transition-all duration-300 customtext-neutral-dark 
                }`,onClick:x,children:[e.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center ${l?"border-primary":""}`,children:l&&e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full"})}),e.jsxs("div",{className:"customtext-neutral-light",children:[e.jsx("h4",{className:"text-sm ",children:r}),e.jsx("p",{className:"text-xs",children:i})]})]});function Ue({cart:r,setSale:i,setCode:l,setDelivery:x,setCart:m,onContinue:c,noContinue:d,subTotal:p,igv:h,totalFinal:y,user:s,setEnvio:O,envio:S,ubigeos:q=[]}){var J,$;const[C,E]=o.useState(null),[B,V]=o.useState(null),[u,b]=o.useState({name:(s==null?void 0:s.name)||"",lastname:(s==null?void 0:s.lastname)||"",email:(s==null?void 0:s.email)||"",department:(s==null?void 0:s.department)||"",province:(s==null?void 0:s.province)||"",district:(s==null?void 0:s.district)||"",address:(s==null?void 0:s.address)||"",number:(s==null?void 0:s.number)||"",comment:"",reference:(s==null?void 0:s.reference)||"",ubigeo:(s==null?void 0:s.ubigeo)||null});o.useEffect(()=>{if(s!=null&&s.ubigeo&&(s!=null&&s.district)&&(s!=null&&s.province)&&(s!=null&&s.department)){const t={value:s.ubigeo,label:`${s.district}, ${s.province}, ${s.department}`,data:{reniec:s.ubigeo,departamento:s.department,provincia:s.province,distrito:s.district}};V(t),E(t),Q(t)}},[s]);const[g,P]=o.useState(!1),[_,X]=o.useState([]),[F,z]=o.useState(null),[L,ie]=o.useState(null),[v,I]=o.useState({}),[G,M]=o.useState(""),Y=()=>{const t={},n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return u.name.trim()||(t.name="Nombre es requerido"),u.lastname.trim()||(t.lastname="Apellido es requerido"),u.email.trim()?n.test(u.email)||(t.email="Email inv√°lido"):t.email="Email es requerido",u.ubigeo||(t.ubigeo="Ubicaci√≥n es requerida"),u.address||(t.address="Direcci√≥n es requerida"),F||(t.shipping="Seleccione un m√©todo de env√≠o"),I(t),Object.keys(t).length===0},Q=async t=>{if(!t)return;I(a=>({...a,ubigeo:""}));const{data:n}=t;b(a=>({...a,department:n.departamento,province:n.provincia,district:n.distrito,ubigeo:n.reniec})),P(!0);try{const a=await be.getShippingCost({ubigeo:n.reniec}),f=[];a.data.is_free?(f.push({type:"free",price:0,description:a.data.standard.description,deliveryType:a.data.standard.type,characteristics:a.data.standard.characteristics}),a.data.express.price>0&&f.push({type:"express",price:a.data.express.price,description:a.data.express.description,deliveryType:a.data.express.type,characteristics:a.data.express.characteristics})):a.data.is_agency?f.push({type:"agency",price:0,description:a.data.agency.description,deliveryType:a.data.agency.type,characteristics:a.data.agency.characteristics}):f.push({type:"standard",price:a.data.standard.price,description:a.data.standard.description,deliveryType:a.data.standard.type,characteristics:a.data.standard.characteristics}),X(f),z(f[0].type),O(f[0].price)}catch(a){console.error("Error al obtener precios de env√≠o:",a),ee.error("Sin cobertura",{description:"No realizamos env√≠os a esta ubicaci√≥n.",icon:e.jsx(ce,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),X([]),z(null),O(0)}P(!1)},R=async t=>{var n;if(t.preventDefault(),!s){ee.error("Acceso requerido",{description:"Debe iniciar sesi√≥n para continuar.",icon:e.jsx(_e,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"});return}if(!Y()){const a=Object.keys(v)[0];a&&((n=document.querySelector(`[name="${a}"]`))==null||n.scrollIntoView({behavior:"smooth",block:"center"}));return}try{const a={user_id:s.id,...u,fullname:`${u.name} ${u.lastname}`,country:"Per√∫",amount:y,delivery:S,cart:r},f=await Te(a);f.status?(i(f.sale),x(f.delivery),l(f.code),m([]),c()):ee.error("Error en el pago",{description:f.message||"Pago rechazado",icon:e.jsx(ShoppingCart,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch{ee.error("Lo sentimos, no puede continuar con la compra",{description:"Ocurri√≥ un error al procesar el pedido.",icon:e.jsx(ce,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}},se=o.useCallback(Ee.debounce((t,n)=>{if(t.length<3){n([]);return}fetch(`/api/ubigeo/search?q=${encodeURIComponent(t)}`).then(a=>{if(!a.ok)throw new Error("Error en la respuesta");return a.json()}).then(a=>{const f=a.map(N=>({value:N.reniec,label:`${N.distrito}, ${N.provincia}, ${N.departamento}`,data:{inei:N.inei,reniec:N.reniec,departamento:N.departamento,provincia:N.provincia,distrito:N.distrito}}));n(f)}).catch(a=>{console.error("Error:",a),n([])})},300),[]);o.useEffect(()=>{I(t=>{const n={...t};return Object.keys(u).forEach(a=>{u[a]&&delete n[a]}),n})},[u]);const W=t=>({control:n=>({...n,border:`1px solid ${t?"#ef4444":"#e5e7eb"}`,boxShadow:"none",minHeight:"50px","&:hover":{borderColor:t?"#ef4444":"#6b7280"},borderRadius:"0.75rem",padding:"2px 8px"}),menu:n=>({...n,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:n=>({...n,color:"#1f2937",backgroundColor:"white","&:hover":{backgroundColor:"#f3f4f6"},padding:"12px 16px"})});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-4 md:space-y-6 bg-white p-4 md:p-6 rounded-xl shadow-sm",onSubmit:R,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{name:"name",label:"Nombres",value:u.name,error:v.name,onChange:t=>b(n=>({...n,name:t.target.value})),required:!0,className:"border-gray-200"}),e.jsx(D,{name:"lastname",label:"Apellidos",value:u.lastname,error:v.lastname,onChange:t=>b(n=>({...n,lastname:t.target.value})),required:!0,className:"border-gray-200"})]}),e.jsx(D,{name:"email",label:"Correo electr√≥nico",type:"email",value:u.email,error:v.email,onChange:t=>b(n=>({...n,email:t.target.value})),required:!0,className:"border-gray-200"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"block text-sm 2xl:text-base mb-2 font-medium customtext-neutral-dark",children:"Ubicaci√≥n de entrega (Distrito)*"}),e.jsx(Me,{name:"ubigeo",cacheOptions:!0,value:C,loadOptions:se,onChange:t=>{E(t),Q(t),M("")},inputValue:G,onInputChange:(t,{action:n})=>{n==="input-change"&&M(t)},onFocus:()=>{E(null),M("")},onMenuOpen:()=>{C&&(E(null),M(""))},placeholder:"Buscar por Distrito ...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:t})=>t.length<3?"Buscar por Distrito ...":"No se encontraron resultados",isLoading:g,styles:W(!!v.ubigeo),formatOptionLabel:({data:t})=>e.jsxs("div",{className:"text-sm py-1",children:[e.jsx("div",{className:"font-medium",children:t.distrito}),e.jsxs("div",{className:"text-gray-500",children:[t.provincia,", ",t.departamento]})]}),className:"w-full rounded-xl transition-all duration-300",menuPortalTarget:document.body,isClearable:!0}),v.ubigeo&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:v.ubigeo})]}),e.jsx(D,{name:"address",label:"Direcci√≥n *",value:u.address,error:v.address,onChange:t=>b(n=>({...n,address:t.target.value})),required:!0,className:"border-gray-200"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{label:"N√∫mero",value:u.number,onChange:t=>b(n=>({...n,number:t.target.value})),className:"border-gray-200"}),e.jsx(D,{label:"Referencia",value:u.reference,onChange:t=>b(n=>({...n,reference:t.target.value})),className:"border-gray-200"})]}),_.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"M√©todo de env√≠o"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map(t=>e.jsx(De,{title:t.deliveryType,price:t.price,description:t.description,selected:F===t.type,onSelect:()=>{z(t.type),O(t.price),I(n=>({...n,shipping:""}))}},t.type))}),F&&_.length>0&&e.jsx("div",{className:"space-y-3 mt-4",children:($=(J=_.find(t=>t.type===F))==null?void 0:J.characteristics)==null?void 0:$.map((t,n)=>e.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"w-5 flex-shrink-0",children:e.jsx(Pe,{className:"customtext-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:t})})]},`char-${n}`))})]}),!d&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-end gap-3 md:gap-4 mt-6",children:[e.jsx(de,{type:"button",onClick:()=>window.history.back(),className:"w-full md:w-auto",children:"Regresar"}),e.jsx(te,{type:"submit",loading:g,className:"w-full md:w-auto",children:"Continuar"})]})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen"}),e.jsx("div",{className:"space-y-4 border-b-2 pb-6",children:r.map(t=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${t.image}`,alt:t.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad: ",t.quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["S/ ",w(t.price)]})]})]},t.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["S/ ",w(p)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",w(h)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Env√≠o:"}),e.jsxs("span",{children:["S/ ",w(S)]})]}),e.jsx("div",{className:"pt-4 border-t-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",w(y)]})]})}),e.jsx(te,{onClick:R,className:"w-full mt-6",children:"Ir a Pagar"}),e.jsxs("p",{className:"text-xs text-gray-600 mt-4 text-center",children:["Al completar tu compra aceptas nuestros"," ",e.jsx("a",{href:"/terminos",className:"text-blue-600 hover:underline",children:"T√©rminos y Condiciones"})]})]})]})]})}function Be({cart:r,code:i,delivery:l}){const m=(r.reduce((p,h)=>{const y=h.final_price;return p+y*h.quantity},0)/1.18).toFixed(2),c=(m*.18).toFixed(2),d=parseFloat(m)+parseFloat(c)+parseFloat(l);return e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-10",children:e.jsxs(A.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.3},className:"text-center space-y-6",children:[e.jsx(A.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.5},className:"w-20 h-20 bg-secondary rounded-full mx-auto flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"‚úì"})}),e.jsx("h2",{className:"text-2xl md:text-3xl customtext-neutral-light animate-bounce",children:"¬°Gracias por tu compra! üéâ"}),e.jsx("p",{className:"customtext-neutral-dark text-3xl md:text-5xl font-bold",children:"Tu orden ha sido recibida"}),e.jsxs(A.div,{whileHover:{scale:1.05},className:"py-6 px-4 bg-secondary rounded-xl inline-block",children:[e.jsx("div",{className:"customtext-neutral-light",children:"C√≥digo de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-xl font-bold",children:`#${i}`})]}),e.jsxs("div",{className:"space-y-6 bg-[#F7F9FB] p-6 md:p-8 rounded-xl shadow-inner",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:r.map((p,h)=>e.jsx(A.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:h*.2},className:"bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow duration-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-center sm:items-start",children:[e.jsx("div",{className:"bg-gray-50 p-3 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${p.image}`,alt:p.name,className:"w-24 h-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsx("h3",{className:"font-semibold text-xl mb-3",children:p.name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:p.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:p.quantity})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:p.sku})]})]})]})]})},h))}),e.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"space-y-4 mt-6",children:[[{label:"Subtotal",value:m},{label:"IGV",value:c},{label:"Env√≠o",value:l}].map((p,h)=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"customtext-neutral-dark",children:p.label}),e.jsxs("span",{className:"font-semibold",children:["S/ ",w(p.value)]})]},h)),e.jsx("div",{className:"py-4 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-xl md:text-2xl items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",w(d)]})]})})]}),e.jsx(A.div,{className:"pt-6",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(te,{href:"/catalogo",className:"w-full md:w-auto",children:"Seguir Comprando"})})]})]})})})}function ct({cart:r,setCart:i,user:l,ubigeos:x=[],items:m}){const[c,d]=o.useState(1),h=(r.reduce((g,P)=>g+P.final_price*P.quantity,0)/1.18).toFixed(2),y=(h*.18).toFixed(2),[s,O]=o.useState(0),S=parseFloat(h)+parseFloat(y)+parseFloat(s),[q,C]=o.useState([]),[E,B]=o.useState([]),[V,u]=o.useState([]);o.useEffect(()=>{const g=document.createElement("script");return g.src=U.CULQI_API,g.async=!0,g.onload=()=>{window.culqi=function(){window.Culqi.token?console.log("‚úÖ Token recibido:",window.Culqi.token.id):window.Culqi.order&&console.log("‚úÖ Orden recibida:",window.Culqi.order)}},document.body.appendChild(g),()=>document.body.removeChild(g)},[]);const b=g=>{d(g),window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("div",{className:"min-h-screen bg-[#F7F9FB] py-4 md:py-12 px-2 sm:px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white p-3 md:p-8 rounded-lg md:rounded-xl shadow-sm",children:[e.jsx("div",{className:"mb-4 md:mb-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-1 md:gap-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${c===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:" bg-primary text-white w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm",children:"1"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Carrito"})]}),e.jsx("div",{className:"mb-4 lg:mb-0  flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:c>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${c>2?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm ${c>2?"bg-primary text-white":"bg-white customtext-primary"}`,children:"2"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Env√≠o"})]}),e.jsx("div",{className:"mb-4 lg:mb-0  flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:c>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${c===3?"customtext-primary  font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm ${c===3?"bg-primary text-white":"bg-white customtext-primary"}`,children:"3"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Confirmaci√≥n"})]})]})}),c===1&&e.jsx(Fe,{cart:r,setCart:i,onContinue:()=>b(2),subTotal:h,envio:s,igv:y,totalFinal:S}),c===2&&e.jsx(Ue,{items:m,setCode:B,setDelivery:u,cart:r,setSale:C,setCart:i,onContinue:()=>b(3),noContinue:()=>b(1),subTotal:h,envio:s,setEnvio:O,igv:y,totalFinal:S,user:l,ubigeos:x}),c===3&&e.jsx(Be,{code:E,delivery:V,cart:q,subTotal:h,envio:s,igv:y,totalFinal:S})]})})}export{ct as default};
