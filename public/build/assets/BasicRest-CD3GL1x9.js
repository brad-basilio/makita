var h=Object.defineProperty;var u=(c,r,o)=>r in c?h(c,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[r]=o;var n=(c,r,o)=>u(c,typeof r!="symbol"?r+"":r,o);import{m as a}from"./main-BvVILmTO.js";import{t as i}from"./index-CMHsc23u.js";class m{constructor(){n(this,"is_use_notify",!0);n(this,"path",null);n(this,"hasFiles",!1);n(this,"controller",null);n(this,"simpleGet",async(r,o)=>{try{const{status:e,result:t}=await a.Fetch(r,o);if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");return t.data??!0}catch(e){return i.error("¡Error!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});n(this,"paginate",async r=>{this.controller.abort("Nothing"),this.controller=new AbortController;const o=this.controller.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(a.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(r),signal:o})).json()});n(this,"save",async(r,o=()=>{})=>{try{let e=!1,t={};if(this.hasFiles){const s=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(a.Cookies.get("XSRF-TOKEN"))},body:r});e=s.ok,t=JSON.parseable(await s.text())}else{const s=await a.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(r)});e=s.status,t=s.result}if(!e)throw new Error((t==null?void 0:t.message)||"Ocurrio un error inesperado");if(this.is_use_notify){const s=typeof t.data=="string"?t.data:t.message;i.success("¡Excelente!",{description:s,duration:3e3,position:"bottom-center",richColors:!0})}return o==null||o(),(t==null?void 0:t.data)??!0}catch(e){return i.error("¡Error!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});n(this,"status",async({id:r,status:o})=>{try{const{status:e,result:t}=await a.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:r,status:o})});if(!e)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return i.success("¡Excelente!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(e){return i.error("¡Error!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});n(this,"boolean",async({id:r,field:o,value:e})=>{try{const{status:t,result:s}=await a.Fetch(`/api/${this.path}/${o}`,{method:"PATCH",body:JSON.stringify({id:r,value:e})});if(!t)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return i.success("¡Excelente!",{description:s.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(t){return i.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});n(this,"delete",async r=>{try{const{status:o,result:e}=await a.Fetch(`/api/${this.path}/${r}`,{method:"DELETE"});if(!o)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return i.success("¡Excelente!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(o){return i.error("¡Error!",{description:o.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});n(this,"get",async(r={},o=[])=>{try{let e=`/api/${this.path}`;if(typeof r=="string"||typeof r=="number")e+=`/${r}`;else if(typeof r=="object"&&Object.keys(r).length>0){const s=new URLSearchParams(r).toString();e+=`?${s}`}if(o.length>0){const s=o.join(",");e+=`${e.includes("?")?"&":"?"}with=${s}`}const t=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(a.Cookies.get("XSRF-TOKEN"))}});if(!t.ok)throw new Error(`Error ${t.status}: ${t.statusText}`);return await t.json()}catch(e){return i.error("¡Error!",{description:e.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});this.controller=new AbortController}}export{m as B};
