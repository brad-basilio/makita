var y=Object.defineProperty;var N=(s,o,n)=>o in s?y(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n;var R=(s,o,n)=>N(s,typeof o!="symbol"?o+"":o,n);import{j as i}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BH53Isel.js";import{c as B}from"./ReactAppend-DTVVXReZ.js";import{B as V}from"./Base-Te1VNKMB.js";import{C as G}from"./CreateReactScript-BoGwggCx.js";import{T as M}from"./Table-DitbKwtZ.js";import{I as w}from"./InputFormGroup-D5I6zpZc.js";import{R as m}from"./ReactAppend-D7S498fx.js";import{D as j}from"./DxButton-DV0H-ZcL.js";import{S as c}from"./SwitchFormGroup-CGYpv_4Q.js";import{S as _}from"./ProductCard-Ap6bpF1Q.js";import{B as A}from"./BasicRest-B3rfI5GY.js";import"./server.browser-Bf4gQIc7.js";import{T as I}from"./TextareaFormGroup-DVzYJtLM.js";import{M as O}from"./Modal-CIqmjseY.js";import"./index-yBjzXJbu.js";import"./index-fNjTmf9T.js";import"./Global-ErywZRdd.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";/* empty css              */import"./Logout-7s5dsuEK.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./MenuItemContainer-C_dOKkRB.js";import"./index.esm-DAJ8Pwbk.js";import"./index-xsH4HHeE.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";import"./index-CMHsc23u.js";class Y extends A{constructor(){super(...arguments);R(this,"path","admin/job-applications");R(this,"hasFiles",!0)}}const a=new Y,H=({})=>{const s=r.useRef(),o=r.useRef(),n=r.useRef(),p=r.useRef(),u=r.useRef(),d=r.useRef(),f=r.useRef(),h=r.useRef(),x=r.useRef(),b=r.useRef(),[g,v]=r.useState(!1),C=e=>{e!=null&&e.id?v(!0):v(!1),n.current.value=(e==null?void 0:e.id)??"",p.current.value=(e==null?void 0:e.name)??"",u.current.value=(e==null?void 0:e.phone)??"",d.current.value=(e==null?void 0:e.email)??"",$(f.current).prop("checked",(e==null?void 0:e.status)??!0),$(h.current).prop("checked",(e==null?void 0:e.visible)??!0),$(x.current).prop("checked",(e==null?void 0:e.seen)??!1),b.current.value=(e==null?void 0:e.notes)??"",$(o.current).modal("show")},E=async e=>{e.preventDefault();const t={id:n.current.value||void 0,name:p.current.value,phone:u.current.value,email:d.current.value,status:$(f.current).is(":checked"),visible:$(h.current).is(":checked"),seen:$(x.current).is(":checked"),notes:b.current.value};await a.save(t)&&($(s.current).dxDataGrid("instance").refresh(),$(o.current).modal("hide"))},F=async e=>{const{isConfirmed:t}=await _.fire({title:"Eliminar solicitud",text:"¿Estás seguro de eliminar esta solicitud de empleo?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!t||!await a.delete(e)||$(s.current).dxDataGrid("instance").refresh()},k=e=>{window.open(`/api/admin/job-applications/media/${e}`,"_blank")},D=async({id:e,value:t})=>{await a.boolean({id:e,field:"status",value:t}),$(s.current).dxDataGrid("instance").refresh()},S=async({id:e,value:t})=>{await a.boolean({id:e,field:"visible",value:t}),$(s.current).dxDataGrid("instance").refresh()},T=async({id:e,value:t})=>{await a.boolean({id:e,field:"seen",value:t}),$(s.current).dxDataGrid("instance").refresh()};return i.jsxs(i.Fragment,{children:[i.jsx(M,{gridRef:s,title:"Solicitudes de Empleo",rest:a,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(s.current).dxDataGrid("instance").refresh()}})},columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"name",caption:"Nombre",width:"20%"},{dataField:"email",caption:"Email",width:"20%"},{dataField:"phone",caption:"Teléfono",width:"15%"},{dataField:"cv_file",caption:"CV",width:"10%",allowFiltering:!1,cellTemplate:(e,{data:t})=>{t.cv_file?m(e,i.jsxs("button",{className:"btn btn-xs btn-soft-primary",onClick:()=>k(t.cv_file),title:"Descargar CV",children:[i.jsx("i",{className:"fa fa-download"})," CV"]})):e.html('<i class="text-muted">Sin CV</i>')}},{dataField:"status",caption:"Estado",width:"10%",cellTemplate:(e,{data:t})=>{m(e,i.jsx(c,{checked:t.status,onChange:l=>D({id:t.id,value:l})}))}},{dataField:"visible",caption:"Visible",width:"10%",cellTemplate:(e,{data:t})=>{m(e,i.jsx(c,{checked:t.visible,onChange:l=>S({id:t.id,value:l})}))}},{dataField:"seen",caption:"Visto",width:"10%",cellTemplate:(e,{data:t})=>{m(e,i.jsx(c,{checked:t.seen,onChange:l=>T({id:t.id,value:l})}))}},{dataField:"created_at",caption:"Fecha",width:"15%",cellTemplate:(e,{data:t})=>{e.html(moment(t.created_at).format("DD/MM/YYYY HH:mm"))}},{caption:"Acciones",width:"8%",cellTemplate:(e,{data:t})=>{e.css("text-overflow","unset"),e.append(j({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>C(t)})),e.append(j({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>F(t.id)}))},allowFiltering:!1,allowExporting:!1}]}),i.jsx(O,{modalRef:o,title:g?"Editar solicitud":"Ver solicitud",onSubmit:E,size:"md",children:i.jsxs("div",{className:"row",id:"principal-container",children:[i.jsx("input",{ref:n,type:"hidden"}),i.jsx(w,{eRef:p,label:"Nombre completo",col:"col-md-6",readOnly:!0}),i.jsx(w,{eRef:d,label:"Email",col:"col-md-6",readOnly:!0}),i.jsx(w,{eRef:u,label:"Teléfono",col:"col-md-6",readOnly:!0}),i.jsx("div",{className:"col-md-6",children:i.jsx(c,{eRef:f,label:"Estado activo"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(c,{eRef:h,label:"Visible"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(c,{eRef:x,label:"Marcado como visto"})}),i.jsx(I,{eRef:b,label:"Notas internas",rows:3})]})})]})};G((s,o)=>{B.createRoot(s).render(i.jsx(V,{...o,title:"Solicitudes de Empleo",children:i.jsx(H,{...o})}))});
