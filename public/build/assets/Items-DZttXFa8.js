import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as ze}from"./Base-BFPMzJYQ.js";import{S as E}from"./SwitchFormGroup-CGYpv_4Q.js";import{T as ke}from"./TextareaFormGroup-DVzYJtLM.js";import{r as a}from"./index-BH53Isel.js";import{c as Te}from"./ReactAppend-DTVVXReZ.js";import{s as Q}from"./server.browser-Bf4gQIc7.js";import{S as X}from"./ProductCard-Ap6bpF1Q.js";import{I as de}from"./ItemsRest-BBkeaO-v.js";import{M as ae}from"./Modal-CIqmjseY.js";import{T as Pe}from"./Table-DitbKwtZ.js";import{I as Ee}from"./ImageFormGroup-BPR9pDAU.js";import{I as L}from"./InputFormGroup-D5I6zpZc.js";import{Q as $e}from"./QuillFormGroup-D8zDHSfJ.js";import{S as A}from"./SelectAPIFormGroup-BYWbn4kr.js";import{S as Ae}from"./SelectFormGroup-YqB1XVb8.js";import{D as oe}from"./DxButton-DV0H-ZcL.js";import{C as _e}from"./CreateReactScript-BoGwggCx.js";import{N as ne}from"./Number2Currency-e57Tgsuk.js";import{R as T}from"./ReactAppend-D7S498fx.js";import{S as _}from"./SetSelectValue-UxyCmHse.js";import"./main-BvVILmTO.js";import"./index-CMHsc23u.js";import"./index-yBjzXJbu.js";import"./Global-ErywZRdd.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-7s5dsuEK.js";import"./MenuItemContainer-C_dOKkRB.js";import"./index.esm-DAJ8Pwbk.js";import"./index-xsH4HHeE.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./BasicRest-B3rfI5GY.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";const ce=({label:I,structure:x,value:S=[],onChange:g,typeOptions:z=[]})=>{const[h,v]=a.useState([]),y=a.useRef(!0);a.useEffect(()=>{if(y.current){const d=S.map(n=>{var u,p;return{...n,type:((u=n.type)==null?void 0:u.charAt(0).toUpperCase())+((p=n.type)==null?void 0:p.slice(1).toLowerCase())}});v(d),y.current=!1}else if(JSON.stringify(S)!==JSON.stringify(h)){const d=S.map(n=>{var u,p;return{...n,type:((u=n.type)==null?void 0:u.charAt(0).toUpperCase())+((p=n.type)==null?void 0:p.slice(1).toLowerCase())}});v(d)}},[S]);const F=()=>{const d=[...h,{...x}];v(d),g([...h,x])},N=d=>{const n=h.filter((u,p)=>p!==d);v(n),g(n)},b=(d,n,u)=>{const p=[...h];p[d][n]=n==="type"?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():u,v(p),g(p)};return e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:I}),h.map((d,n)=>{h.length%2!==0&&h.length-1;const u=x.hasOwnProperty("description")&&Object.keys(x).length===1,p=x.hasOwnProperty("title")&&x.hasOwnProperty("description")&&x.hasOwnProperty("tooltip");return e.jsx("div",{className:"mb-3 p-3 border rounded position-relative",style:{backgroundColor:"#ffffff",border:"1px solid #dee2e6"},children:e.jsxs("div",{className:"row",children:[typeof d=="object"?e.jsx("div",{className:"col-12",children:u?e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Descripción"}),e.jsx("textarea",{className:"form-control",value:d.description||"",onChange:o=>b(n,"description",o.target.value),placeholder:"Ingrese la descripción general",rows:4,style:{minHeight:"120px",maxHeight:"200px",resize:"vertical"}})]}):p?e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Título"}),e.jsx("textarea",{className:"form-control",value:d.title||"",onChange:o=>b(n,"title",o.target.value),placeholder:"Título de la especificación",rows:2,style:{minHeight:"60px",maxHeight:"100px",resize:"vertical"}})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Descripción"}),e.jsx("textarea",{className:"form-control",value:d.description||"",onChange:o=>b(n,"description",o.target.value),placeholder:"Descripción técnica detallada",rows:3,style:{minHeight:"80px",maxHeight:"150px",resize:"vertical"}})]}),e.jsxs("div",{className:"col-12 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Tooltip (información adicional)"}),e.jsx("input",{type:"text",className:"form-control",value:d.tooltip||"",onChange:o=>b(n,"tooltip",o.target.value),placeholder:"Información adicional que aparecerá en tooltip"})]})]}):e.jsx("div",{className:"row",children:Object.keys(x).map(o=>e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:o==="type"?"Tipo":o.charAt(0).toUpperCase()+o.slice(1)}),o==="type"?e.jsxs("select",{className:"form-select",value:d[o]||"",onChange:j=>b(n,o,j.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar tipo"}),z.map(j=>e.jsx("option",{value:j,children:j},j))]}):e.jsx("textarea",{className:"form-control",value:d[o]||"",onChange:j=>b(n,o,j.target.value),placeholder:`Ingrese ${o.charAt(0).toUpperCase()+o.slice(1)}`,rows:4,style:{minHeight:"120px",maxHeight:"200px",resize:"vertical"}})]},o))})}):e.jsxs("div",{className:"col-12 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Característica"}),e.jsx("textarea",{className:"form-control",value:d,onChange:o=>b(n,null,o.target.value),placeholder:"Describe la característica del producto",rows:4,style:{minHeight:"120px",maxHeight:"200px",resize:"vertical"}})]}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm rounded-circle position-absolute",style:{top:"8px",right:"8px",width:"28px",height:"28px",padding:"0",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onClick:()=>N(n),title:"Eliminar campo",children:e.jsx("i",{className:"mdi mdi-close",style:{fontSize:"14px",color:"white"}})})]})},n)}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("button",{type:"button",className:"btn btn-primary px-4 py-2",onClick:F,children:[e.jsx("i",{className:"mdi mdi-plus me-2"}),"Agregar"]})})]})},Be=new de,Me=({gridRef:I,modalRef:x})=>{const[S,g]=a.useState(null),[z,h]=a.useState(!1),[v,y]=a.useState(""),[F,N]=a.useState(!1),b=n=>{g(n.target.files[0])},d=async()=>{var u,p;if(!S){y("Por favor, selecciona un archivo."),N(!0);return}const n=new FormData;n.append("file",S),h(!0);try{const o=await Be.importData(n);if(console.log(o),o.error){const j=Array.isArray(o.error)?o.error.join(`
`):o.error;y(`Error en la importación:
${j}`),N(!0)}else y(o.message),N(!1),$(I.current).dxDataGrid("instance").refresh(),x.current&&$(x.current).modal("hide")}catch(o){y("Error al importar: "+(((p=(u=o.response)==null?void 0:u.data)==null?void 0:p.error)||o.message)),N(!0)}h(!1)};return e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"mb-1",children:e.jsx("a",{href:"/assets/img/salafabulosa/formato_import_products.xlsx",download:!0,children:"Descargar formato .xlsx"})}),e.jsx("div",{children:e.jsx("input",{className:"form-control",type:"file",accept:".xlsx",onChange:b})}),e.jsx("button",{onClick:d,disabled:z,className:"btn btn-primary mt-2",type:"button",children:z?"Subiendo...":"Subir Archivo"}),v&&e.jsx("div",{className:`alert ${F?"alert-danger":"alert-success"} mt-2`,role:"alert",children:e.jsx("div",{className:"alert-message",children:v})})]})})},B=new de,Ge=({categories:I,brands:x,collections:S})=>{//!FALTA EDIT AND DELETEDE GALERIA
const[g,z]=a.useState([]),h=a.useRef(),v=a.useRef(),y=a.useRef(),F=a.useRef(),N=a.useRef(),b=a.useRef(),d=a.useRef(),n=a.useRef(),u=a.useRef(),p=a.useRef(),o=a.useRef(),j=a.useRef(),H=a.useRef(),M=a.useRef();a.useRef();const V=a.useRef(),U=a.useRef();a.useRef([]);const me=a.useRef([]),[pe,K]=a.useState(!1),[he,ue]=a.useState(null),[xe,fe]=a.useState(null),[w,C]=a.useState([]),Z=a.useRef(),[R,D]=a.useState([]),Y=a.useRef(),ge=s=>{const l=Array.from(s.target.files).map(r=>({file:r,url:URL.createObjectURL(r)}));C(r=>[...r,...l])},be=s=>{s.preventDefault();const l=Array.from(s.dataTransfer.files).map(r=>({file:r,url:URL.createObjectURL(r)}));C(r=>[...r,...l])},ee=s=>{s.preventDefault()},je=(s,t)=>{s.preventDefault(),w[t].id?C(r=>r.map((c,i)=>i===t?{...c,toDelete:!0}:c)):C(r=>r.filter((c,i)=>i!==t))},ve=s=>{const t=Array.from(s.target.files),l=10*1024*1024,r=[],c=[];t.forEach(i=>{i.size>l?c.push(i.name):r.push({file:i,name:i.name,size:i.size,type:i.type})}),c.length>0&&X.fire({title:"Archivos muy pesados",html:`Los siguientes archivos exceden el límite de 10MB y no se pueden subir:<br><br><strong>${c.join("<br>")}</strong><br><br>Por favor, comprime los archivos o utiliza un servicio de almacenamiento en la nube.`,icon:"warning",confirmButtonText:"Entendido"}),r.length>0&&D(i=>[...i,...r])},ye=s=>{s.preventDefault();const t=Array.from(s.dataTransfer.files),l=10*1024*1024,r=[],c=[];t.forEach(i=>{i.size>l?c.push(i.name):r.push({file:i,name:i.name,size:i.size,type:i.type})}),c.length>0&&X.fire({title:"Archivos muy pesados",html:`Los siguientes archivos exceden el límite de 10MB y no se pueden subir:<br><br><strong>${c.join("<br>")}</strong><br><br>Por favor, comprime los archivos o utiliza un servicio de almacenamiento en la nube.`,icon:"warning",confirmButtonText:"Entendido"}),r.length>0&&D(i=>[...i,...r])},Ne=(s,t)=>{s.preventDefault(),R[t].id?D(r=>r.map((c,i)=>i===t?{...c,toDelete:!0}:c)):D(r=>r.filter((c,i)=>i!==t))},we=s=>{if(s===0)return"0 Bytes";const t=1024,l=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,r)).toFixed(2))+" "+l[r]},Re=s=>{switch(s.split(".").pop().toLowerCase()){case"pdf":return"mdi-file-pdf";case"doc":case"docx":return"mdi-file-word";case"xls":case"xlsx":return"mdi-file-excel";case"ppt":case"pptx":return"mdi-file-powerpoint";case"zip":case"rar":return"mdi-folder-zip";case"txt":return"mdi-file-document";default:return"mdi-file"}};a.useEffect(()=>{if(g&&g.images){const s=g.images.map(t=>({id:t.id,url:`/storage/images/item/${t.url}`}));C(s)}if(g&&g.downloadables){const s=g.downloadables.map(t=>({id:t.id,name:t.original_name||t.name,url:`/storage/images/downloads/item/${t.url}`,size:t.size||0,type:t.mime_type||"application/octet-stream"}));D(s)}},[g]);const se=s=>{var t,l,r,c;if(console.log("data total",s),z(s||null),s!=null&&s.id?K(!0):K(!1),y.current.value=(s==null?void 0:s.id)||"",$(F.current).val((s==null?void 0:s.category_id)||null).trigger("change"),_(N.current,(t=s==null?void 0:s.family)==null?void 0:t.id,(l=s==null?void 0:s.family)==null?void 0:l.name),_(b.current,(r=s==null?void 0:s.platform)==null?void 0:r.id,(c=s==null?void 0:s.platform)==null?void 0:c.name),_(d.current,(s==null?void 0:s.applications)??[],"id","name"),_(n.current,(s==null?void 0:s.symbologies)??[],"id","name"),_(u.current,(s==null?void 0:s.technologies)??[],"id","name"),p.current.value=(s==null?void 0:s.name)||"",o.current.value=(s==null?void 0:s.summary)||"",j.current.value=(s==null?void 0:s.price)||0,H.current.value=(s==null?void 0:s.discount)||0,M.current.value=null,M.image.src=`/storage/images/item/${(s==null?void 0:s.image)??"undefined"}`,V.editor.root.innerHTML=(s==null?void 0:s.description)??"",s!=null&&s.images){const i=s.images.map(f=>({id:f.id,url:`/api/items/gallery/media/${f.url}`}));C(i)}else C([]);if(s!=null&&s.downloadables){const i=s.downloadables.map(f=>({id:f.id,name:f.original_name||f.name,url:`/storage/downloads/item/${f.url}`,size:f.size||0,type:f.mime_type||"application/octet-stream"}));D(i)}else D([]);s!=null&&s.specifications?O(s.specifications.map(i=>({type:i.type,title:i.title,description:i.description,tooltip:i.tooltip}))):O([]),U.current.value=s==null?void 0:s.stock,$(v.current).modal("show")},Se=async s=>{s.preventDefault();const t=$(d.current).val(),l=$(n.current).val(),r=$(u.current).val(),c={id:y.current.value||void 0,category_id:F.current.value,family_id:N.current.value,platform_id:b.current.value,name:p.current.value,summary:o.current.value,price:j.current.value,discount:H.current.value,applications:t,symbologies:l,technologies:r,description:V.current.value,stock:U.current.value,specifications:JSON.stringify(k)},i=new FormData;for(const m in c)i.append(m,c[m]);i.append("features",JSON.stringify(Ie)),i.append("specifications",JSON.stringify(k));const f=M.current.files[0];f&&i.append("image",f);let te=0;const J=[];w.forEach((m,P)=>{m.toDelete||(m.file?(i.append(`gallery[${te}]`,m.file),te++):J.push(m.id))}),J.length>0&&J.forEach((m,P)=>{i.append(`gallery_ids[${P}]`,m)});const re=w.filter(m=>m.toDelete).map(m=>m.id);re.length>0&&i.append("deleted_images",JSON.stringify(re));let ie=0;const W=[];R.forEach((m,P)=>{m.toDelete||(m.file?(i.append(`downloadables[${ie}]`,m.file),ie++):W.push(m.id))}),W.length>0&&W.forEach((m,P)=>{i.append(`downloadable_ids[${P}]`,m)});const le=R.filter(m=>m.toDelete).map(m=>m.id);le.length>0&&i.append("deleted_downloadables",JSON.stringify(le)),await B.save(i)&&($(h.current).dxDataGrid("instance").refresh(),$(v.current).modal("hide"),C([]),D([]))},Ce=async({id:s,value:t})=>{await B.boolean({id:s,field:"visible",value:t})&&$(h.current).dxDataGrid("instance").refresh()},G=async({id:s,field:t,value:l})=>{await B.boolean({id:s,field:t,value:l})&&$(h.current).dxDataGrid("instance").refresh()},De=async s=>{const{isConfirmed:t}=await X.fire({title:"Eliminar curso",text:"¿Estás seguro de eliminar este curso?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!t||!await B.delete(s)||$(h.current).dxDataGrid("instance").refresh()},[Ie,Oe]=a.useState([]),[k,O]=a.useState([]),[Le,He]=a.useState(!1),q=a.useRef(),Fe=()=>{$(q.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{gridRef:h,title:"Items",rest:B,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(h.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>se()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>Fe()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(s,{data:t})=>{var l,r,c;s.html(Q.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block fst-italic text-muted",children:(l=t.collection)==null?void 0:l.name}),e.jsx("b",{className:"d-block",children:(r=t.category)==null?void 0:r.name}),e.jsx("small",{className:"text-muted",children:(c=t.subcategory)==null?void 0:c.name})]})))}},{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},{dataField:"brand.name",caption:"Marca",width:"120px"},{dataField:"name",caption:"Nombre",minWidth:"300px",cellTemplate:(s,{data:t})=>{const r=((c,i)=>{if(!c)return"";const f=c.split(" ");return f.length>i?f.slice(0,i).join(" ")+"...":c})(t.summary,12);s.html(Q.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:t.name}),e.jsx("br",{}),e.jsx("span",{children:r})]})))}},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(s,{data:t})=>{s.html(Q.renderToString(e.jsxs(e.Fragment,{children:[t.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:["S/.",ne(t.price)]}),e.jsxs("span",{children:["S/.",ne(t.discount>0?t.discount:t.price)]})]})))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(s,{data:t})=>{T(s,e.jsx("img",{src:`/storage/images/item/${t.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:l=>l.target.src="/api/cover/thumbnail/null"}))}},{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const l=t.is_new===1||t.is_new==="1"||t.is_new===!0;T(s,e.jsx(E,{checked:l,onChange:r=>G({id:t.id,field:"is_new",value:r.target.checked?1:0})}))}},{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const l=t.offering===1||t.offering==="1"||t.offering===!0;T(s,e.jsx(E,{checked:l,onChange:r=>G({id:t.id,field:"offering",value:r.target.checked?1:0})}))}},{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const l=t.recommended===1||t.recommended==="1"||t.recommended===!0;T(s,e.jsx(E,{checked:l,onChange:r=>G({id:t.id,field:"recommended",value:r.target.checked?1:0})}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{const l=t.featured===1||t.featured==="1"||t.featured===!0;T(s,e.jsx(E,{checked:l,onChange:r=>G({id:t.id,field:"featured",value:r.target.checked?1:0})}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(s,{data:t})=>{T(s,e.jsx(E,{checked:t.visible,onChange:l=>Ce({id:t.id,value:l.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:t})=>{s.css("text-overflow","unset"),s.append(oe({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>se(t)})),s.append(oe({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>De(t.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(ae,{modalRef:v,title:pe?"Editar Producto":"Agregar Producto",onSubmit:Se,size:"xl",children:e.jsxs("div",{className:"container-fluid",id:"principal-container",children:[e.jsx("input",{ref:y,type:"hidden"}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-information-outline text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Información Principal"}),e.jsx("small",{className:"text-white",children:"Datos básicos del producto"})]})]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(L,{eRef:p,label:"Nombre del Producto",required:!0,placeholder:"Ingrese el nombre del producto"})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(ke,{eRef:o,label:"Resumen del Producto",rows:3,placeholder:"Descripción breve del producto"})})})]})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-tag-multiple text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Clasificación y Organización"}),e.jsx("small",{className:"text-white",children:"Categorías, familias y etiquetas"})]})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs(Ae,{eRef:F,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:s=>ue(s.target.value),children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),I.map((s,t)=>e.jsx("option",{value:s.id,children:s.name},t))]})}),e.jsx("div",{className:"col-md-6",children:e.jsx(A,{eRef:N,label:"Familia",searchAPI:"/api/admin/families/paginate",searchBy:"name",filter:["category_id","=",he],dropdownParent:"#principal-container",onChange:s=>fe(s.target.value)})}),e.jsx("div",{className:"col-md-6",children:e.jsx(A,{eRef:b,label:"Plataforma",searchAPI:"/api/admin/platforms/paginate",searchBy:"name",filter:["family_id","=",xe],dropdownParent:"#principal-container"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(A,{id:"applications",eRef:d,searchAPI:"/api/admin/applications/paginate",searchBy:"name",label:"Aplicaciones",dropdownParent:"#principal-container",tags:!0,multiple:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(A,{id:"symbologies",eRef:n,searchAPI:"/api/admin/symbologies/paginate",searchBy:"name",label:"Simbologías",dropdownParent:"#principal-container",tags:!0,multiple:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(A,{id:"technologies",eRef:u,searchAPI:"/api/admin/technologies/paginate",searchBy:"name",label:"Tecnologías",dropdownParent:"#principal-container",tags:!0,multiple:!0})})]})})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-currency-usd text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Información de Precios"}),e.jsx("small",{className:"text-white",children:"Precios y stock disponible"})]})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(L,{eRef:j,label:"Precio Regular (S/.)",type:"number",step:"0.01",min:"0",required:!0,placeholder:"0.00"})}),e.jsxs("div",{className:"col-md-4",children:[e.jsx(L,{eRef:H,label:"Precio con Descuento (S/.)",type:"number",step:"0.01",min:"0",placeholder:"0.00"}),e.jsx("small",{className:"text-muted",children:"Dejar vacío si no hay descuento"})]}),e.jsx("div",{className:"col-md-4",children:e.jsx(L,{label:"Stock Disponible",eRef:U,type:"number",min:"0",placeholder:"0"})})]})})]})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"8px"},children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-format-list-bulleted text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Especificaciones Generales"}),e.jsx("small",{className:"text-white",children:"Características principales del producto"})]})]})}),e.jsx("div",{className:"card-body",style:{padding:"20px"},children:e.jsx(ce,{ref:me,label:"",structure:{description:""},value:k.filter(s=>s.type==="general"),onChange:s=>{const t=k.filter(r=>r.type==="technical"),l=[...s.map(r=>({...r,type:"general"})),...t];O(l)},placeholder:"Descripción general del producto"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"8px"},children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-cog text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Especificaciones Técnicas"}),e.jsx("small",{className:"text-white",children:"Detalles técnicos y funcionales"})]})]})}),e.jsx("div",{className:"card-body",style:{padding:"20px"},children:e.jsx(ce,{label:"",structure:{title:"",description:"",tooltip:""},value:k.filter(s=>s.type==="technical"),onChange:s=>{const l=[...k.filter(r=>r.type==="general"),...s.map(r=>({...r,type:"technical"}))];O(l)},placeholder:"Especificaciones técnicas del producto"})})]})})]}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-image-multiple text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Imágenes y Multimedia"}),e.jsx("small",{className:"text-white",children:"Galería de imágenes del producto"})]})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"row",children:e.jsx(Ee,{eRef:M,label:"Imagen Principal",aspect:1})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h6",{className:"mb-2",children:"Galería de Imágenes"}),e.jsx("input",{id:"input-item-gallery",ref:Z,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:ge}),e.jsx("div",{className:"border border-2 border-dashed rounded p-4 text-center",style:{cursor:"pointer",backgroundColor:"#f8f9fa",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>Z.current.click(),onDrop:be,onDragOver:ee,onMouseEnter:s=>{s.target.style.backgroundColor="#e9ecef",s.target.style.borderColor="#6c757d"},onMouseLeave:s=>{s.target.style.backgroundColor="#f8f9fa",s.target.style.borderColor="#dee2e6"},children:e.jsxs("div",{children:[e.jsx("i",{className:"mdi mdi-cloud-upload fs-3 text-muted mb-2 d-block"}),e.jsx("span",{className:"text-muted",children:"Arrastra y suelta imágenes aquí o haz clic para seleccionar"}),e.jsx("small",{className:"d-block text-muted mt-1",children:"Formatos soportados: JPG, PNG, GIF"})]})}),w.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"text-muted mb-2 d-block",children:[w.filter(s=>!s.toDelete).length," imagen",w.filter(s=>!s.toDelete).length!==1?"es":""," seleccionada",w.filter(s=>!s.toDelete).length!==1?"s":""]}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:w.filter(s=>!s.toDelete).map((s,t)=>{const l=w.findIndex(r=>r===s);return e.jsxs("div",{className:"position-relative border rounded",style:{width:"100px",height:"100px",overflow:"hidden"},children:[e.jsx("img",{src:`${s.url}`,alt:`preview-${l}`,className:"w-100 h-100",style:{objectFit:"cover"}}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm position-absolute",style:{top:"5px",right:"5px",width:"24px",height:"24px",padding:"0",fontSize:"12px",lineHeight:"1"},onClick:r=>je(r,l),title:"Eliminar imagen",children:"×"})]},l)})})]})]})})]})})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-success border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-download text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Archivos Descargables"}),e.jsx("small",{className:"text-white",children:"Manuales, catálogos y documentos del producto"})]})]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("input",{id:"input-item-downloadables",ref:Y,type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.rar",hidden:!0,onChange:ve}),e.jsx("div",{className:"border border-2 border-dashed rounded p-4 text-center",style:{cursor:"pointer",backgroundColor:"#f8f9fa",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>Y.current.click(),onDrop:ye,onDragOver:ee,onMouseEnter:s=>{s.target.style.backgroundColor="#e9ecef",s.target.style.borderColor="#6c757d"},onMouseLeave:s=>{s.target.style.backgroundColor="#f8f9fa",s.target.style.borderColor="#dee2e6"},children:e.jsxs("div",{children:[e.jsx("i",{className:"mdi mdi-file-upload fs-3 text-muted mb-2 d-block"}),e.jsx("span",{className:"text-muted",children:"Arrastra y suelta archivos aquí o haz clic para seleccionar"}),e.jsx("small",{className:"d-block text-muted mt-1",children:"Formatos soportados: PDF, DOC, XLS, PPT, TXT, ZIP, RAR"}),e.jsxs("small",{className:"d-block text-warning mt-1",children:[e.jsx("i",{className:"mdi mdi-alert-circle me-1"}),"Tamaño máximo por archivo: 10MB"]})]})}),R.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"text-muted mb-2 d-block",children:[R.filter(s=>!s.toDelete).length," archivo",R.filter(s=>!s.toDelete).length!==1?"s":""," seleccionado",R.filter(s=>!s.toDelete).length!==1?"s":""]}),e.jsx("div",{className:"list-group",children:R.filter(s=>!s.toDelete).map((s,t)=>{const l=R.findIndex(r=>r===s);return e.jsxs("div",{className:"list-group-item d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:`mdi ${Re(s.name)} fs-4 text-primary me-3`}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:s.name}),e.jsx("small",{className:"text-muted",children:s.size?we(s.size):"Tamaño desconocido"})]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.url&&!s.file&&e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",title:"Descargar archivo",children:e.jsx("i",{className:"mdi mdi-download"})}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:r=>Ne(r,l),title:"Eliminar archivo",children:e.jsx("i",{className:"mdi mdi-delete"})})]})]},l)})})]})]})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-white border-bottom",children:e.jsxs("h6",{className:"mb-0 text-dark",children:[e.jsx("i",{className:"mdi mdi-text-box me-2 text-muted"}),"Descripción del Producto"]})}),e.jsx("div",{className:"card-body",children:e.jsx($e,{eRef:V,label:"",placeholder:"Escriba una descripción detallada del producto..."})})]})})})]})}),e.jsx(ae,{modalRef:q,title:"Importar Datos",size:"sm",children:e.jsx(Me,{gridRef:h,modalRef:q})})]})};_e((I,x)=>{Te.createRoot(I).render(e.jsx(ze,{...x,title:"Items",children:e.jsx(Ge,{...x})}))});
