import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as l}from"./index-BH53Isel.js";import{I as H}from"./ItemsRest-ByrPg2Go.js";import{S as z}from"./ProductCard-C2H10lUi.js";import"./main-BSEyQEJW.js";import"./BlogCarousel-DpjB9swg.js";/* empty css               */import"./InfiniteCategory-BwYXk1Kq.js";import"./ProductMakita-BrJofSRf.js";import"./ProductNavigation-DM1TRME2.js";import{C as K}from"./HeaderSearch-0RO4RVTU.js";import{i as k}from"./tippy-react.esm-BWiGTO87.js";/* empty css              */import L from"./ProductNavigationSwiper-IYU8CAQt.js";import{e as Q}from"./em-DRiSFGEW.js";import{C as W}from"./circle-check-CPWcvHtC.js";import{C as G}from"./chevron-up-D78jyEhP.js";import{C as J}from"./chevron-down-DS-mdh9v.js";import"./index-yBjzXJbu.js";import"./BasicRest-CtWwZ3Gl.js";import"./index-CMHsc23u.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./eye-CKCH9ORv.js";import"./createLucideIcon-Cy5Ya80P.js";import"./PaymentModal-Bxx5p2o_.js";import"./index-Chjiymov.js";import"./CartItemRow-D9z3pFKU.js";import"./Number2Currency-e57Tgsuk.js";import"./proxy-BTYtmp9V.js";import"./trash-2-DK1wnsDn.js";import"./minus-jyhodMPN.js";import"./plus-Bot15Khs.js";import"./index-CFtDjG4d.js";import"./adjustTextColor-FzLvY4Q1.js";import"./ProductCardColors-DSAI6fcL.js";import"./navigation-CLaRFmip.js";import"./create-element-if-not-defined-BzEE3aGu.js";import"./arrow-left-DT1uGo8v.js";import"./arrow-right-DR00rP9v.js";import"./HtmlContent-FTivcJrM.js";function Os({item:s,data:C,setCart:x,cart:n,textstatic:S,contacts:$}){var b,j,N,v,y,w;const i=new H,[p,u]=l.useState(!1),[c,h]=l.useState({url:s==null?void 0:s.image,type:"main"}),[m,I]=l.useState(1),F=a=>{let r=parseInt(a.target.value,10);(isNaN(r)||r<1)&&(r=1),r>10&&(r=10),I(r)},E=a=>{var r;return((r=$.find(t=>t.correlative===a))==null?void 0:r.description)||""},_=((b=S.find(a=>a.correlative=="detailproduct-relation-title"))==null?void 0:b.title)??"",[R,X]=l.useState(!1),q=a=>{const r=structuredClone(n),t=r.findIndex(o=>o.id==a.id);t==-1?r.push({...a,quantity:m}):r[t].quantity++,x(r),z.fire({title:"Producto agregado",text:`Se agregó ${a.name} al carrito`,icon:"success",showCancelButton:!0,confirmButtonText:"Abrir mini carrito",cancelButtonText:"Seguir comprando",reverseButtons:!0,timer:5e3}).then(o=>{o.isConfirmed&&u(!p)})},[A,B]=l.useState([]),[f,T]=l.useState([]),[g,V]=l.useState([]);n==null||n.find(a=>a.id==(s==null?void 0:s.id)),l.useEffect(()=>{s!=null&&s.id&&(O(s),P(s),M(s),U(s))},[s]);const M=async a=>{try{const r={id:a==null?void 0:a.id};if(console.log(r),!await i.updateViews(r))return}catch{return}},P=async a=>{try{const r={id:a==null?void 0:a.id},t=await i.verifyCombo(r);if(!t)return;const o=t[0].associated_items;B(Object.values(o))}catch{return}},O=async a=>{try{const r={id:a==null?void 0:a.id},t=await i.productsRelations(r);if(!t)return;T(Object.values(t))}catch{return}},U=async a=>{try{const r={slug:a==null?void 0:a.slug},t=await i.getVariations(r);if(!t)return;V(t.variants)}catch{return}};A.reduce((a,r)=>a+parseFloat(r.final_price),0);const[d,D]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-primary mx-auto py-4 md:py-6 xl:py-8 bg-white",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 md:p-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 xl:gap-20 2xl:gap-32",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx("img",{src:c.type==="main"?`/storage/images/item/${c.url}`:`/storage/images/item/${c.url}`,onError:a=>a.target.src="/api/cover/thumbnail/null",alt:"Product main",className:"w-full h-auto object-contain"})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("button",{onClick:()=>h({url:s==null?void 0:s.image,type:"main"}),className:`w-16 h-16  rounded-lg p-1 border-2 ${c.url===(s==null?void 0:s.image)?"border-primary ":"border-gray-200"}`,children:e.jsx("img",{src:`/storage/images/item/${s==null?void 0:s.image}`,alt:"Main Thumbnail",className:"w-full h-full object-cover",onError:a=>a.target.src="/api/cover/thumbnail/null"})}),s==null?void 0:s.images.map((a,r)=>e.jsx("button",{onClick:()=>h({url:a.url,type:"gallery"}),className:`w-16 h-16 border-2 rounded-lg p-1 ${c.url===a.url?"border-primary":"border-gray-200"}`,children:e.jsx("img",{src:`/storage/images/item/${a.url}`||"/api/cover/thumbnail/null",alt:`Thumbnail ${r+1}`,className:"w-full h-full object-cover",onError:t=>t.target.src="/api/cover/thumbnail/null"})},r))]})]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"font-font-general",children:[(s==null?void 0:s.brand)&&e.jsxs("p",{className:"customtext-neutral-light text-sm 2xl:text-lg",children:["Marca:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:s==null?void 0:s.brand.name})]}),e.jsx("h1",{className:"customtext-neutral-dark text-3xl lg:text-4xl 2xl:text-5xl font-bold mt-2",children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"flex flex-wrap customtext-neutral-light items-center gap-y-2  gap-x-8 text-sm font-font-general",children:[e.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["SKU:"," ",e.jsx("span",{className:"customtext-neutral-dark font-bold",children:s==null?void 0:s.sku})]}),e.jsxs("span",{className:"customtext-neutral-light text-sm 2xl:text-base",children:["Disponibilidad:"," ",e.jsx("span",{className:"customtext-neutral-dark font-bold",children:(s==null?void 0:s.stock)>0?"En stock":"Agotado"})]})]}),e.jsxs("div",{className:"flex flex-col w-full xl:w-1/2 !font-font-general max-w-xl mt-5",children:[e.jsxs("p",{className:"text-sm 2xl:text-base customtext-neutral-light",children:["Precio:"," ",e.jsxs("span",{className:"line-through",children:["S/ ",s==null?void 0:s.price]})]}),e.jsxs("div",{className:"flex flex-row items-center gap-4 relative",children:[e.jsxs("span",{className:"text-[40px] font-bold customtext-neutral-dark",children:["S/ ",s==null?void 0:s.final_price]}),e.jsxs("span",{className:"bg-[#F93232] text-white font-bold px-3 py-2 rounded-xl text-base",children:["-",Number(s==null?void 0:s.discount_percent).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"variants-selector flex flex-col gap-3",children:[e.jsx("h3",{className:"w-full block opacity-85 customtext-neutral-dark text-sm 2xl:text-base",children:"Colores"}),e.jsxs("div",{className:"flex gap-3 items-center justify-start w-full flex-wrap",children:[e.jsx(k,{content:s.color,children:e.jsx("a",{className:`variant-option rounded-full object-fit-cover  ${g.some(a=>a.slug===s.slug)?"":"active p-[2px] border-[1.5px] border-neutral-dark"}`,children:e.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover ",src:`/storage/images/item/${s.texture||s.image}`,onError:a=>a.target.src="/api/cover/thumbnail/null"})})}),g.map(a=>e.jsx(k,{content:a.color,children:e.jsx("a",{href:`/item/${a.slug}`,className:"variant-option  rounded-full object-fit-cover ",children:e.jsx("img",{className:"color-box rounded-full h-9 w-9 object-fit-cover ",src:`/storage/images/item/${a.texture||a.image}`})},a.slug)}))]})]}),e.jsx("div",{className:"flex flex-col mt-8",children:e.jsx("div",{className:"flex items-center gap-4 mb-2",children:e.jsxs("div",{className:"flex items-center space-x-4 customtext-neutral-light text-sm 2xl:text-base",children:[e.jsx("span",{className:"opacity-85",children:"Cantidad"}),e.jsx("div",{className:"relative flex items-center border rounded-md px-2 py-1",children:e.jsx("input",{type:"number",value:m,onChange:F,min:"1",max:"10",className:"w-10 py-1 customtext-neutral-dark text-center bg-transparent outline-none appearance-none"})})]})})}),e.jsx("div",{className:"flex flex-col",children:e.jsx("button",{onClick:()=>{q(s)},className:"w-full font-font-general text-base 2xl:text-lg bg-primary text-white py-3 font-semibold rounded-3xl hover:opacity-90 transition-all duration-300 mt-3",children:"Agregar al carrito"})}),((j=s==null?void 0:s.specifications)==null?void 0:j.length)>0&&e.jsx("div",{className:"flex-1 w-full",children:e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-lg xl:text-xl 2xl:text-2xl mb-4 customtext-neutral-dark font-font-general",children:"Especificaciones principales"}),e.jsx("ul",{className:`space-y-1  customtext-neutral-light  mb-4 list-disc transition-all duration-300 ${d?"max-h-full":"max-h-20 overflow-hidden"}`,style:{listStyleType:"disc"},children:s==null?void 0:s.specifications.map((a,r)=>a.type==="principal"&&e.jsxs("li",{className:"gap-2 customtext-primary opacity-85 flex flex-row items-center",children:[e.jsx(W,{className:"customtext-primary w-4 h-4"}),a.description]},r))}),e.jsxs("button",{className:"font-semibold flex flex-row gap-2 items-center text-base xl:text-[17px] 2xl:text-xl mb-4 customtext-neutral-dark font-font-general pb-2 border-b border-neutral-dark",onClick:()=>D(!d),children:[d?"Ver menos":"Ver más especificaciones",d?e.jsx(G,{className:"w-4 h-4"}):e.jsx(J,{className:"w-4 h-4"})]})]})}),e.jsx("div",{className:"w-full mt-5",children:e.jsx("a",{href:`https://api.whatsapp.com/send?phone=${E("phone_whatsapp")}&text=${encodeURIComponent(`Hola, deseo mayor información acerca del producto: ${s==null?void 0:s.name}`)}`,target:"_blank",children:e.jsxs("div",{className:"bg-[#F7F9FB] flex flex-row rounded-xl p-5 gap-3",children:[e.jsx("img",{src:"/assets/img/salafabulosa/whatsapp.png",onError:a=>a.target.src="assets/img/noimage/no_imagen_circular.png",className:"w-12 h-12 object-contain",loading:"lazy"}),e.jsx("div",{className:"customtext-neutral-dark font-font-general text-base  2xl:text-xl font-semibold",children:e.jsxs("p",{children:["¿Tienes dudas sobre este producto? Haz",e.jsx("span",{className:"underline"}),"clic aquí y chatea con nosotros por WhatsApp"]})})]})})})]})]})}),e.jsxs("div",{className:"grid gap-10 lg:gap-20 md:grid-cols-2 bg-white rounded-xl p-4 sm:p-8 font-font-general",children:[((N=s==null?void 0:s.specifications)==null?void 0:N.length)>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Especificaciones"}),e.jsx("div",{className:"space-y-1",children:s.specifications.map((a,r)=>a.type==="general"&&e.jsxs("div",{className:`grid grid-cols-2 gap-4 p-3 ${r%2===0?"bg-[#F7F9FB]":"bg-white"}`,children:[e.jsx("div",{className:"customtext-neutral-light opacity-85",children:a.title}),e.jsx("div",{className:"customtext-neutral-dark",children:a.description})]},r))})]}),e.jsxs("div",{className:"font-font-general",children:[((v=s==null?void 0:s.description)==null?void 0:v.replace(/<[^>]+>/g,""))&&e.jsx("h2",{className:"text-2xl font-bold customtext-neutral-dark mb-4 border-b pb-3",children:"Información adicional"}),e.jsxs("div",{className:`space-y-2 ${R?"":"max-h-none overflow-hidden"}`,children:[((y=s==null?void 0:s.description)==null?void 0:y.replace(/<[^>]+>/g,""))&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold customtext-neutral-dark mb-4",children:"Acerca de este artículo"}),e.jsx("div",{className:"customtext-neutral-dark",dangerouslySetInnerHTML:{__html:s==null?void 0:s.description}})]}),((w=s==null?void 0:s.features)==null?void 0:w.length)>0&&e.jsx("div",{className:"pl-10",children:e.jsx("ul",{className:"list-disc pl-5 space-y-2",children:s==null?void 0:s.features.map((a,r)=>e.jsx("li",{className:"customtext-neutral-dark",children:a.feature},r))})})]})]})]})]}),f.length>0&&e.jsx("div",{className:"-mt-10 mb-10 p-4",children:e.jsx(L,{data:{title:Q(_),link_catalog:"/catalogo"},items:f,cart:n,setCart:x})}),e.jsx(K,{cart:n,data:C,setCart:x,modalOpen:p,setModalOpen:u})]})}export{Os as default};
