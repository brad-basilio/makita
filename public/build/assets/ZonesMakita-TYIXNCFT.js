import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as a}from"./index-BH53Isel.js";import{G as z}from"./Global-ErywZRdd.js";import{C as V}from"./chevron-up-D78jyEhP.js";import{C as G}from"./chevron-down-DS-mdh9v.js";import{S as Z}from"./search-TwiiKGP5.js";import{M as B,C as ee}from"./map-pin-B8H2hd1R.js";import{P as se}from"./phone-BZ94M50k.js";import{M as te}from"./mail-g7FoGJuB.js";import"./index-yBjzXJbu.js";import"./createLucideIcon-Cy5Ya80P.js";const ue=({items:x=[]})=>{console.log("ZonesMakita items:",x),console.log("GMAPS_API_KEY from Global:",z.get("GMAPS_API_KEY"));const[w,T]=a.useState(!0),[k,F]=a.useState(!0),[d,f]=a.useState([]),[m,b]=a.useState([]),[C,W]=a.useState(""),[S,R]=a.useState(""),[le,N]=a.useState(null),[g,K]=a.useState(null),[E,I]=a.useState([]),r=a.useMemo(()=>x.filter(e=>e.type==="distributor"&&e.visible&&e.status),[x]),c=a.useMemo(()=>x.filter(e=>e.type==="service_network"&&e.visible&&e.status),[x]),U=a.useMemo(()=>r.filter(e=>e.name.toLowerCase().includes(C.toLowerCase())),[r,C]),Y=a.useMemo(()=>c.filter(e=>e.name.toLowerCase().includes(S.toLowerCase())),[c,S]);a.useEffect(()=>{console.log("Initializing selections with distributors:",r.length,"services:",c.length),f(r.map(e=>e.id)),b(c.map(e=>e.id)),r.length>0?(console.log("Setting default detail to:",r[0].name),N(r[0])):c.length>0&&(console.log("Setting default detail to service:",c[0].name),N(c[0]))},[x]),a.useEffect(()=>{if(typeof google>"u"){const e=z.get("GMAPS_API_KEY");if(console.log("Loading Google Maps with API key:",e?"Key found":"No key found"),!e){console.error("GMAPS_API_KEY not found in Global configuration");return}const t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{console.log("Google Maps loaded successfully"),document.getElementById("map")&&P()},t.onerror=()=>{console.error("Failed to load Google Maps")},document.head.appendChild(t)}else console.log("Google Maps already loaded"),document.getElementById("map")&&P()},[]),a.useEffect(()=>{typeof google<"u"&&google.maps&&document.getElementById("map")&&g&&(console.log("Updating map with selections:",{distributors:d.length,services:m.length}),A(g))},[d,m,g]);const P=()=>{const e=document.getElementById("map");if(!e){console.error("Map element not found");return}console.log("Initializing Google Maps...");const t={lat:-12.0464,lng:-77.0428},l=new google.maps.Map(e,{zoom:11,center:t,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0});console.log("Map created successfully"),K(l),setTimeout(()=>{A(l)},100)},A=a.useCallback(e=>{console.log("Adding markers to map..."),E.forEach(o=>o.setMap(null));const t=[],l=[...r.filter(o=>d.includes(o.id)),...c.filter(o=>m.includes(o.id))];if(console.log("Selected items for map:",l.length),l.forEach((o,n)=>{if(o.location){const i=o.location.split(",");if(i.length>=2){const j=parseFloat(i[0].trim()),p=parseFloat(i[1].trim());if(!isNaN(j)&&!isNaN(p)){console.log(`Adding marker for ${o.name} at ${j}, ${p}`);const h=new google.maps.Marker({position:{lat:j,lng:p},map:e,title:o.name,icon:_(o.type,!0)}),v=new google.maps.InfoWindow({content:`
                <div style="padding: 8px; max-width: 250px;">
                  <h3 style="margin: 0 0 8px 0; font-weight: bold;">${o.name}</h3>
                  <p style="margin: 0 0 4px 0; color: #666; font-size: 14px;">${o.address}</p>
                  <p style="margin: 0; color: #3B82F6; font-size: 12px;">${o.type==="distributor"?"Distribuidor":"Red de Servicio"}</p>
                </div>
              `});h.addListener("click",()=>{t.forEach(u=>{u.infoWindow&&u.infoWindow.close()}),v.open(e,h),N(o)}),h.infoWindow=v,t.push(h)}}}o.branches&&Array.isArray(o.branches)&&o.branches.forEach((i,j)=>{if(i.location){const p=i.location.split(",");if(p.length>=2){const h=parseFloat(p[0].trim()),v=parseFloat(p[1].trim());if(!isNaN(h)&&!isNaN(v)){console.log(`Adding branch marker for ${i.name} at ${h}, ${v}`);const u=new google.maps.Marker({position:{lat:h,lng:v},map:e,title:`${o.name} - ${i.name}`,icon:_(o.type,!1)}),L=new google.maps.InfoWindow({content:`
                    <div style="padding: 8px; max-width: 250px;">
                      <h3 style="margin: 0 0 4px 0; font-weight: bold;">${i.name}</h3>
                      <p style="margin: 0 0 4px 0; color: #666; font-size: 12px;">${o.name}</p>
                      <p style="margin: 0 0 4px 0; color: #666; font-size: 14px;">${i.address}</p>
                      <p style="margin: 0; color: #10B981; font-size: 12px;">Sucursal</p>
                    </div>
                  `});u.addListener("click",()=>{t.forEach(H=>{H.infoWindow&&H.infoWindow.close()}),L.open(e,u),N(o)}),u.infoWindow=L,t.push(u)}}}})}),I(t),t.length>0){const o=new google.maps.LatLngBounds;t.forEach(n=>o.extend(n.getPosition())),e.fitBounds(o),t.length===1&&setTimeout(()=>e.setZoom(15),100)}else e.setZoom(6)},[E,r,c,d,m,I]),D=a.useCallback(e=>{if(console.log("Item selected:",e.name,e.type),N(e),e.type==="distributor"?d.includes(e.id)||(console.log("Adding distributor to selection for map visibility"),f(t=>[...t,e.id])):e.type==="service_network"&&(m.includes(e.id)||(console.log("Adding service to selection for map visibility"),b(t=>[...t,e.id]))),g&&e.location){const t=e.location.split(",");if(t.length>=2){const l=parseFloat(t[0].trim()),o=parseFloat(t[1].trim());!isNaN(l)&&!isNaN(o)&&(g.setCenter({lat:l,lng:o}),g.setZoom(15),console.log(`Map centered on ${e.name} at ${l}, ${o}`))}}setTimeout(()=>{const t=document.getElementById(`detail-${e.id}`);t&&(t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("ring-2","ring-blue-300"),setTimeout(()=>{t.classList.remove("ring-2","ring-blue-300")},2e3))},100)},[d,m,g]),q=a.useCallback((e,t)=>{console.log("Distributor change:",e,t),f(t?l=>[...l,e]:l=>l.filter(o=>o!==e))},[]),O=a.useCallback((e,t)=>{console.log("Service change:",e,t),b(t?l=>[...l,e]:l=>l.filter(o=>o!==e))},[]),J=a.useCallback(e=>{console.log("Select all distributors:",e),f(e?r.map(t=>t.id):[])},[r]),Q=a.useCallback(e=>{console.log("Select all services:",e),b(e?c.map(t=>t.id):[])},[c]),$=a.useCallback(e=>e?e.split(",").map(t=>t.trim()).filter(t=>t):[],[]),M=a.useCallback(e=>e?e.split(",").map(t=>t.trim()).filter(t=>t):[],[]),X=a.useCallback(e=>e?e.split(",").map(t=>t.trim()).filter(t=>t):[],[]),y=a.useMemo(()=>{const e=r.filter(l=>d.includes(l.id)),t=c.filter(l=>m.includes(l.id));return[...e,...t]},[r,c,d,m]),_=a.useCallback((e,t=!0)=>{const l=t?32:24,o=`
      <g transform="translate(${l/2-6}, ${l/2-8})">
        <path fill="white" stroke="none" 
              d="M6 2 
                 C4 2 2.5 3.5 2.5 5.5 
                 C2.5 7.5 6 12 6 12 
                 S9.5 7.5 9.5 5.5 
                 C9.5 3.5 8 2 6 2 Z 
                 M6 7 
                 C5 7 4.2 6.2 4.2 5.5 
                 C4.2 4.8 5 4 6 4 
                 C7 4 7.8 4.8 7.8 5.5 
                 C7.8 6.2 7 7 6 7 Z"/>
      </g>
    `,n=`
      <svg width="${l}" height="${l}" viewBox="0 0 ${l} ${l}" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="shadow-${e}-${t}" x="-50%" y="-50%" width="200%" height="200%">
            <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="rgba(0,0,0,0.3)"/>
          </filter>
        </defs>
        <!-- Red circle background -->
        <circle cx="${l/2}" cy="${l/2}" r="${l/2-2}" 
                fill="#EA4335" stroke="white" stroke-width="2" 
                filter="url(#shadow-${e}-${t})"/>
        <!-- White pin icon -->
        ${o}
      </svg>
    `;return{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(n),size:new google.maps.Size(l,l),scaledSize:new google.maps.Size(l,l),anchor:new google.maps.Point(l/2,l/2),origin:new google.maps.Point(0,0)}},[]);return a.useCallback((e,t=!0)=>{const o={distributor:{main:"#ff0d0d",stroke:"#1E40AF"},service_network:{main:"#ff0d0d",stroke:"#047857"}}[e],n=t?32:24,i=t?.8:.6,j=`
      <g transform="scale(${i}) translate(${16-16*i}, ${10-10*i})">
        <path fill="white" stroke="none" d="M19 7V4C19 3.45 18.55 3 18 3H6C5.45 3 5 3.45 5 4V7H3V20H21V7H19ZM17 5V7H7V5H17ZM19 18H5V9H19V18ZM7 11H9V16H7V11ZM11 11H13V16H11V11ZM15 11H17V16H15V11Z"/>
      </g>
    `,p=`
      <g transform="scale(${i}) translate(${16-16*i}, ${10-10*i})">
        <path fill="white" stroke="none" d="M22.7,19L13.6,9.9C14.5,7.6 14,4.9 12.1,3C10.1,1 7.1,0.6 4.7,1.7L9,6L6,9L1.6,4.7C0.4,7.1 0.9,10.1 2.9,12.1C4.8,14 7.5,14.5 9.8,13.6L18.9,22.7C19.3,23.1 19.9,23.1 20.3,22.7L22.7,20.3C23.1,19.9 23.1,19.3 22.7,19Z"/>
      </g>
    `,h=`
      <svg width="${n}" height="${n}" viewBox="0 0 32 40" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="pin-shadow-${e}-${t}" x="-50%" y="-50%" width="200%" height="200%">
            <feDropShadow dx="0" dy="3" stdDeviation="3" flood-color="rgba(0,0,0,0.4)"/>
          </filter>
        </defs>
        <!-- Pin shape -->
        <path d="M16 1C9.373 1 4 6.373 4 13c0 8.5 12 25 12 25s12-16.5 12-25c0-6.627-5.373-12-12-12z" 
              fill="${o.main}" 
              stroke="white" 
              stroke-width="2" 
              filter="url(#pin-shadow-${e}-${t})"/>
        
        <!-- Icon container circle -->
        <circle cx="16" cy="13" r="8" fill="white" fill-opacity="0.2"/>
        
        <!-- Icon -->
        ${e==="distributor"?j:p}
      </svg>
    `;return{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(h),size:new google.maps.Size(n,n*1.25),scaledSize:new google.maps.Size(n,n*1.25),anchor:new google.maps.Point(n/2,n*1.25),origin:new google.maps.Point(0,0)}},[]),s.jsx("div",{className:"font-paragraph py-12 customtext-neutral-dark",children:s.jsxs("div",{className:"px-primary mx-auto 2xl:px-0 2xl:max-w-7xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-6xl font-bold mb-4",children:"Encuentra tu Distribuidor y Red de Servicios Makita en Per√∫"}),s.jsx("p",{className:"customtext-neutral-light",children:"Conoce los principales distribuidores y centros de servicio autorizados de Makita en Per√∫. Aqu√≠ encontrar√°s direcciones, tel√©fonos y contactos para adquirir herramientas originales, repuestos y acceder a mantenimiento especializado. ¬°Ubica el m√°s cercano y recibe la mejor atenci√≥n!"})]}),s.jsxs("div",{className:"grid md:grid-cols-12 gap-12",children:[s.jsxs("div",{className:"md:col-span-4 lg:col-span-3",children:[s.jsxs("div",{className:"mb-6  bg-white",children:[s.jsx("div",{className:" cursor-pointer mb-4",children:s.jsx("h2",{className:"font-bold",children:"Lista de Distribuidores y Red de Servicios"})}),s.jsxs("div",{className:"",children:[s.jsxs("h3",{className:"font-bold mb-3 bg-gray-100 flex items-center justify-between p-4",onClick:()=>T(!w),children:["Distribuidores  ",w?s.jsx(V,{size:20}):s.jsx(G,{size:20})]}),w&&s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{type:"text",placeholder:"Buscar nombre",className:"w-full border rounded-lg pl-10 pr-4 py-2 text-sm",value:C,onChange:e=>W(e.target.value)}),s.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 customtext-neutral-light",size:18})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded",checked:d.length===r.length,onChange:e=>J(e.target.checked)}),s.jsx("span",{children:"Todos"})]}),U.map(e=>s.jsx("div",{className:"border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"flex items-start gap-3  rounded",children:[s.jsx("input",{type:"checkbox",className:"rounded mt-1 flex-shrink-0",checked:d.includes(e.id),onChange:t=>q(e.id,t.target.checked)}),s.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>D(e),children:[s.jsx("div",{className:"font-medium  text-sm",children:e.name}),s.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:e.address})]})]})},e.id))]})]})]})]}),s.jsxs("div",{className:"mb-6  bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-100 cursor-pointer",onClick:()=>F(!k),children:[s.jsx("h2",{className:"font-bold",children:"Red de Servicios"}),k?s.jsx(V,{size:20}):s.jsx(G,{size:20})]}),k&&s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{type:"text",placeholder:"Buscar nombre",className:"w-full border rounded-lg pl-10 pr-4 py-2 text-sm",value:S,onChange:e=>R(e.target.value)}),s.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 customtext-neutral-light",size:18})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded",checked:m.length===c.length,onChange:e=>Q(e.target.checked)}),s.jsx("span",{children:"Todos"})]}),Y.map(e=>s.jsx("div",{className:"border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"flex items-start gap-3  hover:bg-gray-50 rounded",children:[s.jsx("input",{type:"checkbox",className:"rounded mt-1 flex-shrink-0",checked:m.includes(e.id),onChange:t=>O(e.id,t.target.checked)}),s.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>D(e),children:[s.jsx("div",{className:"font-medium  text-sm",children:e.name}),s.jsx("div",{className:"text-xs customtext-neutral-light mt-1",children:e.address})]})]})},e.id))]})]})]})]}),s.jsxs("div",{className:"md:col-span-8 lg:col-span-9",children:["            ",s.jsxs("div",{className:"w-full aspect-video bg-gray-200 rounded-lg mb-8 relative overflow-hidden",children:[s.jsx("div",{id:"map",className:"w-full h-full"}),!g&&typeof google>"u"&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2  mx-auto mb-2"}),s.jsx("p",{className:"customtext-neutral-light",children:"Cargando Google Maps..."}),s.jsxs("p",{className:"text-xs customtext-neutral-light mt-1",children:["API Key: ",z.get("GMAPS_API_KEY")?"‚úì Configurada":"‚úó No encontrada"]})]})}),typeof google<"u"&&!g&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2  mx-auto mb-2"}),s.jsx("p",{className:"customtext-neutral-light",children:"Inicializando mapa..."})]})})]}),"            ",y.length>0?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[s.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Informaci√≥n de Puntos Seleccionados (",y.length,")"]}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["Mostrando detalles de ",y.filter(e=>e.type==="distributor").length," distribuidores y ",y.filter(e=>e.type==="service_network").length," servicios t√©cnicos seleccionados."]})]}),"                ",y.map((e,t)=>s.jsxs("div",{id:`detail-${e.id}`,className:"bg-white rounded-lg shadow-sm border p-6 transition-all duration-300",children:[s.jsx("div",{className:"flex items-start gap-3 mb-2",children:s.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.type==="distributor"?"bg-gray-100 customtext-primary":"bg-gray-100 customtext-secondary"}`,children:e.type==="distributor"?"Distribuidor":"Red de Servicio"})}),s.jsx("h2",{className:"font-bold text-xl mb-2",children:e.name}),e.business_name&&s.jsx("h3",{className:"text-2xl customtext-neutral-light mb-4",children:e.business_name}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[s.jsx(B,{className:"customtext-neutral-light mt-1",size:18}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Direcci√≥n"}),s.jsx("p",{className:"customtext-neutral-light",children:e.address})]})]}),$(e.phones).length>0&&s.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[s.jsx(se,{className:"customtext-neutral-light mt-1",size:18}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Tel√©fono"}),$(e.phones).map((l,o)=>s.jsx("p",{className:"customtext-neutral-light",children:l},o))]})]})]}),s.jsxs("div",{children:[M(e.emails).length>0&&s.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[s.jsx(te,{className:"customtext-neutral-light mt-1",size:18}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Correo Electr√≥nico"}),M(e.emails).map((l,o)=>s.jsx("p",{className:"customtext-neutral-light",children:l},o))]})]}),e.opening_hours&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ee,{className:"customtext-neutral-light mt-1",size:18}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-1",children:"Horario de atenci√≥n"}),X(e.opening_hours).map((l,o)=>s.jsx("p",{className:"customtext-neutral-light",children:l},o))]})]})]})]}),e.branches&&e.branches.length>0&&s.jsxs("div",{className:"mt-8 p-6 bg-gray-100 rounded-lg",children:[s.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:["Sucursales (",e.branches.length,")"]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.branches.map((l,o)=>s.jsxs("div",{className:"rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-lg mb-2 customtext-neutral-dark",children:l.name}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-start gap-2",children:s.jsx("p",{className:"customtext-neutral-light text-sm",children:l.address})}),s.jsx("h4",{className:"font-semibold text-sm mb-2 customtext-neutral-dark",children:"Tel√©fonos"}),l.phones&&s.jsx("div",{className:"flex items-start gap-2",children:s.jsx("div",{children:$(l.phones).map((n,i)=>s.jsx("p",{className:"customtext-neutral-light text-sm",children:n},i))})}),s.jsx("h4",{className:"font-semibold text-sm mb-2 customtext-neutral-dark",children:"Correo Electr√≥nico"}),l.emails&&s.jsx("div",{className:"flex items-start gap-2",children:s.jsx("div",{children:M(l.emails).map((n,i)=>s.jsx("p",{className:"customtext-neutral-light text-sm",children:n},i))})}),s.jsx("h4",{className:"font-semibold text-sm mb-2 customtext-neutral-dark",children:"Horario de atenci√≥n"}),l.opening_hours&&s.jsx("div",{className:"flex items-start gap-2",children:s.jsx("p",{className:"customtext-neutral-light text-sm",children:l.opening_hours})})]})]},o))})]})]},e.id))]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border text-center",children:[s.jsx(B,{className:"mx-auto mb-4 customtext-neutral-light",size:48}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No hay puntos seleccionados"}),s.jsx("p",{className:"customtext-neutral-light mb-4",children:"Marca los checkboxes en el panel izquierdo para ver los detalles de distribuidores y servicios t√©cnicos."}),s.jsx("div",{className:"text-sm text-gray-500",children:"üí° Tambi√©n puedes hacer clic en los marcadores del mapa para obtener informaci√≥n r√°pida."})]})]})]})]})})};export{ue as default};
