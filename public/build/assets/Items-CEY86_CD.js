import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{B as xe}from"./Base-DXuBbZN7.js";import{S as P}from"./SwitchFormGroup-CGYpv_4Q.js";import{T as fe}from"./TextareaFormGroup-DVzYJtLM.js";import{r as i}from"./index-BH53Isel.js";import{c as ge}from"./ReactAppend-DTVVXReZ.js";import{s as J}from"./server.browser-Bf4gQIc7.js";import{S as be}from"./ProductCard-Ap6bpF1Q.js";import{I as Z}from"./ItemsRest-BBkeaO-v.js";import{M as Q}from"./Modal-CIqmjseY.js";import{T as je}from"./Table-DitbKwtZ.js";import{I as ve}from"./ImageFormGroup-BPR9pDAU.js";import{I as U}from"./InputFormGroup-D5I6zpZc.js";import{Q as ye}from"./QuillFormGroup-D8zDHSfJ.js";import{S as T}from"./SelectAPIFormGroup-BYWbn4kr.js";import{S as Ne}from"./SelectFormGroup-YqB1XVb8.js";import{D as K}from"./DxButton-DV0H-ZcL.js";import{C as we}from"./CreateReactScript-BoGwggCx.js";import{N as X}from"./Number2Currency-e57Tgsuk.js";import{R as G}from"./ReactAppend-D7S498fx.js";import{S as k}from"./SetSelectValue-UxyCmHse.js";import"./main-BvVILmTO.js";import"./index-CMHsc23u.js";import"./index-yBjzXJbu.js";import"./Global-ErywZRdd.js";import"./tippy-react.esm-BWiGTO87.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";/* empty css              */import"./Logout-7s5dsuEK.js";import"./MenuItemContainer-C_dOKkRB.js";import"./index.esm-DAJ8Pwbk.js";import"./index-xsH4HHeE.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./BasicRest-B3rfI5GY.js";/* empty css               */import"./General-BmbBKdsB.js";import"./LaravelSession-Dz9cpV3l.js";const Y=({label:D,structure:x,value:R=[],onChange:v,typeOptions:I=[]})=>{const[d,b]=i.useState([]),j=i.useRef(!0);i.useEffect(()=>{if(j.current){const c=R.map(o=>{var m,n;return{...o,type:((m=o.type)==null?void 0:m.charAt(0).toUpperCase())+((n=o.type)==null?void 0:n.slice(1).toLowerCase())}});b(c),j.current=!1}else if(JSON.stringify(R)!==JSON.stringify(d)){const c=R.map(o=>{var m,n;return{...o,type:((m=o.type)==null?void 0:m.charAt(0).toUpperCase())+((n=o.type)==null?void 0:n.slice(1).toLowerCase())}});b(c)}},[R]);const C=()=>{const c=[...d,{...x}];b(c),v([...d,x])},y=c=>{const o=d.filter((m,n)=>n!==c);b(o),v(o)},f=(c,o,m)=>{const n=[...d];n[c][o]=o==="type"?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():m,b(n),v(n)};return e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:D}),d.map((c,o)=>{d.length%2!==0&&d.length-1;const m=x.hasOwnProperty("description")&&Object.keys(x).length===1,n=x.hasOwnProperty("title")&&x.hasOwnProperty("description")&&x.hasOwnProperty("tooltip");return e.jsx("div",{className:"mb-3 p-3 border rounded position-relative",style:{backgroundColor:"#ffffff",border:"1px solid #dee2e6"},children:e.jsxs("div",{className:"row",children:[typeof c=="object"?e.jsx("div",{className:"col-12",children:m?e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Descripción"}),e.jsx("textarea",{className:"form-control",value:c.description||"",onChange:a=>f(o,"description",a.target.value),placeholder:"Ingrese la descripción general",rows:4,style:{minHeight:"120px",maxHeight:"200px",resize:"vertical"}})]}):n?e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Título"}),e.jsx("textarea",{className:"form-control",value:c.title||"",onChange:a=>f(o,"title",a.target.value),placeholder:"Título de la especificación",rows:2,style:{minHeight:"60px",maxHeight:"100px",resize:"vertical"}})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Descripción"}),e.jsx("textarea",{className:"form-control",value:c.description||"",onChange:a=>f(o,"description",a.target.value),placeholder:"Descripción técnica detallada",rows:3,style:{minHeight:"80px",maxHeight:"150px",resize:"vertical"}})]}),e.jsxs("div",{className:"col-12 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Tooltip (información adicional)"}),e.jsx("input",{type:"text",className:"form-control",value:c.tooltip||"",onChange:a=>f(o,"tooltip",a.target.value),placeholder:"Información adicional que aparecerá en tooltip"})]})]}):e.jsx("div",{className:"row",children:Object.keys(x).map(a=>e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:a==="type"?"Tipo":a.charAt(0).toUpperCase()+a.slice(1)}),a==="type"?e.jsxs("select",{className:"form-select",value:c[a]||"",onChange:g=>f(o,a,g.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar tipo"}),I.map(g=>e.jsx("option",{value:g,children:g},g))]}):e.jsx("textarea",{className:"form-control",value:c[a]||"",onChange:g=>f(o,a,g.target.value),placeholder:`Ingrese ${a.charAt(0).toUpperCase()+a.slice(1)}`,rows:4,style:{minHeight:"120px",maxHeight:"200px",resize:"vertical"}})]},a))})}):e.jsxs("div",{className:"col-12 mb-2",children:[e.jsx("label",{className:"form-label text-muted mb-1",style:{fontSize:"0.85rem",fontWeight:"500"},children:"Característica"}),e.jsx("textarea",{className:"form-control",value:c,onChange:a=>f(o,null,a.target.value),placeholder:"Describe la característica del producto",rows:4,style:{minHeight:"120px",maxHeight:"200px",resize:"vertical"}})]}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm rounded-circle position-absolute",style:{top:"8px",right:"8px",width:"28px",height:"28px",padding:"0",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},onClick:()=>y(o),title:"Eliminar campo",children:e.jsx("i",{className:"mdi mdi-close",style:{fontSize:"14px",color:"white"}})})]})},o)}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("button",{type:"button",className:"btn btn-primary px-4 py-2",onClick:C,children:[e.jsx("i",{className:"mdi mdi-plus me-2"}),"Agregar"]})})]})},Re=new Z,Se=({gridRef:D,modalRef:x})=>{const[R,v]=i.useState(null),[I,d]=i.useState(!1),[b,j]=i.useState(""),[C,y]=i.useState(!1),f=o=>{v(o.target.files[0])},c=async()=>{var m,n;if(!R){j("Por favor, selecciona un archivo."),y(!0);return}const o=new FormData;o.append("file",R),d(!0);try{const a=await Re.importData(o);if(console.log(a),a.error){const g=Array.isArray(a.error)?a.error.join(`
`):a.error;j(`Error en la importación:
${g}`),y(!0)}else j(a.message),y(!1),$(D.current).dxDataGrid("instance").refresh(),x.current&&x.current.close()}catch(a){j("Error al importar: "+(((n=(m=a.response)==null?void 0:m.data)==null?void 0:n.error)||a.message)),y(!0)}d(!1)};return e.jsx("div",{className:"bg-white",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"mb-1",children:e.jsx("a",{href:"/assets/img/salafabulosa/formato_import_products.xlsx",download:!0,children:"Descargar formato .xlsx"})}),e.jsx("div",{children:e.jsx("input",{className:"form-control",type:"file",accept:".xlsx",onChange:f})}),e.jsx("button",{onClick:c,disabled:I,className:"btn btn-primary mt-2",type:"button",children:I?"Subiendo...":"Subir Archivo"}),b&&e.jsx("div",{className:`alert ${C?"alert-danger":"alert-success"} mt-2`,role:"alert",children:e.jsx("div",{className:"alert-message",children:b})})]})})},A=new Z,De=({categories:D,brands:x,collections:R})=>{//!FALTA EDIT AND DELETEDE GALERIA
const[v,I]=i.useState([]),d=i.useRef(),b=i.useRef(),j=i.useRef(),C=i.useRef(),y=i.useRef(),f=i.useRef(),c=i.useRef(),o=i.useRef(),m=i.useRef(),n=i.useRef(),a=i.useRef(),g=i.useRef(),z=i.useRef(),B=i.useRef();i.useRef();const M=i.useRef(),H=i.useRef();i.useRef([]);const ee=i.useRef([]),[se,V]=i.useState(!1),[re,te]=i.useState(null),[le,ie]=i.useState(null),[N,S]=i.useState([]),q=i.useRef(),ae=s=>{const t=Array.from(s.target.files).map(l=>({file:l,url:URL.createObjectURL(l)}));S(l=>[...l,...t])},oe=s=>{s.preventDefault();const t=Array.from(s.dataTransfer.files).map(l=>({file:l,url:URL.createObjectURL(l)}));S(l=>[...l,...t])},ce=s=>{s.preventDefault()},ne=(s,r)=>{s.preventDefault(),N[r].id?S(l=>l.map((u,h)=>h===r?{...u,toDelete:!0}:u)):S(l=>l.filter((u,h)=>h!==r))};i.useEffect(()=>{if(v&&v.images){const s=v.images.map(r=>({id:r.id,url:`/storage/images/item/${r.url}`}));S(s)}},[v]);const W=s=>{var r,t,l,u;if(console.log("data total",s),I(s||null),s!=null&&s.id?V(!0):V(!1),j.current.value=(s==null?void 0:s.id)||"",$(C.current).val((s==null?void 0:s.category_id)||null).trigger("change"),k(y.current,(r=s==null?void 0:s.family)==null?void 0:r.id,(t=s==null?void 0:s.family)==null?void 0:t.name),k(f.current,(l=s==null?void 0:s.platform)==null?void 0:l.id,(u=s==null?void 0:s.platform)==null?void 0:u.name),k(c.current,(s==null?void 0:s.applications)??[],"id","name"),k(o.current,(s==null?void 0:s.symbologies)??[],"id","name"),m.current.value=(s==null?void 0:s.name)||"",n.current.value=(s==null?void 0:s.summary)||"",a.current.value=(s==null?void 0:s.price)||0,g.current.value=(s==null?void 0:s.discount)||0,k(z.current,(s==null?void 0:s.tags)??[],"id","name"),B.current.value=null,B.image.src=`/storage/images/item/${(s==null?void 0:s.image)??"undefined"}`,M.editor.root.innerHTML=(s==null?void 0:s.description)??"",s!=null&&s.images){const h=s.images.map(w=>({id:w.id,url:`/api/items/gallery/media/${w.url}`}));S(h)}else S([]);s!=null&&s.specifications?O(s.specifications.map(h=>({type:h.type,title:h.title,description:h.description,tooltip:h.tooltip}))):O([]),H.current.value=s==null?void 0:s.stock,$(b.current).modal("show")},de=async s=>{s.preventDefault();const r={id:j.current.value||void 0,category_id:C.current.value,family_id:y.current.value,platform_id:f.current.value,name:m.current.value,summary:n.current.value,price:a.current.value,discount:g.current.value,tags:$(z.current).val(),applications:$(c.current).val(),symbologies:$(o.current).val(),description:M.current.value,stock:H.current.value,specifications:JSON.stringify(F)},t=new FormData;for(const p in r)t.append(p,r[p]);t.append("features",JSON.stringify(he)),t.append("specifications",JSON.stringify(F));const l=B.current.files[0];l&&t.append("image",l);let u=0;const h=[];console.log("DEBUG - Estado de gallery antes de procesar:",N),N.forEach((p,E)=>{console.log(`DEBUG - Procesando imagen ${E}:`,p),p.toDelete?console.log(`DEBUG - Imagen marcada para eliminar: ${p.id}`):p.file?(t.append(`gallery[${u}]`,p.file),console.log(`DEBUG - Agregando imagen nueva en índice ${u}`),u++):(h.push(p.id),console.log(`DEBUG - Agregando ID existente: ${p.id}`))}),console.log("DEBUG - galleryIds finales:",h),h.length>0&&h.forEach((p,E)=>{t.append(`gallery_ids[${E}]`,p),console.log(`DEBUG - Agregando gallery_ids[${E}] = ${p}`)});const w=N.filter(p=>p.toDelete).map(p=>p.id);console.log("DEBUG - deletedImages:",w),w.length>0&&(t.append("deleted_images",JSON.stringify(w)),console.log("DEBUG - deleted_images JSON:",JSON.stringify(w))),console.log("DEBUG - FormData completo:",t);for(let[p,E]of t.entries())console.log(`DEBUG - FormData[${p}]:`,E);await A.save(t)&&($(d.current).dxDataGrid("instance").refresh(),$(b.current).modal("hide"),S([]))},me=async({id:s,value:r})=>{await A.boolean({id:s,field:"visible",value:r})&&$(d.current).dxDataGrid("instance").refresh()},_=async({id:s,field:r,value:t})=>{await A.boolean({id:s,field:r,value:t})&&$(d.current).dxDataGrid("instance").refresh()},pe=async s=>{const{isConfirmed:r}=await be.fire({title:"Eliminar curso",text:"¿Estás seguro de eliminar este curso?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"});!r||!await A.delete(s)||$(d.current).dxDataGrid("instance").refresh()},[he,Ce]=i.useState([]),[F,O]=i.useState([]),[Ie,Fe]=i.useState(!1),L=i.useRef(),ue=()=>{$(L.current).modal("show")};return e.jsxs(e.Fragment,{children:[e.jsx(je,{gridRef:d,title:"Items",rest:A,toolBar:s=>{s.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"Refrescar tabla",onClick:()=>$(d.current).dxDataGrid("instance").refresh()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"plus",text:"Agregar",hint:"Agregar",onClick:()=>W()}}),s.unshift({widget:"dxButton",location:"after",options:{icon:"upload",text:"Importar Datos",hint:"Importar Datos",onClick:()=>ue()}})},exportable:!0,exportableName:"Items",columns:[{dataField:"id",caption:"ID",visible:!1},{dataField:"category.name",caption:"Categoría",width:"120px",cellTemplate:(s,{data:r})=>{var t,l,u;s.html(J.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"d-block fst-italic text-muted",children:(t=r.collection)==null?void 0:t.name}),e.jsx("b",{className:"d-block",children:(l=r.category)==null?void 0:l.name}),e.jsx("small",{className:"text-muted",children:(u=r.subcategory)==null?void 0:u.name})]})))}},{dataField:"subcategory.name",caption:"Subcategoría",visible:!1},{dataField:"brand.name",caption:"Marca",width:"120px"},{dataField:"name",caption:"Nombre",minWidth:"300px",cellTemplate:(s,{data:r})=>{const l=((u,h)=>{if(!u)return"";const w=u.split(" ");return w.length>h?w.slice(0,h).join(" ")+"...":u})(r.summary,12);s.html(J.renderToString(e.jsxs(e.Fragment,{children:[e.jsx("b",{children:r.name}),e.jsx("br",{}),e.jsx("span",{children:l})]})))}},{dataField:"final_price",caption:"Precio",dataType:"number",width:"75px",cellTemplate:(s,{data:r})=>{s.html(J.renderToString(e.jsxs(e.Fragment,{children:[r.discount>0&&e.jsxs("small",{className:"d-block text-muted",style:{textDecoration:"line-through"},children:["S/.",X(r.price)]}),e.jsxs("span",{children:["S/.",X(r.discount>0?r.discount:r.price)]})]})))}},{dataField:"image",caption:"Imagen",width:"90px",allowFiltering:!1,cellTemplate:(s,{data:r})=>{G(s,e.jsx("img",{src:`/storage/images/item/${r.image}`,style:{width:"80px",height:"48px",objectFit:"cover",objectPosition:"center",borderRadius:"4px"},onError:t=>t.target.src="/api/cover/thumbnail/null"}))}},{dataField:"is_new",caption:"Nuevo",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const t=r.is_new===1||r.is_new==="1"||r.is_new===!0;G(s,e.jsx(P,{checked:t,onChange:l=>_({id:r.id,field:"is_new",value:l.target.checked?1:0})}))}},{dataField:"offering",caption:"En oferta",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const t=r.offering===1||r.offering==="1"||r.offering===!0;G(s,e.jsx(P,{checked:t,onChange:l=>_({id:r.id,field:"offering",value:l.target.checked?1:0})}))}},{dataField:"recommended",caption:"Recomendado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const t=r.recommended===1||r.recommended==="1"||r.recommended===!0;G(s,e.jsx(P,{checked:t,onChange:l=>_({id:r.id,field:"recommended",value:l.target.checked?1:0})}))}},{dataField:"featured",caption:"Destacado",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{const t=r.featured===1||r.featured==="1"||r.featured===!0;G(s,e.jsx(P,{checked:t,onChange:l=>_({id:r.id,field:"featured",value:l.target.checked?1:0})}))}},{dataField:"visible",caption:"Visible",dataType:"boolean",width:"80px",cellTemplate:(s,{data:r})=>{G(s,e.jsx(P,{checked:r.visible,onChange:t=>me({id:r.id,value:t.target.checked})}))}},{caption:"Acciones",width:"100px",cellTemplate:(s,{data:r})=>{s.css("text-overflow","unset"),s.append(K({className:"btn btn-xs btn-soft-primary",title:"Editar",icon:"fa fa-pen",onClick:()=>W(r)})),s.append(K({className:"btn btn-xs btn-soft-danger",title:"Eliminar",icon:"fa fa-trash",onClick:()=>pe(r.id)}))},allowFiltering:!1,allowExporting:!1}]}),e.jsx(Q,{modalRef:b,title:se?"Editar Producto":"Agregar Producto",onSubmit:de,size:"xl",children:e.jsxs("div",{className:"container-fluid",id:"principal-container",children:[e.jsx("input",{ref:j,type:"hidden"}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-information-outline text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Información Principal"}),e.jsx("small",{className:"text-white",children:"Datos básicos del producto"})]})]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(U,{eRef:m,label:"Nombre del Producto",required:!0,placeholder:"Ingrese el nombre del producto"})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx(fe,{eRef:n,label:"Resumen del Producto",rows:3,placeholder:"Descripción breve del producto"})})})]})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-tag-multiple text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Clasificación y Organización"}),e.jsx("small",{className:"text-white",children:"Categorías, familias y etiquetas"})]})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs(Ne,{eRef:C,label:"Categoría",required:!0,dropdownParent:"#principal-container",onChange:s=>te(s.target.value),children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),D.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))]})}),e.jsx("div",{className:"col-md-6",children:e.jsx(T,{eRef:y,label:"Familia",searchAPI:"/api/admin/families/paginate",searchBy:"name",filter:["category_id","=",re],dropdownParent:"#principal-container",onChange:s=>ie(s.target.value)})}),e.jsx("div",{className:"col-md-6",children:e.jsx(T,{eRef:f,label:"Plataforma",searchAPI:"/api/admin/platforms/paginate",searchBy:"name",filter:["family_id","=",le],dropdownParent:"#principal-container"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(T,{id:"applications",eRef:c,searchAPI:"/api/admin/applications/paginate",searchBy:"name",label:"Aplicaciones",dropdownParent:"#principal-container",tags:!0,multiple:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(T,{id:"symbologies",eRef:o,searchAPI:"/api/admin/symbologies/paginate",searchBy:"name",label:"Simbologías",dropdownParent:"#principal-container",tags:!0,multiple:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(T,{id:"tags",eRef:z,searchAPI:"/api/admin/tags/paginate",searchBy:"name",label:"Etiquetas",dropdownParent:"#principal-container",tags:!0,multiple:!0})})]})})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-currency-usd text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Información de Precios"}),e.jsx("small",{className:"text-white",children:"Precios y stock disponible"})]})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(U,{eRef:a,label:"Precio Regular (S/.)",type:"number",step:"0.01",min:"0",required:!0,placeholder:"0.00"})}),e.jsxs("div",{className:"col-md-4",children:[e.jsx(U,{eRef:g,label:"Precio con Descuento (S/.)",type:"number",step:"0.01",min:"0",placeholder:"0.00"}),e.jsx("small",{className:"text-muted",children:"Dejar vacío si no hay descuento"})]}),e.jsx("div",{className:"col-md-4",children:e.jsx(U,{label:"Stock Disponible",eRef:H,type:"number",min:"0",placeholder:"0"})})]})})]})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"8px"},children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-format-list-bulleted text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Especificaciones Generales"}),e.jsx("small",{className:"text-white",children:"Características principales del producto"})]})]})}),e.jsx("div",{className:"card-body",style:{padding:"20px"},children:e.jsx(Y,{ref:ee,label:"",structure:{description:""},value:F.filter(s=>s.type==="general"),onChange:s=>{const r=F.filter(l=>l.type==="technical"),t=[...s.map(l=>({...l,type:"general"})),...r];O(t)},placeholder:"Descripción general del producto"})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",style:{borderRadius:"8px"},children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-cog text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Especificaciones Técnicas"}),e.jsx("small",{className:"text-white",children:"Detalles técnicos y funcionales"})]})]})}),e.jsx("div",{className:"card-body",style:{padding:"20px"},children:e.jsx(Y,{label:"",structure:{title:"",description:"",tooltip:""},value:F.filter(s=>s.type==="technical"),onChange:s=>{const t=[...F.filter(l=>l.type==="general"),...s.map(l=>({...l,type:"technical"}))];O(t)},placeholder:"Especificaciones técnicas del producto"})})]})})]}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary border-bottom-0",style:{padding:"15px 20px"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"mdi mdi-image-multiple text-white fs-5 me-3"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0 text-white fw-semibold",children:"Imágenes y Multimedia"}),e.jsx("small",{className:"text-white",children:"Galería de imágenes del producto"})]})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"row",children:e.jsx(ve,{eRef:B,label:"Imagen Principal",aspect:1})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h6",{className:"mb-2",children:"Galería de Imágenes"}),e.jsx("input",{id:"input-item-gallery",ref:q,type:"file",multiple:!0,accept:"image/*",hidden:!0,onChange:ae}),e.jsx("div",{className:"border border-2 border-dashed rounded p-4 text-center",style:{cursor:"pointer",backgroundColor:"#f8f9fa",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onClick:()=>q.current.click(),onDrop:oe,onDragOver:ce,onMouseEnter:s=>{s.target.style.backgroundColor="#e9ecef",s.target.style.borderColor="#6c757d"},onMouseLeave:s=>{s.target.style.backgroundColor="#f8f9fa",s.target.style.borderColor="#dee2e6"},children:e.jsxs("div",{children:[e.jsx("i",{className:"mdi mdi-cloud-upload fs-3 text-muted mb-2 d-block"}),e.jsx("span",{className:"text-muted",children:"Arrastra y suelta imágenes aquí o haz clic para seleccionar"}),e.jsx("small",{className:"d-block text-muted mt-1",children:"Formatos soportados: JPG, PNG, GIF"})]})}),N.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"text-muted mb-2 d-block",children:[N.filter(s=>!s.toDelete).length," imagen",N.filter(s=>!s.toDelete).length!==1?"es":""," seleccionada",N.filter(s=>!s.toDelete).length!==1?"s":""]}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:N.filter(s=>!s.toDelete).map((s,r)=>{const t=N.findIndex(l=>l===s);return e.jsxs("div",{className:"position-relative border rounded",style:{width:"100px",height:"100px",overflow:"hidden"},children:[e.jsx("img",{src:`${s.url}`,alt:`preview-${t}`,className:"w-100 h-100",style:{objectFit:"cover"}}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm position-absolute",style:{top:"5px",right:"5px",width:"24px",height:"24px",padding:"0",fontSize:"12px",lineHeight:"1"},onClick:l=>ne(l,t),title:"Eliminar imagen",children:"×"})]},t)})})]})]})})]})})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-white border-bottom",children:e.jsxs("h6",{className:"mb-0 text-dark",children:[e.jsx("i",{className:"mdi mdi-text-box me-2 text-muted"}),"Descripción del Producto"]})}),e.jsx("div",{className:"card-body",children:e.jsx(ye,{eRef:M,label:"",placeholder:"Escriba una descripción detallada del producto..."})})]})})})]})}),e.jsx(Q,{modalRef:L,title:"Importar Datos",size:"sm",children:e.jsx(Se,{gridRef:d,modalRef:L})})]})};we((D,x)=>{ge.createRoot(D).render(e.jsx(xe,{...x,title:"Items",children:e.jsx(De,{...x})}))});
