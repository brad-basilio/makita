import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as b}from"./index-BH53Isel.js";import{C as z}from"./chevron-up-D78jyEhP.js";import{C as W}from"./chevron-down-DS-mdh9v.js";import{X as F}from"./x-DBMwyD6F.js";import{a as A}from"./index-xsH4HHeE.js";import{E as T}from"./CompareDetailsModal-Khdr67Ug.js";import U from"./html2canvas.esm-CBrSDip1.js";import{L as _}from"./loader-circle-CrvBvIt1.js";const ee=({product:t,bgImagen:x="",data:l,widthClass:w,cart:n,setCart:h,viewType:p="grid",onCompareClick:g})=>{var f,v,a;const[o,d]=b.useState(!1);return t?p==="list"?e.jsxs("div",{className:"bg-transparent w-full  rounded-xl  flex flex-row h-auto transition-all duration-200  overflow-hidden",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsxs("div",{className:`relative  flex justify-center items-center  w-1/3 min-w-[300px] max-w-[300px] p-2 ${x||"bg-white"}`,children:[t.is_new===1&&e.jsx("span",{className:"absolute top-2 right-2 md:top-2 md:right-2 bg-primary max-w-max text-white text-xs font-bold px-2 py-1 rounded-sm z-10",children:"NUEVO"}),e.jsx("img",{src:`/storage/images/item/${t.image}`,onError:i=>i.target.src="/assets/img/noimage/no_img.jpg",alt:t.name,className:"object-contain h-48 md:h-56 max-w-full mx-auto",loading:"lazy"})]}),e.jsxs("div",{className:" p-8 flex flex-col flex-grow",children:[e.jsxs("div",{className:"customtext-primary tracking-wider text-sm font-medium mb-1",children:[t.sku||"DMR200",e.jsx("span",{className:"customtext-neutral-dark !capitalize",children:((f=t==null?void 0:t.category)==null?void 0:f.name)&&` | ${(a=(v=t==null?void 0:t.category)==null?void 0:v.name)==null?void 0:a.toLowerCase()}`})]}),e.jsx("h3",{className:"customtext-neutral-dark  font-bold text-[30px] mb-2 leading-tight line-clamp-2",children:t.name||t.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-3 lg:line-clamp-3 ",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:`mt-auto pt-3 ${o?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-start",children:[e.jsx("button",{className:"flex-1 md:flex-none bg-white border border-primary customtext-primary py-2 px-6 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:g,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${t.slug}`,className:"flex-1 md:flex-none w-32 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):e.jsxs("div",{className:"bg-transparent w-full   flex flex-col h-full transition-all duration-200  overflow-hidden",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsxs("div",{className:`relative  rounded-lg aspect-square flex justify-center items-center  p-2 lg:p-4 ${x||"bg-white"}`,children:[t&&t.is_new===1&&e.jsx("span",{className:"absolute top-8 right-0 bg-primary tracking-widest text-white text-sm font-normal px-2 py-2 rounded-l-md",children:"NUEVO"}),e.jsx("img",{src:t&&t.image?`/storage/images/item/${t.image}`:"/assets/img/noimage/no_img.jpg",onError:i=>i.target.src="/assets/img/noimage/no_img.jpg",alt:t&&t.name?t.name:"",className:"object-contain aspect-square",loading:"lazy"})]}),e.jsxs("div",{className:"p-2 lg:p-5 flex flex-col flex-grow",children:[e.jsx("div",{className:"text-[#219FB9] text-sm font-medium mb-1",children:t.sku||"DMR200"}),e.jsx("h3",{className:"customtext-neutral-dark font-bold text-2xl mb-2 leading-tight line-clamp-2",children:t.name||t.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-2",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:` pt-0 ${o?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 w-full",children:[e.jsx("button",{className:"flex-1 bg-white border border-primary customtext-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:g,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${t.slug}`,className:"flex-1 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):null},te=({open:t,minimized:x,products:l,onRemove:w,onCompare:n,onMinimize:h,onRestore:p})=>{if(!l||l.length===0)return null;const g=b.useRef(null);return b.useEffect(()=>{g.current&&(g.current.style.pointerEvents="auto")},[l.length,x]),e.jsx("div",{ref:g,className:"fixed   lg:h-auto left-0 right-0 bottom-0 z-50 w-full",style:{pointerEvents:"none"},children:e.jsx("div",{className:`w-full bg-[#262626EB] ${x?"h-auto":"h-[calc(100dvh-17dvh)]"} lg:h-auto  shadow-lg px-2 sm:px-6 ${x?"py-2":"py-10 lg:py-20"}`,style:{margin:0,pointerEvents:"auto"},children:x?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("button",{onClick:p,className:" rounded text-2xl md:text-[30px]  p-2 text-white flex items-center gap-2 lg:gap-6 ",children:[e.jsx("button",{onClick:p,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(z,{size:24})}),e.jsx("span",{children:"Comparar productos"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 lg:gap-8",children:[e.jsx("button",{onClick:h,className:"bg-primary rounded min-w-14 min-h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(W,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-[32px] font-medium text-white",children:"Comparar productos"}),e.jsx("p",{className:"text-base line-clamp-1 lg:line-clamp-none md:text-base text-white",children:"Puede añadir un máximo de cuatro artículos para comparar"})]})]}),e.jsx("button",{className:`hidden md:block bg-[#219FB9] text-white px-4 py-3 rounded-md text-lg tracking-wider transition-all ${l.length===4?"hover:bg-[#1786a1]":"opacity-50 cursor-not-allowed"}`,disabled:l.length!==4,onClick:()=>{n(),h&&h()},children:"Comparar"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"overflow-x-auto md:overflow-x-visible max-h-[66dvh] overflow-y-auto md:pb-0 pb-20",children:e.jsx("div",{className:"grid grid-cols-2 md:flex md:justify-center gap-4 md:gap-6 lg:gap-12 min-w-full md:min-w-0",children:l.map(o=>e.jsxs("div",{className:"flex flex-col items-center min-w-0",children:[e.jsx("button",{className:"mt-2 mb-4 bg-primary rounded w-9 h-9 flex items-center justify-center text-white text-xl hover:bg-[#219FB9] transition-all duration-300",onClick:()=>w(o.id),children:e.jsx(F,{size:16})}),e.jsx("div",{className:"bg-white rounded-lg p-2 aspect-square",children:e.jsx("img",{src:`/storage/images/item/${o.image}`,alt:o.name,className:"h-28 object-cover aspect-square mb-2",onError:d=>d.target.src="/assets/img/noimage/no_img.jpg"})}),e.jsx("div",{className:"text-white text-center line-clamp-3 mt-2 max-w-[180px]",children:o.name})]},o.id))})}),e.jsx("div",{className:"md:hidden absolute bottom-0 left-0 right-0 bg-[#262626EB] p-4 flex justify-center",children:e.jsx("button",{className:`bg-[#219FB9] text-white px-6 py-3 rounded-md text-lg tracking-wider transition-all ${l.length===4?"hover:bg-[#1786a1]":"opacity-50 cursor-not-allowed"}`,disabled:l.length!==4,onClick:()=>{n(),h&&h()},children:"Comparar"})})]})]})})})},ae=({isOpen:t,onClose:x,products:l,onRemoveProduct:w})=>{const[n,h]=b.useState([]),[p,g]=b.useState(!1),[o,d]=b.useState(!1),f=b.useRef(null);b.useEffect(()=>{t&&l&&l.length>0?(g(!0),Promise.all(l.map(a=>A.get(`/api/items/${a.id}`).then(i=>i.data).catch(()=>null))).then(a=>{h(a.filter(Boolean)),g(!1)})):h([])},[t,l]);const v=async()=>{if(!(!f.current||o))try{if(d(!0),console.log("contentRef.current:",f.current),console.log("details:",n),n.length===0){console.error("No hay productos para exportar"),d(!1);return}console.log("Capturando contenido directamente del DOM visible");const a=document.querySelectorAll(".print-hide"),i=[];a.forEach((r,c)=>{i[c]=r.style.display,r.style.display="none"}),await new Promise(r=>setTimeout(r,100));const s=await U(f.current,{scale:2,useCORS:!0,logging:!0,backgroundColor:"#ffffff",allowTaint:!0,foreignObjectRendering:!1,imageTimeout:15e3,width:Math.min(f.current.scrollWidth,1200),height:f.current.scrollHeight,onclone:r=>{const c=r.querySelector("[data-html2canvas-ignore]")||r.body;c.style.backgroundColor="#ffffff",c.style.padding="20px",c.style.maxWidth="1200px",c.style.margin="0 auto",r.querySelectorAll(".grid > div").forEach(m=>{m.style.display="block",m.style.visibility="visible",m.style.opacity="1"}),r.querySelectorAll("h3").forEach(m=>{m.style.fontSize="18px",m.style.lineHeight="1.3",m.style.wordBreak="break-word",m.style.hyphens="auto",m.style.minHeight="auto",m.style.height="auto"})}});if(a.forEach((r,c)=>{r.style.display=i[c]}),console.log("Canvas generado directamente:",{width:s.width,height:s.height,dataURL:s.toDataURL().substring(0,100)+"..."}),s.width===0||s.height===0){console.error("Canvas está vacío:",{width:s.width,height:s.height}),d(!1);return}const u=new T({orientation:"portrait",unit:"mm",format:"a4",compress:!1}),H=s.toDataURL("image/png",1);console.log("Imagen generada, tamaño:",H.length,"caracteres");const B=u.internal.pageSize.getWidth(),P=u.internal.pageSize.getHeight(),N=15,k=B-N*2,C=P-N*2,E=s.width/s.height;let y,j;E>k/C?(y=k,j=k/E):(j=C,y=C*E);const $=(B-y)/2,S=N;if(console.log("Añadiendo imagen al PDF (portrait):",{x:$,y:S,imgWidth:y,imgHeight:j}),u.addImage(H,"PNG",$,S,y,j),n&&n.length>0){const r=Math.min(n.length,4),c=y/r;n.forEach((D,R)=>{const m=R%r,L=$+m*c+c*.1,M=S+j*.7,q=c*.8;u.link(L,M,q,15,{url:`${window.location.origin}/producto/${D.slug}`})})}u.save("comparacion_productos.pdf"),console.log("PDF generado exitosamente")}catch(a){console.error("Error al generar PDF:",a)}finally{d(!1)}};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto ",children:e.jsxs("div",{className:"relative  overflow-hidden pt-10 bg-white",children:[e.jsx("button",{onClick:x,className:"print-hide absolute right-12 top-4  flex items-center justify-center w-10 h-10 rounded-md z-[999] bg-primary  text-white hover:bg-[#219FB9]",type:"button","aria-label":"Cerrar",children:e.jsx(F,{className:"h-5 w-5"})}),e.jsxs("div",{className:"bg-white   w-full min-w-[800px] max-w-7xl pb-8   relative max-h-[90vh] overflow-y-auto scrollbar-none shadow-2xl ",children:[!p&&e.jsxs("div",{className:"sticky pt-8 top-0 z-20 bg-white  pb-4 mb-6 rounded-t-xl shadow-md px-4 md:px-8",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-[#262626] ",children:"Comparar productos"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:v,disabled:p||o||n.length===0,className:"gap-2 print-hide flex tracking-wider items-center border border-gray-300 bg-[#219FB9]  hover:bg-primary text-white px-4 py-3 rounded-md  shadow-sm hover:brightness-100 disabled:opacity-60 disabled:cursor-not-allowed",type:"button",children:[o?e.jsx(_,{className:"h-4 w-4 animate-spin"}):"",e.jsx("span",{children:o?"Generando PDF...":"Descargar PDF"})]})})]}),e.jsx("p",{className:"text-sm text-[#262626] mt-1",children:"Puede añadir un máximo de cuatro artículos para comparar"})]}),e.jsx("div",{ref:f,className:"bg-white  rounded-lg  px-8",children:p?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(_,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"customtext-neutral-dark ",children:"Cargando detalles de productos..."})]}):n.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50  rounded-lg",children:[e.jsx("p",{className:"customtext-neutral-dark text-lg",children:"No hay productos para comparar."}),e.jsx("p",{className:"customtext-neutral-dark text-sm mt-2",children:"Añada productos para iniciar la comparación."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map(a=>e.jsxs("div",{className:"overflow-hidden h-full flex flex-col bg-white rounded-lg",children:[e.jsxs("div",{className:"relative pt-12",children:[e.jsx("button",{onClick:()=>w(a.id),className:"absolute top-2 left-0 bg-primary text-white rounded w-9 h-9 flex items-center justify-center hover:bg-secondary shadow-md print-hide",children:e.jsx(F,{size:20})}),e.jsx("div",{className:"bg-gray-100 aspect-square flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`/storage/images/item/${a.image}`,alt:a.name,className:"w-full h-full object-contain p-4",onError:i=>i.target.src="/assets/img/noimage/no_img.jpg"})})]}),e.jsxs("div",{className:"flex-grow flex flex-col p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-block text-[#219FB9] rounded-full text-sm font-medium",children:a.code})}),e.jsx("h3",{className:"font-bold mb-3 text-lg leading-tight customtext-neutral-dark min-h-[3rem] flex items-start",children:a.name}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",dangerouslySetInnerHTML:{__html:a==null?void 0:a.description}})}),e.jsx("a",{href:`/producto/${a.slug}`,className:"mb-4 w-full block text-center bg-primary hover:bg-secondary text-white py-3 rounded  text-base transition-all duration-200 shadow-sm hover:shadow-md print-hide",children:"Ver"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-bold text-lg tracking-wider mt-2 mb-4 text-gray-800  border-gray-200 pb-2",children:"Especificaciones técnicas"}),e.jsxs("div",{className:"space-y-1",children:[console.log(a.specifications),(()=>{let i=[];return Array.isArray(a.specifications)?i=a.specifications:a.specifications&&typeof a.specifications=="object"&&(i=Object.values(a.specifications)),i.length>0?i.slice(0,10).map((s,u)=>e.jsx("div",{className:`p-3  ${u%2===0?"bg-gray-50":"bg-white "}`,children:e.jsxs("p",{className:"text-base text-[#262626]",children:[e.jsx("span",{className:"font-bold tracking-wider text-sm  customtext-neutral-dark",children:s.key||s.name}),e.jsx("br",{})," ",s.value]})},s.key||s.name||u)):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-md",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Sin especificaciones técnicas disponibles"})})})()]})]})]})]},a.id))})}),e.jsx("div",{className:"flex justify-end mt-8 print-hide mr-8",children:e.jsx("button",{onClick:x,className:"bg-primary  text-white px-8 py-3 rounded text-lg  transition-colors",type:"button",children:"Cerrar"})})]})]})}):null};export{ee as C,te as a,ae as b};
