import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as i}from"./index-BH53Isel.js";import{P as O}from"./PostsRest-CqLemDFe.js";import{C as $}from"./chevron-down-DS-mdh9v.js";import{S as _}from"./search-TwiiKGP5.js";import{C as E}from"./check-DQ7QoS0v.js";import{G as F}from"./Global-ErywZRdd.js";import"./index-yBjzXJbu.js";import"./BasicRest-B3rfI5GY.js";import"./main-BvVILmTO.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-CMHsc23u.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./createLucideIcon-Cy5Ya80P.js";function k({data:t,flex:o=!1,post:s,featured:m=!1}){return e.jsx("article",{className:`group relative font-paragraph ${m?"h-full":""}`,children:e.jsxs("a",{href:`/post/${s==null?void 0:s.slug}`,className:`block ${o&&"flex gap-4 "}`,children:[e.jsx("div",{className:`relative aspect-square lg:aspect-video overflow-hidden rounded-lg ${o&&"aspect-square  w-1/2"} `,children:e.jsx("img",{src:`/storage/images/post/${s==null?void 0:s.image}`,alt:s==null?void 0:s.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105 aspect-square"})}),e.jsxs("div",{className:`mt-4 space-y-1 ${o&&"w-1/2 mt-0 gap-2"}`,children:[e.jsx("span",{className:"customtext-neutral-dark opacity-90 font-semibold text-sm 2xl:text-lg line-clamp-1 ",children:s==null?void 0:s.category.name}),e.jsx("h3",{className:"text-lg line-clamp-3 lg:line-clamp-4 2xl:text-2xl font-semibold customtext-neutral-dark group-hover:customtext-primary leading-tight",children:s==null?void 0:s.name}),e.jsx("p",{className:"line-clamp-3  customtext-neutral-dark opacity-85 text-sm 2xl:text-xl leading-tight",children:s==null?void 0:s.summary}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("time",{children:s==null?void 0:s.post_date}),(t==null?void 0:t["bool:show_seen"])&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"mdi mdi-circle-medium"}),e.jsx("span",{children:"Leído hace 5 minutos"})]})]})]})]})})}const L=({options:t=[],placeholder:o="Select an option",onChange:s,valueKey:m,labelKey:y,label:v,labelClass:f,className:p,disabled:g=!1})=>{const[u,n]=i.useState(!1),[c,N]=i.useState(null),[j,w]=i.useState(""),x=i.useRef(null),d=t.length>0&&typeof t[0]=="object",l=d?m||Object.keys(t[0])[0]:null,r=d?y||Object.keys(t[0])[1]:null,b=t.map(a=>d?{value:a[l],label:a[r]}:{value:a,label:a}).filter(a=>a.label.toLowerCase().includes(j.toLowerCase()));i.useEffect(()=>{const a=S=>{x.current&&!x.current.contains(S.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const C=a=>{N(a),s(a.value),n(!1)};return e.jsxs("div",{className:"relative w-full",ref:x,children:[v&&e.jsx("label",{className:`block text-sm mb-1 customtext-neutral-dark ${f}`,children:v}),e.jsxs("button",{className:`w-full relative text-start  px-4 py-3 border customtext-neutral-dark   rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300 ${p}`,onClick:()=>n(!u),"aria-haspopup":"listbox","aria-expanded":u,disabled:g,children:[e.jsx("span",{className:"block truncate",children:c?c.label:o}),e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center justify-center py-3 pr-2 pointer-events-none",children:e.jsx($,{className:`w-5 h-5 customtext-neutral-dark transition-transform duration-200 ${u?"rotate-180":""}`})})]}),u&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white rounded-lg shadow-lg max-h-60 overflow-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Search options...",value:j,onChange:a=>w(a.target.value)})]})}),e.jsx("ul",{className:"py-1",role:"listbox",children:b.map(a=>e.jsxs("li",{className:`px-4 py-2 cursor-pointer flex items-center justify-between 
                                    ${c&&c.value===a.value?"bg-blue-500 text-white":"hover:bg-gray-100"}`,onClick:()=>C(a),role:"option","aria-selected":c&&c.value===a.value,children:[e.jsx("span",{className:"block truncate",children:a.label}),c&&c.value===a.value&&e.jsx(E,{className:"w-5 h-5"})]},a.value))})]})]})},P=new O;function U({data:t,posts:o,setPosts:s,headerPosts:m,filteredData:y,loading:v,setLoading:f,isFilter:p,setIsFilter:g}){const{categories:u}=y,[n,c]=i.useState({category_id:"",post_date:"",name:""}),[N,j]=i.useState(!0),w=l=>{const r=[];return l.category_id&&r.push(["category_id","=",l.category_id]),l.post_date&&(console.log("Fecha seleccionada:",l.post_date),r.push(["post_date","=",l.post_date])),l.name&&(console.log("Nombre seleccionado:",l.name),r.push(["name","contains",l.name])),r},x=async()=>{f(!0);try{const l=w(n),r=n.category_id||n.post_date||n.name,h={with:"category",filter:l};console.log(h);const b=await P.paginate(h);console.log(b),s(b.data),g(!!r)}catch(l){console.error("Error fetching posts:",l)}finally{f(!1)}};i.useEffect(()=>{N?j(!1):x()},[n]);const d=(l,r)=>{c(h=>({...h,[l]:r}))};return i.useEffect(()=>{console.log("BlogHeader - posts actualizados:",o)},[o]),e.jsx("main",{className:"bg-white !font-font-general ",children:e.jsxs("section",{className:`px-primary mx-auto 2xl:px-0 2xl:max-w-7xl ${p?"pt-8":"py-8"}`,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"customtext-primary font-title text-3xl md:text-5xl 2xl:text-6xl font-bold tracking-tight whitespace-break-spaces",children:t!=null&&t.title?t==null?void 0:t.title:e.jsxs(e.Fragment,{children:["Descubre lo mejor:",e.jsx("br",{}),"Publicaciones sobre el mundo de ",F.APP_NAME]})}),(t==null?void 0:t.description)&&e.jsx("p",{className:"customtext-neutral-dark opacity-80 text-base 2xl:text-xl",children:t==null?void 0:t.description})]}),e.jsxs("div",{className:"mt-8 flex flex-col md:flex-row gap-4 justify-between",children:[e.jsxs("div",{className:"relative md:w-6/12 flex items-center",children:[e.jsx("input",{type:"search",placeholder:"Buscar publicación",className:"w-full px-4 relative py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:l=>d("name",l.target.value)}),e.jsx("div",{className:"absolute right-3 p-2 rounded-xl bg-primary",children:e.jsx(_,{className:" h-5 w-5 text-white"})})]}),e.jsxs("div",{className:"flex w-full gap-2 md:gap-4 md:w-5/12",children:[e.jsx("div",{className:"w-1/2 md:w-full",children:e.jsx(L,{options:u,placeholder:"Todas las categorías",onChange:l=>{c(r=>({...r,category_id:l}))},labelKey:"name",valueKey:"id"})}),e.jsx("input",{type:"date",className:"w-1/2 md:w-full px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",onChange:l=>{d("post_date",l.target.value)}})]})]}),!p&&e.jsxs("div",{className:"mt-12 flex gap-8 py-[2.5%] rounded-2xl",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx(k,{data:t,featured:!0,post:m[0]})}),e.jsx("div",{className:"hidden md:flex space-y-4  flex-col w-1/2",children:m.slice(1,3).map(l=>e.jsx(k,{data:t,flex:!0,post:l},l.id))})]})]})})}export{k as B,U as a};
