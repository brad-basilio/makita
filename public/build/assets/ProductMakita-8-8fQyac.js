import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{S as I,a as G}from"./BlogCarousel-CCgb3gK1.js";import{N as U}from"./navigation-cW_iC-Qg.js";import{G as Y}from"./grid-BZ4EKnFQ.js";/* empty css               */import"./InfiniteCategory-BtlY-czj.js";/* empty css             */import{r as s}from"./index-BH53Isel.js";import{a as _}from"./adjustTextColor-FzLvY4Q1.js";import{C as J}from"./CardProductMakita-Cc3GpF9D.js";import{C as O}from"./chevron-up-D78jyEhP.js";import{C as X}from"./chevron-down-DS-mdh9v.js";import{X as L}from"./x-DBMwyD6F.js";import{a as K}from"./index-xsH4HHeE.js";import{E as Q}from"./CompareDetailsModal-Khdr67Ug.js";import Z from"./html2canvas.esm-CBrSDip1.js";import{L as T}from"./loader-circle-CrvBvIt1.js";import{D as ee}from"./download-Dh5rRDOT.js";import{C as te}from"./chevron-left-B2s3ZsB7.js";import{C as re}from"./chevron-right-Ckt5D2ka.js";import"./index-yBjzXJbu.js";import"./create-element-if-not-defined-GPUxtyu9.js";import"./createLucideIcon-Cy5Ya80P.js";import"./preload-helper-BfFHrpNk.js";import"./typeof-QjJsDpFa.js";const se=({open:j,minimized:m,products:p,onRemove:E,onCompare:x,onMinimize:v,onRestore:f})=>{if(!p||p.length===0)return null;const u=s.useRef(null);return s.useEffect(()=>{u.current&&(u.current.style.pointerEvents="auto")},[p.length,m]),e.jsx("div",{ref:u,className:"fixed left-0 right-0 bottom-0 z-50 w-full",style:{pointerEvents:"none"},children:e.jsx("div",{className:`w-full bg-[#262626EB]  shadow-lg px-2 sm:px-6 ${m?"py-2":"py-6"}`,style:{margin:0,pointerEvents:"auto"},children:m?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("button",{onClick:f,className:" rounded text-3xl md:text-[32px]  p-2 text-white flex items-center gap-2 font-bold",children:[e.jsx("button",{onClick:f,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl",children:e.jsx(O,{size:24})}),e.jsx("span",{children:"Comparar productos"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:v,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl",children:e.jsx(X,{size:32})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-[32px] font-bold text-white",children:"Comparar productos"}),e.jsx("p",{className:"text-base md:text-lg text-white",children:"Puede añadir un máximo de cuatro artículos para comparar"})]})]}),e.jsx("button",{className:`bg-primary text-white px-8 py-3 rounded text-lg font-bold transition-all ${p.length===4?"hover:bg-[#1786a1]":"opacity-50 cursor-not-allowed"}`,disabled:p.length!==4,onClick:()=>{x(),v&&v()},children:"Comparar"})]}),e.jsx("div",{className:"flex justify-center gap-6 md:gap-12 flex-wrap",children:p.map(h=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{className:"mb-2 bg-primary rounded w-10 h-10 flex items-center justify-center text-white text-xl",onClick:()=>E(h.id),children:e.jsx(L,{size:20})}),e.jsx("div",{className:"bg-white rounded-lg p-4",children:e.jsx("img",{src:`/storage/images/item/${h.image}`,alt:h.name,className:"h-24 object-cover aspect-square mb-2"})}),e.jsx("div",{className:"text-white text-center font-bold mt-2 max-w-[180px]",children:h.name})]},h.id))})]})})})},ae=({isOpen:j,onClose:m,products:p,onRemoveProduct:E})=>{const[x,v]=s.useState([]),[f,u]=s.useState(!1),[h,k]=s.useState(!1),S=s.useRef(null);s.useEffect(()=>{j&&p&&p.length>0?(u(!0),Promise.all(p.map(t=>K.get(`/api/items/${t.id}`).then(o=>o.data).catch(()=>null))).then(t=>{v(t.filter(Boolean)),u(!1)})):v([])},[j,p]);const P=async()=>{if(!(!S.current||h))try{k(!0);const t=S.current.cloneNode(!0);t.style.width="800px",t.style.paddingLeft="40px",t.style.paddingRight="40px",t.style.paddingTop="10px",t.style.paddingBottom="10px",t.style.backgroundColor="#ffffff";const o=[];t.querySelectorAll('a[href*="/producto/"]').forEach((i,l)=>{const d=i.getAttribute("href");if(d){const n=d.startsWith("http")?d:`${window.location.origin}${d}`;o.push({url:n,index:l});const c=document.createElement("a");c.href=n,c.innerHTML="🔗 Ver detalles completos",c.style.cssText=`
            display: block;
            width: 80%;
            text-align: center;
            background-color: #0066cc;
            color: white;
            text-decoration: none;
            padding: 12px 16px;
            margin: 12px auto;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            box-sizing: border-box;
          `,i.parentNode.replaceChild(c,i)}}),t.querySelectorAll(".print-hide:not(a[href*='/producto/'])").forEach(i=>i.remove()),t.querySelectorAll(".space-y-2").forEach(i=>{const l=i.querySelectorAll('div[class*="p-3"]'),d=Math.min(5,l.length);for(let n=d;n<l.length;n++)l[n]&&l[n].remove();if(l.length>d){const n=document.createElement("div");n.className="p-3 rounded-md bg-gray-100 text-center",n.innerHTML=`
            <p class="font-medium text-sm text-gray-600">
              ... y ${l.length-d} especificaciones más
            </p>
            <p class="text-xs text-gray-500 mt-1">
              Ver producto completo para más detalles
            </p>
          `,i.appendChild(n)}});const w=document.createElement("div");w.style.position="absolute",w.style.left="-9999px",w.style.top="0",w.appendChild(t),document.body.appendChild(w);const b=document.createElement("h1");b.textContent="Comparación de Productos",b.style.textAlign="center",b.style.fontSize="32px",b.style.fontWeight="bold",b.style.marginBottom="20px",b.style.color="#333",b.style.fontFamily="Arial, sans-serif",t.insertBefore(b,t.firstChild),await new Promise(i=>setTimeout(i,200));const g=await Z(t,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",allowTaint:!0,windowWidth:t.scrollWidth,windowHeight:t.scrollHeight});document.body.removeChild(w);const D=g.toDataURL("image/jpeg",.5),y=new Q({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),z=y.internal.pageSize.getWidth(),B=y.internal.pageSize.getHeight(),r=z-20,a=g.height*r/g.width,N=B-20;if(a<=N)y.addImage(D,"JPEG",10,10,r,a,void 0,"FAST"),o.length>0&&o.forEach((i,l)=>{const d=80+l*90,n=15,c=r-30;y.link(20,d,c,n,{url:i.url})});else{let i=a,l=0,d=0;for(;i>0;){d>0&&y.addPage();const n=Math.min(i,N),c=document.createElement("canvas"),A=c.getContext("2d");c.width=g.width,c.height=g.height*n/a,A.drawImage(g,0,g.height*l/a,g.width,g.height*n/a,0,0,c.width,c.height);const F=c.toDataURL("image/jpeg",.8);y.addImage(F,"JPEG",10,10,r,r*c.height/c.width,void 0,"FAST"),d===0&&o.length>0&&o.forEach((W,$)=>{const M=80+$*90,V=15,q=r-30;M<N&&y.link(20,M,q,V,{url:W.url})}),i-=n,l+=n,d++}}y.save("comparacion_productos.pdf")}catch(t){console.error("Error al generar PDF:",t)}finally{k(!1)}};return j?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto py-10",children:e.jsxs("div",{className:"bg-white  rounded-xl w-full max-w-7xl pb-8   relative max-h-[90vh] overflow-y-auto scrollbar-none shadow-2xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"sticky pt-8 top-0 z-20 bg-white  pb-4 mb-6 rounded-t-xl shadow-md px-4 md:px-8",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold customtext-neutral-dark ",children:"Comparar productos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:P,disabled:f||h||x.length===0,className:"gap-2 print-hide flex items-center border border-gray-300 bg-primary brightness-125 text-white px-4 py-2 rounded-md  shadow-sm hover:brightness-100 disabled:opacity-60 disabled:cursor-not-allowed",type:"button",children:[h?e.jsx(T,{className:"h-4 w-4 animate-spin"}):e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:h?"Generando PDF...":"Descargar PDF"})]}),e.jsx("button",{onClick:m,className:"print-hide flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100 text-gray-700",type:"button","aria-label":"Cerrar",children:e.jsx(L,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-sm customtext-neutral-dark dark:text-gray-400 mt-1",children:"Puede añadir un máximo de cuatro artículos para comparar"}),e.jsx("hr",{className:"mt-4 border-gray-200 dark:border-gray-800"})]}),e.jsx("div",{ref:S,className:"bg-white  rounded-lg  px-8",children:f?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(T,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"customtext-neutral-dark ",children:"Cargando detalles de productos..."})]}):x.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50  rounded-lg",children:[e.jsx("p",{className:"customtext-neutral-dark text-lg",children:"No hay productos para comparar."}),e.jsx("p",{className:"customtext-neutral-dark text-sm mt-2",children:"Añada productos para iniciar la comparación."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map(t=>e.jsxs("div",{className:"overflow-hidden h-full flex flex-col bg-white  rounded-lg shadow border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-gray-100  aspect-square flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`/storage/images/item/${t.image}`,alt:t.name,className:"w-full h-full object-contain p-4"})}),e.jsx("button",{onClick:()=>E(t.id),className:"absolute top-2 right-2 bg-white  text-gray-700 dark:text-gray-200 rounded-full w-8 h-8 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700 shadow-md print-hide",children:e.jsx(L,{size:16})})]}),e.jsxs("div",{className:"flex-grow flex flex-col p-4",children:[e.jsx("span",{className:"inline-block self-start mb-2 px-2 py-1  customtext-primary rounded text-xs font-semibold bg-primary/10",children:t.code}),e.jsx("h3",{className:"font-bold text-lg mb-2 line-clamp-2 customtext-neutral-dark dark:text-white",children:t.name}),e.jsx("div",{className:"prose prose-sm dark:prose-invert line-clamp-2 customtext-neutral-dark  mb-4",dangerouslySetInnerHTML:{__html:t==null?void 0:t.description}}),e.jsx("a",{href:`/producto/${t.slug}`,className:"mb-4 w-full block text-center bg-primary hover:bg-primary/90 text-white py-2 rounded-md font-medium text-sm transition-colors print-hide",children:"Ver detalles"}),e.jsx("hr",{className:"my-4 border-gray-200 dark:border-gray-800"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 customtext-neutral-dark dark:text-white",children:"Especificaciones técnicas"}),e.jsx("div",{className:"space-y-2",children:(t.specifications||[]).slice(0,10).length>0?(t.specifications||[]).slice(0,10).map((o,C)=>e.jsxs("div",{className:`p-3 rounded-md ${C%2===0?"bg-gray-50 ":"bg-white  border border-gray-100 dark:border-gray-800"}`,children:[e.jsx("p",{className:"font-medium text-sm customtext-neutral-dark dark:text-white",children:o.key||o.name}),e.jsx("p",{className:"text-sm customtext-neutral-dark dark:text-gray-400 mt-1",children:o.value})]},o.key||o.name||C)):e.jsx("p",{className:"text-center customtext-neutral-dark dark:text-gray-400 py-4",children:"Sin especificaciones"})})]})]})]},t.id))})}),e.jsx("div",{className:"flex justify-end mt-8 print-hide mr-8",children:e.jsx("button",{onClick:m,className:"bg-primary  text-white px-8 py-3 rounded text-lg font-bold transition-colors",type:"button",children:"Cerrar"})})]})}):null},De=({items:j,data:m,setCart:p,cart:E})=>{const[x,v]=s.useState(null);s.useRef(null),s.useRef(null);const f=s.useRef(null),u=s.useRef(null),h=s.useRef(null),k=s.useRef(null);s.useEffect(()=>{[f,u,h,k].forEach(r=>{r.current&&_(r.current)})},[]),s.useEffect(()=>{if(!x)return;const r=()=>{const a=window.innerWidth>=768;x.params.navigation.prevEl=a?f.current:h.current,x.params.navigation.nextEl=a?u.current:k.current,x.navigation.destroy(),x.navigation.init(),x.navigation.update()};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[x]);const[S,P]=s.useState(!1),[t,o]=s.useState(!1),[C,R]=s.useState([]),[H,w]=s.useState(!1),b=r=>{console.log("Click en comparar",r),P(!0),o(!1),R(a=>{const N=a.find(l=>l.id===r.id);if(console.log("Productos actuales en barra:",a,"¿Ya existe?",N),N||a.length>=4)return a;const i=[...a,r];return console.log("Nuevos productos en barra:",i),i})},g=r=>{R(a=>a.filter(N=>N.id!==r))},D=()=>o(!0),y=()=>o(!1),z=()=>{C.length===4&&w(!0)},B=()=>{w(!1),R([]),P(!1)};return e.jsxs("section",{className:"relative bg-white py-8",children:[e.jsxs("div",{className:"relative mx-auto px-primary py-10 2xl:px-0 2xl:max-w-7xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold customtext-neutral-dark",children:(m==null?void 0:m.title)||"Set de nuevas máquinas"}),e.jsx("a",{href:m==null?void 0:m.link_catalog,className:"hidden md:flex bg-primary transition-all duration-300 text-white border-none justify-center flex-row items-center gap-2 px-6 py-3 text-sm rounded-lg font-medium cursor-pointer hover:brightness-125",children:"Ver todo"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(I,{modules:[U,Y],navigation:{prevEl:f.current,nextEl:u.current,enabled:!0},slidesPerView:2,spaceBetween:0,loop:!0,grid:{fill:"row",rows:2},onSwiper:v,breakpoints:{640:{slidesPerView:2},768:{slidesPerView:3,grid:{rows:1}},1024:{slidesPerView:4,grid:{rows:1}},1280:{slidesPerView:4,grid:{rows:1}}},className:"lg:px-10",children:j==null?void 0:j.map((r,a)=>e.jsx(G,{className:"py-2",children:e.jsx(J,{product:r,onCompareClick:()=>b(r)})},a))}),e.jsx("button",{ref:f,className:"hidden lg:flex absolute -left-3 top-1/2 -translate-y-1/2 z-10 w-10 h-10  items-center justify-center rounded-lg bg-secondary bg-opacity-70 text-white hover:brightness-125","aria-label":"Productos anteriores",children:e.jsx(te,{width:"1.2rem"})}),e.jsx("button",{ref:u,className:"hidden lg:flex absolute -right-3 top-1/2 -translate-y-1/2 z-10 w-10 h-10  items-center justify-center rounded-lg bg-secondary bg-opacity-70 text-white hover:brightness-125","aria-label":"Siguientes productos",children:e.jsx(re,{width:"1.2rem"})})]})]}),e.jsx(se,{open:!0,minimized:t,products:C,onRemove:g,onCompare:z,onMinimize:D,onRestore:y}),e.jsx(ae,{isOpen:H,onClose:B,products:C})]})};export{De as default};
