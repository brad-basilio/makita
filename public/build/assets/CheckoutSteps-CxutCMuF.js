import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as x}from"./index-BH53Isel.js";import{N as C}from"./Number2Currency-e57Tgsuk.js";import{B as H,a as se,D as ce,A as de,O as me}from"./OptionCard-BoQsrNEL.js";import{M as pe}from"./CartItemRow-4VUVjpPz.js";import{P as xe}from"./plus-Bot15Khs.js";import{T as ue}from"./trash-2-DK1wnsDn.js";import{m as he}from"./main-BvVILmTO.js";import{G as I}from"./Global-ErywZRdd.js";import{t as q}from"./index-CMHsc23u.js";import{I as O}from"./InputForm-ZnsQvLid.js";import{l as ge}from"./lodash-CblvOeJM.js";import{c as Y}from"./createLucideIcon-Cy5Ya80P.js";import{C as fe}from"./circle-x-p-TkKhsF.js";import{m as T}from"./proxy-BTYtmp9V.js";import"./ProductNavigation-N-bL5mzz.js";import"./ProductCard-Ap6bpF1Q.js";/* empty css              */import"./BlogCarousel-CCgb3gK1.js";/* empty css               */import"./InfiniteCategory-BtlY-czj.js";import{M as be}from"./PaymentModal-Bxx5p2o_.js";import{H as ye}from"./HtmlContent-FTivcJrM.js";import{X as je}from"./x-DBMwyD6F.js";import"./index-yBjzXJbu.js";import"./loader-circle-CrvBvIt1.js";import"./useStateManager-7e1e8489.esm-DCkuAiPQ.js";import"./defineProperty-DRmM3rRU.js";import"./typeof-QjJsDpFa.js";import"./hoist-non-react-statics.cjs-kbdZbs82.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./tippy-react.esm-BWiGTO87.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./ItemsRest-Bh0FSI75.js";import"./BasicRest-9qsOCV42.js";import"./HeaderSearch-B_41BEro.js";import"./index-CFtDjG4d.js";import"./eye-CKCH9ORv.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=Y("OctagonX",[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=Y("UserRoundX",[["path",{d:"M2 21a8 8 0 0 1 11.873-7",key:"74fkxq"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"m17 17 5 5",key:"p7ous7"}],["path",{d:"m22 17-5 5",key:"gqnmv0"}]]),we=({setCart:c,...i})=>{const m=()=>{c(u=>u.filter(o=>o.id!==i.id))},w=()=>{c(u=>u.map(o=>o.id===i.id?{...o,quantity:(o.quantity||1)+1}:o))},g=()=>{c(u=>u.map(o=>{if(o.id===i.id){const d=(o.quantity||1)-1;return d<=0?(m(i.id),null):{...o,quantity:d}}return o}).filter(Boolean))};return e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${i.image}`,alt:i.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:i.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark",children:i.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Disponibilidad: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[i.stock>=i.quantity?"En stock":"Agotado"," "]})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark",children:i.sku})]})]})]}),e.jsxs("div",{className:"flex flex-row justify-between md:flex-col items-end md:items-end gap-4 mt-4 md:mt-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(i.price*i.quantity).toFixed(2)]}),e.jsxs("div",{className:"font-bold text-lg",children:["S/ ",Number(i.final_price*i.quantity).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:g,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Decrease quantity",children:e.jsx(pe,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:i.quantity||1})}),e.jsx("button",{type:"button",onClick:w,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Increase quantity",children:e.jsx(xe,{size:16})})]}),e.jsx("button",{onClick:m,className:"p-2 text-gray-400 hover:text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(ue,{size:18})})]})]})]})},i.id)};function Ce({cart:c,setCart:i,onContinue:m,subTotal:w,envio:g,igv:u,totalFinal:o,openModal:d}){const n=c.length===0;return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-4 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3 space-y-4 md:space-y-6",children:n?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center animate-fade-in",children:[e.jsx("svg",{className:"w-24 h-24 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Tu carrito estÃ¡ vacÃ­o"}),e.jsx("p",{className:"text-gray-500",children:"Â¡Explora nuestros productos y encuentra algo especial!"})]}):c.map((f,a)=>e.jsx(we,{...f,setCart:i},a))}),e.jsxs("div",{className:"lg:col-span-2 bg-[#F7F9FB] rounded-xl shadow-lg p-4 md:p-6 h-max mt-4 md:mt-0",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold pb-4 md:pb-6",children:"Resumen"}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",C(w)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",C(u)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",C(g)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-4 md:mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg md:text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",C(o)]})]})}),e.jsxs("div",{className:"space-y-2 pt-3 md:pt-4",children:[e.jsx(H,{onClick:m,className:"w-full",disabled:n,children:n?"Carrito VacÃ­o":"Continuar Compra"}),e.jsx(se,{href:"/",className:"w-full",children:n?"Ir a Comprar":"Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-xs md:text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas losÂ ",e.jsx("a",{href:"#",onClick:()=>d(1),className:"customtext-primary font-bold",children:"TÃ©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestraÂ ",e.jsx("a",{href:"#",onClick:()=>d(0),className:"customtext-primary font-bold",children:"PolÃ­tica de Privacidad"}),"."]})})]})]})]})}function ke(){let c="";for(let i=0;i<12;i++){const m=Math.floor(Math.random()*10);c+=m}return c}const Se=c=>new Promise((i,m)=>{var w;try{console.log(c);const g=ke(c.email);console.log(g);let u=!1;window.Culqi.publicKey=I.CULQI_PUBLIC_KEY,window.Culqi.settings({title:I.APP_NAME,email:c.email,currency:"PEN",amount:c.amount*100,order:`${g}`}),console.log(window.Culqi.settings),window.Culqi.options({lang:"es",installments:!1,paymentMethods:{tarjeta:!0,yape:!0,bancaMovil:!0,agente:!0,billetera:!0,cuotealo:!0},style:{logo:I.APP_URL+"/assets/resources/logo.png",bannerColor:I.APP_COLOR_PRIMARY,buttonBackground:I.APP_COLOR_PRIMARY}});const o=(w=window.Culqi)==null?void 0:w.close;o&&(window.Culqi.close=function(){return!window.Culqi.token&&!u&&(console.log("ðŸš« Modal de Culqi cerrado sin completar el pago"),m("Pago cancelado por el usuario")),o.apply(this,arguments)}),window.Culqi.open(),window.culqi=async function(){try{if(!window.Culqi.token){m("No se obtuvo un token de Culqi");return}u=!0;const n=window.Culqi.token.id;console.log("âœ… Token generado:",n),c={...c,token:n,orderNumber:g},console.log("_request actualizado",c);const{status:f,result:a}=await he.Fetch("./api/pago",{method:"POST",body:JSON.stringify(c)});f||console.log((a==null?void 0:a.message)||"Error en el pago"),window.Culqi.close(),q.success("Â¡Pago exitoso!",{description:"Tu pago se procesÃ³ correctamente. Pronto recibirÃ¡s la confirmaciÃ³n de tu pedido.",duration:3e3,position:"top-right",richColors:!0}),i(a)}catch(n){q.error("Â¡Error en el Pago!",{description:n.message,duration:3e3,position:"top-right",richColors:!0}),m(n.message||"Error en el pago")}},window.addEventListener("message",function(n){n.data==="culqi_closed"&&m("Pago cancelado por el usuario")});const d=n=>{n.key==="Escape"&&!u&&(console.log("ðŸš« Modal de Culqi cerrado con Escape"),m("Pago cancelado por el usuario"))};document.addEventListener("keydown",d),setTimeout(()=>{document.removeEventListener("keydown",d)},3e5),document.addEventListener("culqi.error",function(n){var f,a;q.error("Â¡Error en Culqi!",{description:((f=n.detail)==null?void 0:f.message)||"Error desconocido",duration:3e3,position:"top-right",richColors:!0}),m(((a=n.detail)==null?void 0:a.message)||"Error desconocido")})}catch(g){q.error("Â¡Error en la integraciÃ³n con Culqi!",{description:g.message,duration:3e3,position:"top-right",richColors:!0}),m("Error en la integraciÃ³n con Culqi")}});function qe({cart:c,setSale:i,setCode:m,setDelivery:w,setCart:g,onContinue:u,noContinue:o,subTotal:d,igv:n,totalFinal:f,user:a,setEnvio:P,envio:A,ubigeos:D=[],openModal:U}){var ee,te;const[z,M]=x.useState(null),[Q,V]=x.useState(null),[l,v]=x.useState({name:(a==null?void 0:a.name)||"",lastname:(a==null?void 0:a.lastname)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||"",department:(a==null?void 0:a.department)||"",province:(a==null?void 0:a.province)||"",district:(a==null?void 0:a.district)||"",address:(a==null?void 0:a.address)||"",number:(a==null?void 0:a.number)||"",comment:"",reference:(a==null?void 0:a.reference)||"",ubigeo:(a==null?void 0:a.ubigeo)||null});x.useEffect(()=>{if(a!=null&&a.ubigeo&&(a!=null&&a.district)&&(a!=null&&a.province)&&(a!=null&&a.department)){const s={value:a.ubigeo,label:`${a.district}, ${a.province}, ${a.department}`,data:{reniec:a.ubigeo,departamento:a.department,provincia:a.province,distrito:a.district}};V(s),M(s),J(s)}},[a]);const[L,B]=x.useState(!1),[E,_]=x.useState(!1),[$,b]=x.useState([]),[N,R]=x.useState(null),[W,X]=x.useState(null),[p,S]=x.useState({}),[ae,G]=x.useState(""),re=s=>{var r,h,y;const t=["name","lastname","email","phone","ubigeo","address","shipping"];for(const F of t)if(s[F]){let j=null,k=!1;if(F==="ubigeo"?j=((h=(r=document.querySelector('[name="ubigeo"]'))==null?void 0:r.parentElement)==null?void 0:h.parentElement)||document.querySelector(".css-1s2u09g-control")||document.querySelector('[class*="react-select"]'):F==="shipping"?j=((y=document.querySelector('input[name="shipping"]'))==null?void 0:y.closest(".space-y-4"))||document.querySelector(".space-y-4 h3")||document.querySelector("h3"):(j=document.querySelector(`[name="${F}"]`),k=!0),j){j.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),k&&setTimeout(()=>{try{j.focus(),j.tagName==="INPUT"&&j.type==="text"&&j.select()}catch(le){console.warn("No se pudo enfocar el elemento:",le)}},600),ie(j);break}}},ie=s=>{if(!s)return;const t=document.createElement("div");if(t.style.cssText=`
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: 2px solid #ef4444;
            border-radius: 8px;
            pointer-events: none;
            z-index: 1000;
            animation: pulse 0.6s ease-in-out;
            box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2);
        `,!document.querySelector("#error-highlight-styles")){const h=document.createElement("style");h.id="error-highlight-styles",h.textContent=`
                @keyframes pulse {
                    0% { transform: scale(1); opacity: 1; }
                    50% { transform: scale(1.02); opacity: 0.8; }
                    100% { transform: scale(1); opacity: 1; }
                }
            `,document.head.appendChild(h)}const r=s.style.position;(!r||r==="static")&&(s.style.position="relative"),s.appendChild(t),setTimeout(()=>{t.parentNode&&(t.parentNode.removeChild(t),(!r||r==="static")&&(s.style.position=r))},1200)},J=async s=>{if(!s)return;S(r=>({...r,ubigeo:""}));const{data:t}=s;v(r=>({...r,department:t.departamento,province:t.provincia,district:t.distrito,ubigeo:t.reniec})),B(!0);try{const r=await ce.getShippingCost({ubigeo:t.reniec}),h=[];r.data.is_free?(h.push({type:"free",price:0,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),r.data.express.price>0&&h.push({type:"express",price:r.data.express.price,description:r.data.express.description,deliveryType:r.data.express.type,characteristics:r.data.express.characteristics})):r.data.is_agency?h.push({type:"agency",price:0,description:r.data.agency.description,deliveryType:r.data.agency.type,characteristics:r.data.agency.characteristics}):h.push({type:"standard",price:r.data.standard.price,description:r.data.standard.description,deliveryType:r.data.standard.type,characteristics:r.data.standard.characteristics}),b(h),R(h[0].type),P(h[0].price)}catch{q.error("Sin cobertura",{description:"No realizamos envÃ­os a esta ubicaciÃ³n.",icon:e.jsx(K,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"}),b([]),R(null),P(0)}B(!1)},Z=async s=>{var y,F;if(s.preventDefault(),E)return;if(!a){q.error("Acceso requerido",{description:"Debe iniciar sesiÃ³n para continuar.",icon:e.jsx(Ne,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"});return}const t={},r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,h=/^[0-9]{9}$/;if(l.name.trim()||(t.name="Nombre es requerido"),l.lastname.trim()||(t.lastname="Apellido es requerido"),l.email.trim()?r.test(l.email)||(t.email="Email invÃ¡lido"):t.email="Email es requerido",l.phone.trim()?h.test(l.phone.trim())||(t.phone="TelÃ©fono debe tener exactamente 9 dÃ­gitos"):t.phone="TelÃ©fono es requerido",l.ubigeo||(t.ubigeo="UbicaciÃ³n es requerida"),l.address||(t.address="DirecciÃ³n es requerida"),N||(t.shipping="Seleccione un mÃ©todo de envÃ­o"),Object.keys(t).length>0){S(t);const j=Object.keys(t)[0],k={name:"Por favor ingrese su nombre",lastname:"Por favor ingrese su apellido",email:(y=t.email)!=null&&y.includes("invÃ¡lido")?"Por favor ingrese un correo electrÃ³nico vÃ¡lido":"Por favor ingrese su correo electrÃ³nico",phone:(F=t.phone)!=null&&F.includes("9 dÃ­gitos")?"El telÃ©fono debe tener exactamente 9 dÃ­gitos":"Por favor ingrese su nÃºmero de telÃ©fono",ubigeo:"Por favor seleccione su ubicaciÃ³n de entrega",address:"Por favor ingrese su direcciÃ³n de entrega",shipping:"Por favor seleccione un mÃ©todo de envÃ­o"};q.error("Complete el campo requerido",{description:k[j],icon:e.jsx(fe,{className:"h-5 w-5 text-red-500"}),duration:4e3,position:"top-center"}),re(t);return}_(!0);try{const j={user_id:a.id,...l,fullname:`${l.name} ${l.lastname}`,country:"PerÃº",amount:f,delivery:A,cart:c},k=await Se(j);k.status?(i(k.sale),w(k.delivery),m(k.code),g([]),u()):q.error("Error en el pago",{description:k.message||"Pago rechazado",icon:e.jsx(K,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}catch{q.error("Lo sentimos, no puede continuar con la compra",{description:"OcurriÃ³ un error al procesar el pedido.",icon:e.jsx(K,{className:"h-5 w-5 text-red-500"}),duration:3e3,position:"bottom-center"})}finally{_(!1)}},oe=x.useCallback(ge.debounce((s,t)=>{if(s.length<3){t([]);return}fetch(`/api/ubigeo/search?q=${encodeURIComponent(s)}`).then(r=>{if(!r.ok)throw new Error("Error en la respuesta");return r.json()}).then(r=>{const h=r.map(y=>({value:y.reniec,label:`${y.distrito}, ${y.provincia}, ${y.departamento}`,data:{inei:y.inei,reniec:y.reniec,departamento:y.departamento,provincia:y.provincia,distrito:y.distrito}}));t(h)}).catch(r=>{t([])})},300),[]);x.useEffect(()=>{S(s=>{const t={...s};return l.name.trim()&&delete t.name,l.lastname.trim()&&delete t.lastname,l.email.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&delete t.email,l.phone.trim()&&/^[0-9]{9}$/.test(l.phone.trim())&&delete t.phone,l.address.trim()&&delete t.address,l.ubigeo&&delete t.ubigeo,N&&delete t.shipping,t})},[l,N]);const ne=s=>({control:t=>({...t,border:`1px solid ${s?"#ef4444":"#e5e7eb"}`,boxShadow:"none",minHeight:"50px","&:hover":{borderColor:s?"#ef4444":"#6b7280"},borderRadius:"0.75rem",padding:"2px 8px"}),menu:t=>({...t,zIndex:9999,marginTop:"4px",borderRadius:"8px"}),option:t=>({...t,color:"#1f2937",backgroundColor:"white","&:hover":{backgroundColor:"#f3f4f6"},padding:"12px 16px"})});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 md:gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-4 md:space-y-6 bg-white p-4 md:p-6 rounded-xl shadow-sm",onSubmit:Z,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(O,{name:"name",label:"Nombres",value:l.name,error:p.name,onChange:s=>{v(t=>({...t,name:s.target.value})),s.target.value.trim()&&p.name&&S(t=>({...t,name:""}))},required:!0,className:`border-gray-200 ${p.name?"border-red-500 bg-red-50":""}`}),e.jsx(O,{name:"lastname",label:"Apellidos",value:l.lastname,error:p.lastname,onChange:s=>{v(t=>({...t,lastname:s.target.value})),s.target.value.trim()&&p.lastname&&S(t=>({...t,lastname:""}))},required:!0,className:`border-gray-200 ${p.lastname?"border-red-500 bg-red-50":""}`})]}),e.jsx(O,{name:"email",label:"Correo electrÃ³nico",type:"email",value:l.email,error:p.email,onChange:s=>{v(t=>({...t,email:s.target.value})),s.target.value.trim()&&p.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.target.value)&&S(r=>({...r,email:""}))},required:!0,className:`border-gray-200 ${p.email?"border-red-500 bg-red-50":""}`}),e.jsx(O,{name:"phone",label:"TelÃ©fono",type:"tel",value:l.phone,error:p.phone,onChange:s=>{const t=s.target.value.replace(/\D/g,"");v(r=>({...r,phone:t})),t.length===9&&p.phone&&S(r=>({...r,phone:""}))},maxLength:"9",placeholder:"Ej: 987654321",required:!0,className:`border-gray-200 ${p.phone?"border-red-500 bg-red-50":""}`}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"block text-sm 2xl:text-base mb-2 font-medium customtext-neutral-dark",children:["UbicaciÃ³n de entrega (Distrito)",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(de,{name:"ubigeo",cacheOptions:!0,value:z,loadOptions:oe,onChange:s=>{M(s),J(s),G("")},inputValue:ae,onInputChange:(s,{action:t})=>{t==="input-change"&&G(s)},onFocus:()=>{M(null),G("")},onMenuOpen:()=>{z&&(M(null),G(""))},placeholder:"Buscar por Distrito ...",loadingMessage:()=>"Buscando ubicaciones...",noOptionsMessage:({inputValue:s})=>s.length<3?"Buscar por Distrito ...":"No se encontraron resultados",isLoading:L,styles:ne(!!p.ubigeo),formatOptionLabel:({data:s})=>e.jsxs("div",{className:"text-sm py-1",children:[e.jsx("div",{className:"font-medium",children:s.distrito}),e.jsxs("div",{className:"text-gray-500",children:[s.provincia,", ",s.departamento]})]}),className:"w-full rounded-xl transition-all duration-300",menuPortalTarget:document.body,isClearable:!0}),p.ubigeo&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:p.ubigeo})]}),e.jsx(O,{name:"address",label:"DirecciÃ³n ",value:l.address,error:p.address,onChange:s=>{v(t=>({...t,address:s.target.value})),s.target.value.trim()&&p.address&&S(t=>({...t,address:""}))},required:!0,className:`border-gray-200 ${p.address?"border-red-500 bg-red-50":""}`}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(O,{label:"NÃºmero",value:l.number,onChange:s=>v(t=>({...t,number:s.target.value})),className:"border-gray-200"}),e.jsx(O,{label:"Referencia",value:l.reference,onChange:s=>v(t=>({...t,reference:s.target.value})),className:"border-gray-200"})]}),$.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"MÃ©todo de envÃ­o"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$.map(s=>e.jsx(me,{title:s.deliveryType,price:s.price,description:s.description,selected:N===s.type,onSelect:()=>{R(s.type),P(s.price),S(t=>({...t,shipping:""}))}},s.type))}),N&&$.length>0&&e.jsx("div",{className:"space-y-3 mt-4",children:(te=(ee=$.find(s=>s.type===N))==null?void 0:ee.characteristics)==null?void 0:te.map((s,t)=>e.jsxs("div",{className:"flex items-start gap-3 bg-gray-50 p-4 rounded-xl",children:[e.jsx("div",{className:"w-5 flex-shrink-0",children:e.jsx(ve,{className:"customtext-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-medium customtext-neutral-dark",children:s})})]},`char-${t}`))})]}),!o&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-end gap-3 md:gap-4 mt-6",children:[e.jsx(se,{type:"button",onClick:()=>window.history.back(),className:"w-full md:w-auto",children:"Regresar"}),e.jsx(H,{type:"submit",loading:L,className:"w-full md:w-auto",children:"Continuar"})]})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6",children:"Resumen"}),e.jsx("div",{className:"space-y-4 border-b-2 pb-6",children:c.map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cantidad: ",s.quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["S/ ",C(s.final_price)]})]})]},s.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["S/ ",C(d)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",C(n)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"EnvÃ­o:"}),e.jsxs("span",{children:["S/ ",C(A)]})]}),e.jsx("div",{className:"pt-4 border-t-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",C(f)]})]})}),e.jsx(H,{onClick:Z,className:"w-full mt-6",disabled:E,loading:E,children:E?"Procesando...":"Ir a Pagar"}),e.jsxs("p",{className:"text-xs md:text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas losÂ ",e.jsx("a",{href:"#",onClick:()=>U(1),className:"customtext-primary font-bold",children:"TÃ©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestraÂ ",e.jsx("a",{href:"#",onClick:()=>U(0),className:"customtext-primary font-bold",children:"PolÃ­tica de Privacidad"}),"."]})]})]})]})}function Pe({cart:c,code:i,delivery:m}){const g=(c.reduce((d,n)=>{const f=n.final_price;return d+f*n.quantity},0)/1.18).toFixed(2),u=(g*.18).toFixed(2),o=parseFloat(g)+parseFloat(u)+parseFloat(m);return e.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 py-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-10",children:e.jsxs(T.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.3},className:"text-center space-y-6",children:[e.jsx(T.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.5},className:"w-20 h-20 bg-secondary rounded-full mx-auto flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"âœ“"})}),e.jsx("h2",{className:"text-2xl md:text-3xl customtext-neutral-light animate-bounce",children:"Â¡Gracias por tu compra! ðŸŽ‰"}),e.jsx("p",{className:"customtext-neutral-dark text-3xl md:text-5xl font-bold",children:"Tu orden ha sido recibida"}),e.jsxs(T.div,{whileHover:{scale:1.05},className:"py-6 px-4 bg-secondary rounded-xl inline-block",children:[e.jsx("div",{className:"customtext-neutral-light",children:"CÃ³digo de pedido"}),e.jsx("div",{className:"customtext-neutral-dark text-xl font-bold",children:`#${i}`})]}),e.jsxs("div",{className:"space-y-6 bg-[#F7F9FB] p-6 md:p-8 rounded-xl shadow-inner",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:c.map((d,n)=>e.jsx(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:n*.2},className:"bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow duration-300",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-center sm:items-start",children:[e.jsx("div",{className:"bg-gray-50 p-3 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${d.image}`,alt:d.name,className:"w-24 h-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"text-center sm:text-left flex-1",children:[e.jsx("h3",{className:"font-semibold text-xl mb-3",children:d.name}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Marca: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:d.brand.name})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:d.quantity})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["SKU: ",e.jsx("span",{className:"customtext-neutral-dark font-medium",children:d.sku})]})]})]})]})},n))}),e.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"space-y-4 mt-6",children:[[{label:"Subtotal",value:g},{label:"IGV",value:u},{label:"EnvÃ­o",value:m}].map((d,n)=>e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"customtext-neutral-dark",children:d.label}),e.jsxs("span",{className:"font-semibold",children:["S/ ",C(d.value)]})]},n)),e.jsx("div",{className:"py-4 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-xl md:text-2xl items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",C(o)]})]})})]}),e.jsx(T.div,{className:"pt-6",whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(H,{href:"/catalogo",className:"w-full md:w-auto",children:"Seguir Comprando"})})]})]})})})}function ht({cart:c,setCart:i,user:m,ubigeos:w=[],items:g,generals:u}){const[o,d]=x.useState(1),n=c.reduce((b,N)=>b+N.final_price*N.quantity,0),f=parseFloat((n/1.18).toFixed(2)),a=parseFloat((n-f).toFixed(2)),[P,A]=x.useState(0),D=f+a+parseFloat(P),[U,z]=x.useState([]),[M,Q]=x.useState([]),[V,l]=x.useState([]);x.useEffect(()=>{const b=document.createElement("script");return b.src=I.CULQI_API,b.async=!0,b.onload=()=>{window.culqi=function(){window.Culqi.token||window.Culqi.order}},document.body.appendChild(b),()=>document.body.removeChild(b)},[]);const v=b=>{d(b),window.scrollTo({top:0,behavior:"smooth"})},L={privacy_policy:"PolÃ­ticas de privacidad",terms_conditions:"TÃ©rminos y condiciones",saleback_policy:"PolÃ­ticas de devolucion y cambio"},[B,E]=x.useState(null),_=b=>E(b),$=()=>E(null);return e.jsxs("div",{className:"min-h-screen bg-[#F7F9FB] py-4 md:py-12 px-2 sm:px-primary 2xl:px-0 2xl:max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white p-3 md:p-8 rounded-lg md:rounded-xl shadow-sm",children:[e.jsx("div",{className:"mb-4 md:mb-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-1 md:gap-4 max-w-3xl mx-auto",children:[e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${o===1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:" bg-primary text-white w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm",children:"1"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"Carrito"})]}),e.jsx("div",{className:"mb-4 lg:mb-0  flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:o>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${o>1?"customtext-primary font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm ${o>1?"bg-primary text-white":"bg-white customtext-primary"}`,children:"2"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"EnvÃ­o"})]}),e.jsx("div",{className:"mb-4 lg:mb-0  flex-1 h-[2px] bg-gray-200 relative",children:e.jsx("div",{className:"absolute inset-0 bg-primary transition-all duration-500",style:{width:o>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex flex-col items-center md:flex-row md:items-center gap-1 md:gap-2 ${o===3?"customtext-primary  font-medium":"customtext-neutral-dark"}`,children:[e.jsx("span",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center text-xs md:text-sm ${o===3?"bg-primary text-white":"bg-white customtext-primary"}`,children:"3"}),e.jsx("span",{className:"text-[10px] md:text-sm text-center",children:"ConfirmaciÃ³n"})]})]})}),o===1&&e.jsx(Ce,{cart:c,setCart:i,onContinue:()=>v(2),subTotal:f,envio:P,igv:a,totalFinal:D,openModal:_}),o===2&&e.jsx(qe,{items:g,setCode:Q,setDelivery:l,cart:c,setSale:z,setCart:i,onContinue:()=>v(3),noContinue:()=>v(1),subTotal:f,envio:P,setEnvio:A,igv:a,totalFinal:D,user:m,ubigeos:w,openModal:_}),o===3&&e.jsx(Pe,{code:M,delivery:V,cart:U,subTotal:f,envio:P,igv:a,totalFinal:D})]}),Object.keys(L).map((b,N)=>{var X;const R=L[b],W=((X=u.find(p=>p.correlative==b))==null?void 0:X.description)??"";return e.jsxs(be,{isOpen:B===N,onRequestClose:$,contentLabel:R,className:"absolute left-1/2 -translate-x-1/2 bg-white p-6 rounded-xl shadow-lg w-[95%] max-w-4xl my-8",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",children:[e.jsx("button",{onClick:$,className:"float-right text-red-500 hover:text-red-700 transition-all duration-300 ",children:e.jsx(je,{width:"2rem",strokeWidth:"4px"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:R}),e.jsx(ye,{className:"prose",html:W})]},N)})]})}export{ht as default};
