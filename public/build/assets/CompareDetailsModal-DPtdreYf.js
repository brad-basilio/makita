import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as u}from"./index-BH53Isel.js";import{C as q}from"./chevron-up-D78jyEhP.js";import{C as W}from"./chevron-down-DS-mdh9v.js";import{X as F}from"./x-DBMwyD6F.js";import{a as A}from"./index-xsH4HHeE.js";import{E as T}from"./CompareDetailsModal-Khdr67Ug.js";import U from"./html2canvas.esm-CBrSDip1.js";import{L as P}from"./loader-circle-CrvBvIt1.js";const ee=({product:t,bgImagen:d="",data:n,widthClass:w,cart:o,setCart:b,viewType:f="grid",onCompareClick:x})=>{var g,v,s;const[l,h]=u.useState(!1);return t?f==="list"?e.jsxs("div",{className:"bg-transparent w-full  rounded-xl  flex flex-row h-auto transition-all duration-200  overflow-hidden",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[e.jsxs("div",{className:`relative  flex justify-center items-center  w-1/3 min-w-[300px] max-w-[300px] p-2 ${d||"bg-white"}`,children:[t.is_new===1&&e.jsx("span",{className:"absolute top-2 right-2 md:top-2 md:right-2 bg-primary max-w-max text-white text-xs font-bold px-2 py-1 rounded-sm z-10",children:"NUEVO"}),e.jsx("img",{src:`/storage/images/item/${t.image}`,onError:r=>r.target.src="/assets/img/noimage/no_img.jpg",alt:t.name,className:"object-contain h-48 md:h-56 max-w-full mx-auto",loading:"lazy"})]}),e.jsxs("div",{className:" p-8 flex flex-col flex-grow",children:[e.jsxs("div",{className:"customtext-primary tracking-wider text-sm font-medium mb-1",children:[t.sku||"DMR200",e.jsx("span",{className:"customtext-neutral-dark !capitalize",children:((g=t==null?void 0:t.category)==null?void 0:g.name)&&` | ${(s=(v=t==null?void 0:t.category)==null?void 0:v.name)==null?void 0:s.toLowerCase()}`})]}),e.jsx("h3",{className:"customtext-neutral-dark  font-bold text-[30px] mb-2 leading-tight line-clamp-2",children:t.name||t.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-3 lg:line-clamp-3 ",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:`mt-auto pt-3 ${l?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-start",children:[e.jsx("button",{className:"flex-1 md:flex-none bg-white border border-primary customtext-primary py-2 px-6 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:x,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${t.slug}`,className:"flex-1 md:flex-none w-32 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):e.jsxs("div",{className:"bg-transparent w-full   flex flex-col h-full transition-all duration-200  overflow-hidden",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[e.jsxs("div",{className:`relative  rounded-lg aspect-square flex justify-center items-center  p-2 lg:p-4 ${d||"bg-white"}`,children:[t&&t.is_new===1&&e.jsx("span",{className:"absolute top-8 right-0 bg-primary tracking-widest text-white text-sm font-normal px-2 py-2 rounded-l-md",children:"NUEVO"}),e.jsx("img",{src:t&&t.image?`/storage/images/item/${t.image}`:"/assets/img/noimage/no_img.jpg",onError:r=>r.target.src="/assets/img/noimage/no_img.jpg",alt:t&&t.name?t.name:"",className:"object-contain aspect-square",loading:"lazy"})]}),e.jsxs("div",{className:"p-2 lg:p-5 flex flex-col flex-grow",children:[e.jsx("div",{className:"text-[#219FB9] text-sm font-medium mb-1",children:t.sku||"DMR200"}),e.jsx("h3",{className:"customtext-neutral-dark font-bold text-2xl mb-2 leading-tight line-clamp-2",children:t.name||t.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-2",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:` pt-0 ${l?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 w-full",children:[e.jsx("button",{className:"flex-1 bg-white border border-primary customtext-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:x,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${t.slug}`,className:"flex-1 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):null},te=({open:t,minimized:d,products:n,onRemove:w,onCompare:o,onMinimize:b,onRestore:f})=>{if(!n||n.length===0)return null;const x=u.useRef(null);return u.useEffect(()=>{x.current&&(x.current.style.pointerEvents="auto")},[n.length,d]),e.jsx("div",{ref:x,className:"fixed left-0 right-0 bottom-0 z-50 w-full",style:{pointerEvents:"none"},children:e.jsx("div",{className:`w-full bg-[#262626EB]  shadow-lg px-2 sm:px-6 ${d?"py-2":"py-20"}`,style:{margin:0,pointerEvents:"auto"},children:d?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("button",{onClick:f,className:" rounded text-3xl md:text-[30px]  p-2 text-white flex items-center gap-6 ",children:[e.jsx("button",{onClick:f,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(q,{size:24})}),e.jsx("span",{children:"Comparar productos"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("button",{onClick:b,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(W,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-[32px] font-medium text-white",children:"Comparar productos"}),e.jsx("p",{className:"text-base md:text-base text-white",children:"Puede añadir un máximo de cuatro artículos para comparar"})]})]}),e.jsx("button",{className:`bg-[#219FB9] text-white px-4 py-3 rounded-md text-lg tracking-wider transition-all ${n.length===4?"hover:bg-[#1786a1]":"opacity-50 cursor-not-allowed"}`,disabled:n.length!==4,onClick:()=>{o(),b&&b()},children:"Comparar"})]}),e.jsx("div",{className:"flex justify-center gap-6 md:gap-12 flex-wrap",children:n.map(l=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{className:"mt-2 mb-4 bg-primary rounded w-9 h-9 flex items-center justify-center text-white text-xl hover:bg-[#219FB9] transition-all duration-300",onClick:()=>w(l.id),children:e.jsx(F,{size:16})}),e.jsx("div",{className:"bg-white rounded-lg p-2 aspect-square",children:e.jsx("img",{src:`/storage/images/item/${l.image}`,alt:l.name,className:"h-28 object-cover aspect-square mb-2"})}),e.jsx("div",{className:"text-white text-center line-clamp-3  mt-2 max-w-[180px]",children:l.name})]},l.id))})]})})})},se=({isOpen:t,onClose:d,products:n,onRemoveProduct:w})=>{const[o,b]=u.useState([]),[f,x]=u.useState(!1),[l,h]=u.useState(!1),g=u.useRef(null);u.useEffect(()=>{t&&n&&n.length>0?(x(!0),Promise.all(n.map(s=>A.get(`/api/items/${s.id}`).then(r=>r.data).catch(()=>null))).then(s=>{b(s.filter(Boolean)),x(!1)})):b([])},[t,n]);const v=async()=>{if(!(!g.current||l))try{if(h(!0),console.log("contentRef.current:",g.current),console.log("details:",o),o.length===0){console.error("No hay productos para exportar"),h(!1);return}console.log("Capturando contenido directamente del DOM visible");const s=document.querySelectorAll(".print-hide"),r=[];s.forEach((i,c)=>{r[c]=i.style.display,i.style.display="none"}),await new Promise(i=>setTimeout(i,100));const a=await U(g.current,{scale:2,useCORS:!0,logging:!0,backgroundColor:"#ffffff",allowTaint:!0,foreignObjectRendering:!1,imageTimeout:15e3,width:Math.min(g.current.scrollWidth,1200),height:g.current.scrollHeight,onclone:i=>{const c=i.querySelector("[data-html2canvas-ignore]")||i.body;c.style.backgroundColor="#ffffff",c.style.padding="20px",c.style.maxWidth="1200px",c.style.margin="0 auto",i.querySelectorAll(".grid > div").forEach(m=>{m.style.display="block",m.style.visibility="visible",m.style.opacity="1"}),i.querySelectorAll("h3").forEach(m=>{m.style.fontSize="18px",m.style.lineHeight="1.3",m.style.wordBreak="break-word",m.style.hyphens="auto",m.style.minHeight="auto",m.style.height="auto"})}});if(s.forEach((i,c)=>{i.style.display=r[c]}),console.log("Canvas generado directamente:",{width:a.width,height:a.height,dataURL:a.toDataURL().substring(0,100)+"..."}),a.width===0||a.height===0){console.error("Canvas está vacío:",{width:a.width,height:a.height}),h(!1);return}const p=new T({orientation:"portrait",unit:"mm",format:"a4",compress:!1}),H=a.toDataURL("image/png",1);console.log("Imagen generada, tamaño:",H.length,"caracteres");const D=p.internal.pageSize.getWidth(),B=p.internal.pageSize.getHeight(),N=15,k=D-N*2,C=B-N*2,E=a.width/a.height;let y,j;E>k/C?(y=k,j=k/E):(j=C,y=C*E);const $=(D-y)/2,S=N;if(console.log("Añadiendo imagen al PDF (portrait):",{x:$,y:S,imgWidth:y,imgHeight:j}),p.addImage(H,"PNG",$,S,y,j),o&&o.length>0){const i=Math.min(o.length,4),c=y/i;o.forEach((R,M)=>{const m=M%i,L=$+m*c+c*.1,_=S+j*.7,z=c*.8;p.link(L,_,z,15,{url:`${window.location.origin}/producto/${R.slug}`})})}p.save("comparacion_productos.pdf"),console.log("PDF generado exitosamente")}catch(s){console.error("Error al generar PDF:",s)}finally{h(!1)}};return t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto ",children:e.jsxs("div",{className:"relative  overflow-hidden pt-10 bg-white",children:[e.jsx("button",{onClick:d,className:"print-hide absolute right-12 top-4  flex items-center justify-center w-10 h-10 rounded-md z-[999] bg-primary  text-white hover:bg-[#219FB9]",type:"button","aria-label":"Cerrar",children:e.jsx(F,{className:"h-5 w-5"})}),e.jsxs("div",{className:"bg-white   w-full min-w-[800px] max-w-7xl pb-8   relative max-h-[90vh] overflow-y-auto scrollbar-none shadow-2xl ",children:[!f&&e.jsxs("div",{className:"sticky pt-8 top-0 z-20 bg-white  pb-4 mb-6 rounded-t-xl shadow-md px-4 md:px-8",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-[#262626] ",children:"Comparar productos"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:v,disabled:f||l||o.length===0,className:"gap-2 print-hide flex tracking-wider items-center border border-gray-300 bg-[#219FB9]  hover:bg-primary text-white px-4 py-3 rounded-md  shadow-sm hover:brightness-100 disabled:opacity-60 disabled:cursor-not-allowed",type:"button",children:[l?e.jsx(P,{className:"h-4 w-4 animate-spin"}):"",e.jsx("span",{children:l?"Generando PDF...":"Descargar PDF"})]})})]}),e.jsx("p",{className:"text-sm text-[#262626] mt-1",children:"Puede añadir un máximo de cuatro artículos para comparar"})]}),e.jsx("div",{ref:g,className:"bg-white  rounded-lg  px-8",children:f?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(P,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"customtext-neutral-dark ",children:"Cargando detalles de productos..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50  rounded-lg",children:[e.jsx("p",{className:"customtext-neutral-dark text-lg",children:"No hay productos para comparar."}),e.jsx("p",{className:"customtext-neutral-dark text-sm mt-2",children:"Añada productos para iniciar la comparación."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:o.map(s=>e.jsxs("div",{className:"overflow-hidden h-full flex flex-col bg-white rounded-lg",children:[e.jsxs("div",{className:"relative pt-12",children:[e.jsx("button",{onClick:()=>w(s.id),className:"absolute top-2 left-0 bg-primary text-white rounded w-9 h-9 flex items-center justify-center hover:bg-secondary shadow-md print-hide",children:e.jsx(F,{size:20})}),e.jsx("div",{className:"bg-gray-100 aspect-square flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`/storage/images/item/${s.image}`,alt:s.name,className:"w-full h-full object-contain p-4"})})]}),e.jsxs("div",{className:"flex-grow flex flex-col p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-block text-[#219FB9] rounded-full text-sm font-medium",children:s.code})}),e.jsx("h3",{className:"font-bold mb-3 text-lg leading-tight customtext-neutral-dark min-h-[3rem] flex items-start",children:s.name}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",dangerouslySetInnerHTML:{__html:s==null?void 0:s.description}})}),e.jsx("a",{href:`/producto/${s.slug}`,className:"mb-4 w-full block text-center bg-primary hover:bg-secondary text-white py-3 rounded  text-base transition-all duration-200 shadow-sm hover:shadow-md print-hide",children:"Ver"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-bold text-lg tracking-wider mt-2 mb-4 text-gray-800  border-gray-200 pb-2",children:"Especificaciones técnicas"}),e.jsxs("div",{className:"space-y-1",children:[console.log(s.specifications),(()=>{let r=[];return Array.isArray(s.specifications)?r=s.specifications:s.specifications&&typeof s.specifications=="object"&&(r=Object.values(s.specifications)),r.length>0?r.slice(0,10).map((a,p)=>e.jsx("div",{className:`p-3  ${p%2===0?"bg-gray-50":"bg-white "}`,children:e.jsxs("p",{className:"text-base text-[#262626]",children:[e.jsx("span",{className:"font-bold tracking-wider text-sm  customtext-neutral-dark",children:a.key||a.name}),e.jsx("br",{})," ",a.value]})},a.key||a.name||p)):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-md",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Sin especificaciones técnicas disponibles"})})})()]})]})]})]},s.id))})}),e.jsx("div",{className:"flex justify-end mt-8 print-hide mr-8",children:e.jsx("button",{onClick:d,className:"bg-primary  text-white px-8 py-3 rounded text-lg  transition-colors",type:"button",children:"Cerrar"})})]})]})}):null};export{ee as C,te as a,se as b};
