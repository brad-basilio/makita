import{j as s}from"./AboutSimple-Cf8x2fCZ.js";import{r as m}from"./index-BH53Isel.js";import{I as Q}from"./ItemsRest-DGjwRLrz.js";import{N as Y}from"./NoResult-C9qZVva5.js";import{m as T}from"./main-BvVILmTO.js";import{C as _}from"./CardProductMakita-D9GuUtEe.js";import{X as I}from"./x-DBMwyD6F.js";import{c as D}from"./createLucideIcon-Cy5Ya80P.js";import{F as ee}from"./filter-Ci9tsc_e.js";import{C as se}from"./chevron-down-DS-mdh9v.js";import{S as te}from"./search-TwiiKGP5.js";import"./index-yBjzXJbu.js";import"./BasicRest-B3rfI5GY.js";import"./index-CMHsc23u.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=D("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=D("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),V=new Q,ae=()=>s.jsx("div",{className:"group animate-pulse transition-transform duration-300 hover:scale-105 w-1/2 lg:w-1/4 flex-shrink-0 font-font-general customtext-primary cursor-pointer",children:s.jsx("div",{className:"px-4",children:s.jsx("div",{className:"bg-white rounded-3xl",children:s.jsx("div",{className:"relative",children:s.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center bg-secondary",children:s.jsx("svg",{className:"w-10 h-10 text-gray-200","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:s.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),Ae=({items:le,data:k,filteredData:oe,cart:U,setCart:B})=>{const[y,v]=m.useState([]),[u,b]=m.useState([]),[A,C]=m.useState({}),[ne,ce]=m.useState(null),[w,P]=m.useState("grid"),[$,H]=m.useState({especificaciones:!0}),[p,F]=m.useState({specifications:{},name:T.GET.search||null}),[z,E]=m.useState(!0),L=(i,e)=>Array.isArray(i)?i.filter(r=>{var t,a,l,n,d,g;if(!r)return!1;if(e.name&&e.name.trim()!==""){const x=e.name.toLowerCase(),h=(r.name||"").toLowerCase(),o=(r.description||"").toLowerCase(),c=(r.summary||"").toLowerCase();if(!h.includes(x)&&!o.includes(x)&&!c.includes(x))return!1}if(e.specifications&&Object.keys(e.specifications).length>0){for(const[x,h]of Object.entries(e.specifications))if(h.length>0){let o=!1;if(r.specifications&&Array.isArray(r.specifications)&&r.specifications.forEach(c=>{c.type==="technical"&&c.title===x&&h.includes(c.description)&&(o=!0)}),!o){const c={Color:r.color,Textura:r.texture,SKU:r.sku,Marca:(t=r.brand)==null?void 0:t.name,Categoría:(a=r.category)==null?void 0:a.name,Subcategoría:(l=r.subcategory)==null?void 0:l.name,Colección:(n=r.collection)==null?void 0:n.name,Plataforma:(d=r.platform)==null?void 0:d.name,Familia:(g=r.family)==null?void 0:g.name};c[x]?o=h.includes(c[x]):o=h.some(f=>r.name.toLowerCase().includes(f.toLowerCase()))}if(!o)return!1}}return!0}):(console.log("filterProducts: products no es un array:",i),[]),Z=i=>{console.log("Iniciando procesamiento de especificaciones para",i.length,"productos");const e={};if(!Array.isArray(i)||i.length===0)return console.log("No hay productos para procesar o products no es un array:",i),{};i.forEach(t=>{var l,n,d,g,x,h;if(!t)return;console.log(`
=== PROCESANDO PRODUCTO: ${t.name} ===`),console.log("Especificaciones del producto:",t.specifications),t.specifications&&Array.isArray(t.specifications)?(console.log(`Procesando ${t.specifications.length} especificaciones para producto ${t.name}`),t.specifications.forEach((o,c)=>{if(console.log(`Especificación ${c+1}:`,{type:o.type,title:o.title,description:o.description}),o.type==="technical"&&o.title&&o.description){const f=o.title.trim(),j=o.description.trim();console.log(`✅ Especificación técnica válida: "${f}" = "${j}"`),f!==""&&j!==""&&j!=="null"&&(e[f]||(e[f]=new Set,console.log(`📝 Creando nueva categoría de filtro: "${f}"`)),e[f].add(j),console.log(`➕ Agregando valor "${j}" a filtro "${f}"`))}else console.log(`❌ Especificación omitida - Tipo: ${o.type}, Título: ${o.title}, Descripción: ${o.description}`)})):console.log(`⚠️ Producto ${t.name} no tiene especificaciones o no es un array:`,t.specifications);const a={Color:t.color,Textura:t.texture,Marca:(l=t.brand)==null?void 0:l.name,Categoría:(n=t.category)==null?void 0:n.name,Subcategoría:(d=t.subcategory)==null?void 0:d.name,Colección:(g=t.collection)==null?void 0:g.name,Plataforma:(x=t.platform)==null?void 0:x.name,Familia:(h=t.family)==null?void 0:h.name};if(Object.entries(a).forEach(([o,c])=>{c&&c.toString().trim()!==""&&c.toString().trim()!=="null"&&(e[o]||(e[o]=new Set),e[o].add(c.toString().trim()))}),t.specifications&&typeof t.specifications=="object"&&!Array.isArray(t.specifications)&&(console.log("Procesando especificaciones como objeto:",t.specifications),Object.entries(t.specifications).forEach(([o,c])=>{c&&c.toString().trim()!==""&&c.toString().trim()!=="null"&&(e[o]||(e[o]=new Set),e[o].add(c.toString().trim()))})),t.name){const o=q(t.name);Object.entries(o).forEach(([c,f])=>{e[c]||(e[c]=new Set),e[c].add(f)})}});const r={};return Object.entries(e).forEach(([t,a])=>{a.size>0&&(r[t]=Array.from(a).sort((l,n)=>{const d=parseFloat(l),g=parseFloat(n);return!isNaN(d)&&!isNaN(g)?d-g:l.localeCompare(n)}))}),console.log(`
🎯 RESUMEN DE ESPECIFICACIONES PROCESADAS:`),Object.entries(r).forEach(([t,a])=>{console.log(`📋 ${t}: ${a.length} valores únicos`,a)}),r},q=i=>{const e={};return[{regex:/(\d+(?:\.\d+)?)\s*w(?:att)?s?/gi,key:"Potencia (W)"},{regex:/(\d+(?:\.\d+)?)\s*kw/gi,key:"Potencia (kW)"},{regex:/(\d+(?:\.\d+)?)\s*v(?:olt)?s?/gi,key:"Tensión nominal (V)"},{regex:/(\d+(?:[,.]\d+)?)\s*-\s*(\d+(?:[,.]\d+)?)\s*rpm/gi,key:"Velocidad (RPM)"},{regex:/(\d+(?:[,.]\d+)?)\s*rpm/gi,key:"Velocidad (RPM)"},{regex:/(\d+(?:[,.]\d+)?)\s*min⁻¹/gi,key:"Velocidad (min⁻¹)"},{regex:/(\d+(?:\.\d+)?)\s*kg/gi,key:"Peso (kg)"},{regex:/(\d+(?:\.\d+)?)\s*g(?!r)/gi,key:"Peso (g)"},{regex:/(\d+(?:\.\d+)?)\s*x\s*(\d+(?:\.\d+)?)\s*x\s*(\d+(?:\.\d+)?)\s*mm/gi,key:"Dimensiones (mm)"},{regex:/(\d+(?:\.\d+)?)\s*mm/gi,key:"Medida (mm)"},{regex:/(\d+(?:\.\d+)?)\s*cm/gi,key:"Medida (cm)"},{regex:/(\d+(?:\.\d+)?)\s*nm/gi,key:"Torque (Nm)"},{regex:/(\d+(?:\.\d+)?)\s*"/gi,key:"Medida (pulgadas)"},{regex:/(\d+(?:\.\d+)?)\s*''/gi,key:"Medida (pulgadas)"},{regex:/(\d+(?:\.\d+)?)\s*l(?:itros?)?/gi,key:"Capacidad (L)"},{regex:/(\d+(?:\.\d+)?)\s*ml/gi,key:"Capacidad (ml)"},{regex:/(\d+(?:\.\d+)?)\s*ah/gi,key:"Capacidad batería (Ah)"},{regex:/(\d+(?:\.\d+)?)\s*mah/gi,key:"Capacidad batería (mAh)"},{regex:/(\d+(?:\.\d+)?)\s*bar/gi,key:"Presión (bar)"},{regex:/(\d+(?:\.\d+)?)\s*psi/gi,key:"Presión (PSI)"},{regex:/(\d+(?:\.\d+)?)\s*mbar/gi,key:"Presión (mbar)"},{regex:/(\d+(?:\.\d+)?)\s*m³\/min/gi,key:"Volumen de aire (m³/min)"},{regex:/(\d+(?:\.\d+)?)\s*cfm/gi,key:"Volumen de aire (CFM)"},{regex:/(\d+(?:\.\d+)?)\s*db\(a\)/gi,key:"Nivel sonoro (dB(A))"},{regex:/(\d+(?:\.\d+)?)\s*db/gi,key:"Nivel sonoro (dB)"},{regex:/(\d+(?:\.\d+)?)\s*hz/gi,key:"Frecuencia (Hz)"},{regex:/(\d+(?:\.\d+)?)\s*°c/gi,key:"Temperatura (°C)"},{regex:/(\d+(?:\.\d+)?)\s*°f/gi,key:"Temperatura (°F)"}].forEach(t=>{const a=[...i.matchAll(t.regex)];a.length>0&&a.forEach(l=>{let n;t.key==="Dimensiones (mm)"&&l[3]?n=`${l[1]} x ${l[2]} x ${l[3]} mm`:t.key==="Velocidad (RPM)"&&l[2]?n=`${l[1]} - ${l[2]} RPM`:n=l[1]||l[0],n&&n.toString().trim()!==""&&(e[t.key]||(e[t.key]=n.toString().trim()))})}),e},G=async()=>{E(!0);try{const i={take:1e4,skip:0,requireTotalCount:!1,with:"specifications,category,brand,collection,platform,family"};console.log("Obteniendo todos los productos..."),console.log("Parámetros enviados:",i),console.log("ItemsRest instance:",V);const e=await V.paginate(i);if(console.log("Respuesta completa de la API:",e),!e||!e.data){console.error("La respuesta de la API no tiene la estructura esperada:",e),v([]),b([]),C({});return}let r=[];e&&e.data&&(Array.isArray(e.data)?r=e.data:e.data.data&&Array.isArray(e.data.data)?r=e.data.data:e.data.items&&Array.isArray(e.data.items)&&(r=e.data.items)),console.log("Productos extraídos:",r),v(r);const t=Z(r);console.log("Especificaciones procesadas:",t),C(t);const a=O(r),l=L(a,p);b(l)}catch(i){console.error("Error fetching products:",i),v([]),b([]),C({})}finally{E(!1)}},N=()=>{const i=new URLSearchParams(window.location.search),e={},r=i.get("category"),t=i.get("platform"),a=i.get("family"),l=i.get("brand"),n=i.get("collection");return r&&(e.category=r),t&&(e.platform=t),a&&(e.family=a),l&&(e.brand=l),n&&(e.collection=n),e},O=i=>{const e=N();return Object.keys(e).length===0?i:(console.log("Aplicando filtros desde URL:",e),i.filter(r=>{var a,l,n,d,g;let t=!0;return e.category&&((a=r.category)==null?void 0:a.slug)!==e.category&&(t=!1),e.platform&&((l=r.platform)==null?void 0:l.slug)!==e.platform&&(t=!1),e.family&&((n=r.family)==null?void 0:n.slug)!==e.family&&(t=!1),e.brand&&((d=r.brand)==null?void 0:d.slug)!==e.brand&&(t=!1),e.collection&&((g=r.collection)==null?void 0:g.slug)!==e.collection&&(t=!1),t}))};m.useEffect(()=>{G()},[]),m.useEffect(()=>{if(Array.isArray(y)&&y.length>0){const i=O(y),e=L(i,p);b(e)}else b([])},[p,y]);const M=(i,e,r=null)=>{F(t=>{{const a={...t.specifications};a[r]||(a[r]=[]);const l=a[r],n=l.includes(e)?l.filter(d=>d!==e):[...l,e];return n.length===0?delete a[r]:a[r]=n,{...t,specifications:a}}})},W=i=>{H(e=>({...e,[i]:!e[i]}))},K=()=>{F({specifications:{},name:T.GET.search||null})},[R,X]=m.useState({}),[J,S]=m.useState(!1);return s.jsx("section",{className:"py-12 bg-sections-color customtext-neutral-dark",children:s.jsxs("div",{className:"mx-auto px-primary 2xl:px-0 2xl:max-w-7xl",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center mb-8 pb-4 border-b-2",children:[s.jsx("h2",{className:"text-[32px] md:text-4xl font-bold md:w-6/12",children:k==null?void 0:k.title}),s.jsxs("div",{className:"flex flex-col w-full items-center justify-end gap-4 md:flex-row md:w-5/12",children:[s.jsxs("span",{className:"block md:w-6/12 order-1 md:order-none",children:["Productos encontrados:"," ",s.jsx("strong",{children:Array.isArray(u)?u.length:0}),Array.isArray(y)&&y.length>0&&s.jsxs("span",{className:"text-gray-500 text-sm",children:[" de ",y.length]})]}),(Object.keys(p.specifications).length>0||Object.keys(N()).length>0)&&s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[Object.entries(N()).map(([i,e])=>s.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full flex items-center gap-1",children:[i,": ",e,s.jsx("span",{className:"text-xs opacity-70",children:"(URL)"})]},`url-${i}-${e}`)),Object.entries(p.specifications).map(([i,e])=>e.map(r=>s.jsxs("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full flex items-center gap-1",children:[i,": ",r,s.jsx("button",{onClick:()=>M("specifications",r,i),className:"hover:bg-primary/20 rounded-full p-0.5",children:s.jsx(I,{className:"h-3 w-3"})})]},`${i}-${r}`)))]}),s.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[s.jsx("button",{onClick:()=>P("grid"),className:`p-2 rounded-md ${w==="grid"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Vista grilla",children:s.jsx(ie,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>P("list"),className:`p-2 rounded-md ${w==="list"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Vista lista",children:s.jsx(re,{className:"h-5 w-5"})})]})]})]}),s.jsxs("div",{className:"relative flex flex-col lg:flex-row gap-4",children:[s.jsxs("button",{className:"w-full flex lg:hidden gap-2 items-center",onClick:()=>S(!0),children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Filtros"}),s.jsx(ee,{className:"h-5 w-5"})]}),s.jsxs("div",{className:`${J?"fixed inset-0  bg-white flex flex-col h-screen z-[999]":"hidden"} lg:block lg:w-3/12 lg:bg-white lg:p-4 lg:rounded-lg lg:h-max`,children:[s.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white p-4 border-b z-10 h-16 flex items-center justify-between lg:relative lg:p-0 lg:border-none lg:h-auto",children:[s.jsx("h2",{className:"text-3xl tracking-wider font-bold",children:"Filtros"}),s.jsxs("div",{className:"flex items-center gap-2",children:[Object.keys(p.specifications).length>0&&s.jsx("button",{onClick:K,className:"text-sm text-primary hover:text-primary-dark underline",children:"Limpiar"}),s.jsx("button",{className:"lg:hidden",onClick:()=>S(!1),children:s.jsx(I,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"flex-1  overflow-y-auto px-4 mt-16 pb-20 lg:mt-6 lg:pb-0 lg:px-0",children:Object.keys(A||{}).length>0?s.jsx("div",{className:"mb-6",children:Object.entries(A).map(([i,e])=>{const r=R[i]||"",t=e.filter(a=>a.toLowerCase().includes(r.toLowerCase()));return s.jsxs("div",{className:"mb-0",children:[s.jsxs("button",{onClick:()=>W(i),className:"flex  bg-[#F6F6F6] items-center justify-between w-full  p-2 lg:p-2",children:[s.jsx("span",{className:"font-medium text-lg",children:i}),s.jsx(se,{className:`h-5 w-5 transform transition-transform ${$[i]?"":"-rotate-180"}`})]}),$[i]&&s.jsxs("div",{className:"bg-white rounded-md p-3 ",children:[e.length>5&&s.jsxs("div",{className:"relative mb-3 text-[#262626]",children:[s.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3 w-3 text-[#262626]"}),s.jsx("input",{type:"text",placeholder:`Buscar en ${i.toLowerCase()}`,className:"w-full pl-8 pr-4 py-2 text-sm border rounded-lg focus:ring-1 focus:ring-primary/50 focus:outline-0",value:R[i]||"",onChange:a=>X(l=>({...l,[i]:a.target.value}))})]}),s.jsxs("div",{className:"space-y-2 max-h-[120px] overflow-y-auto",children:[t.map(a=>{var n;const l=((n=p.specifications[i])==null?void 0:n.includes(a))||!1;return s.jsxs("label",{className:"flex items-center gap-2 py-1.5 px-2  hover:bg-gray-50 cursor-pointer transition-colors ",onClick:()=>M("specifications",a,i),children:[s.jsx("div",{className:"relative h-4 w-4",children:l?s.jsx("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M6.83333 11L12.7083 5.125L11.5417 3.95833L6.83333 8.66667L4.45833 6.29167L3.29167 7.45833L6.83333 11ZM2.16667 15C1.70833 15 1.31597 14.8368 0.989583 14.5104C0.663194 14.184 0.5 13.7917 0.5 13.3333V1.66667C0.5 1.20833 0.663194 0.815972 0.989583 0.489583C1.31597 0.163194 1.70833 0 2.16667 0H13.8333C14.2917 0 14.684 0.163194 15.0104 0.489583C15.3368 0.815972 15.5 1.20833 15.5 1.66667V13.3333C15.5 13.7917 15.3368 14.184 15.0104 14.5104C14.684 14.8368 14.2917 15 13.8333 15H2.16667ZM2.16667 13.3333H13.8333V1.66667H2.16667V13.3333Z",fill:"#219FB9"})}):s.jsx("div",{className:"h-4 w-4 border-2 border-neutral-dark bg-white rounded"})}),s.jsx("span",{className:`text-sm font-medium ${l?"text-[#262626] font-bold":"text-[#262626]"}`,children:a})]},`${i}-${a}`)}),t.length===0&&r&&s.jsx("p",{className:"text-sm text-gray-500 italic py-2 text-center",children:"No se encontraron coincidencias"})]})]})]},i)})}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{children:"No hay características disponibles para filtrar"}),s.jsx("p",{className:"text-sm",children:"Los filtros se generarán cuando se carguen los productos"})]})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 h-20 flex items-center lg:hidden",children:s.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl font-bold hover:bg-primary-dark transition-colors",onClick:()=>S(!1),children:"Ver resultados"})})]}),s.jsx("div",{className:"w-full lg:w-9/12 py-4",children:z?s.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(i=>s.jsx(ae,{},i))}):s.jsx("div",{className:`flex ${w==="grid"?"items-center flex-wrap":"flex-col gap-6"} transition-all duration-300 ease-in-out`,children:Array.isArray(u)&&u.length>0?u.map(i=>s.jsx("div",{className:w==="grid"?"w-1/2 lg:w-1/3 xl:w-1/3 lg:h-[460px] lg:max-h-[460px] xl:h-[400px] xl:max-h-[400px] 2xl:h-[430px] 2xl:max-h-[430px] flex items-center justify-center":"w-full mb-2 flex items-center justify-center shadow-sm hover:shadow-lg transition-shadow duration-200",children:s.jsx(_,{data:k,product:i,viewType:w,widthClass:"w-full sm:w-full lg:w-full",cart:U,setCart:B})},i.id)):s.jsxs("div",{className:"w-full text-center py-12",children:[s.jsx(Y,{}),y.length>0&&s.jsx("p",{className:"text-gray-500 mt-4",children:"Intenta ajustar los filtros para ver más productos"})]})})})]})]})})};export{Ae as default};
