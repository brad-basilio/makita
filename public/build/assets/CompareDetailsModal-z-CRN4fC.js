import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as u}from"./index-BH53Isel.js";import{C as W}from"./chevron-up-D78jyEhP.js";import{C as I}from"./chevron-down-DS-mdh9v.js";import{X as H}from"./x-DBMwyD6F.js";import{a as V}from"./index-xsH4HHeE.js";import{E as U}from"./CompareDetailsModal-Khdr67Ug.js";import G from"./html2canvas.esm-CBrSDip1.js";import{L as D}from"./loader-circle-CrvBvIt1.js";const ae=({product:s,bgImagen:d="",data:m,widthClass:E,cart:j,setCart:b,viewType:g="grid",onCompareClick:x})=>{var w,S,t;const[o,y]=u.useState(!1);return s?g==="list"?e.jsxs("div",{className:"bg-transparent w-full  rounded-xl  flex flex-row h-auto transition-all duration-200  overflow-hidden",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[e.jsxs("div",{className:`relative  flex justify-center items-center  w-1/3 min-w-[300px] max-w-[300px] p-2 ${d||"bg-white"}`,children:[s.is_new===1&&e.jsx("span",{className:"absolute top-2 right-2 md:top-2 md:right-2 bg-primary max-w-max text-white text-xs font-bold px-2 py-1 rounded-sm z-10",children:"NUEVO"}),e.jsx("img",{src:`/storage/images/item/${s.image}`,onError:i=>i.target.src="/assets/img/noimage/no_img.jpg",alt:s.name,className:"object-contain h-48 md:h-56 max-w-full mx-auto",loading:"lazy"})]}),e.jsxs("div",{className:" p-8 flex flex-col flex-grow",children:[e.jsxs("div",{className:"customtext-primary tracking-wider text-sm font-medium mb-1",children:[s.sku||"DMR200",e.jsx("span",{className:"customtext-neutral-dark !capitalize",children:((w=s==null?void 0:s.category)==null?void 0:w.name)&&` | ${(t=(S=s==null?void 0:s.category)==null?void 0:S.name)==null?void 0:t.toLowerCase()}`})]}),e.jsx("h3",{className:"customtext-neutral-dark  font-bold text-[30px] mb-2 leading-tight line-clamp-2",children:s.name||s.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-3 lg:line-clamp-3 ",dangerouslySetInnerHTML:{__html:s.description}}),e.jsx("div",{className:`mt-auto pt-3 ${o?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-start",children:[e.jsx("button",{className:"flex-1 md:flex-none bg-white border border-primary customtext-primary py-2 px-6 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:x,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${s.slug}`,className:"flex-1 md:flex-none w-32 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):e.jsxs("div",{className:"bg-transparent w-full   flex flex-col h-full transition-all duration-200  overflow-hidden",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[e.jsxs("div",{className:`relative  rounded-lg aspect-square flex justify-center items-center  p-2 lg:p-4 ${d||"bg-white"}`,children:[s&&s.is_new===1&&e.jsx("span",{className:"absolute top-8 right-0 bg-primary tracking-widest text-white text-sm font-normal px-2 py-2 rounded-l-md",children:"NUEVO"}),e.jsx("img",{src:s&&s.image?`/storage/images/item/${s.image}`:"/assets/img/noimage/no_img.jpg",onError:i=>i.target.src="/assets/img/noimage/no_img.jpg",alt:s&&s.name?s.name:"",className:"object-contain aspect-square",loading:"lazy"})]}),e.jsxs("div",{className:"p-2 lg:p-5 flex flex-col flex-grow",children:[e.jsx("div",{className:"text-[#219FB9] text-sm font-medium mb-1",children:s.sku||"DMR200"}),e.jsx("h3",{className:"customtext-neutral-dark font-bold text-2xl mb-2 leading-tight line-clamp-2",children:s.name||s.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-2",dangerouslySetInnerHTML:{__html:s.description}}),e.jsx("div",{className:` pt-0 ${o?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 w-full",children:[e.jsx("button",{className:"flex-1 bg-white border border-primary customtext-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:x,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${s.slug}`,className:"flex-1 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):null},ie=({open:s,minimized:d,products:m,onRemove:E,onCompare:j,onMinimize:b,onRestore:g})=>{if(!m||m.length===0)return null;const x=u.useRef(null);return u.useEffect(()=>{x.current&&(x.current.style.pointerEvents="auto")},[m.length,d]),e.jsx("div",{ref:x,className:"fixed left-0 right-0 bottom-0 z-50 w-full",style:{pointerEvents:"none"},children:e.jsx("div",{className:`w-full bg-[#262626EB]  shadow-lg px-2 sm:px-6 ${d?"py-2":"py-20"}`,style:{margin:0,pointerEvents:"auto"},children:d?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("button",{onClick:g,className:" rounded text-3xl md:text-[30px]  p-2 text-white flex items-center gap-6 ",children:[e.jsx("button",{onClick:g,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(W,{size:24})}),e.jsx("span",{children:"Comparar productos"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("button",{onClick:b,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(I,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-[32px] font-medium text-white",children:"Comparar productos"}),e.jsx("p",{className:"text-base md:text-base text-white",children:"Puede a√±adir un m√°ximo de cuatro art√≠culos para comparar"})]})]}),e.jsx("button",{className:`bg-[#219FB9] text-white px-4 py-3 rounded-md text-lg tracking-wider transition-all ${m.length===4?"hover:bg-[#1786a1]":"opacity-50 cursor-not-allowed"}`,disabled:m.length!==4,onClick:()=>{j(),b&&b()},children:"Comparar"})]}),e.jsx("div",{className:"flex justify-center gap-6 md:gap-12 flex-wrap",children:m.map(o=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{className:"mt-2 mb-4 bg-primary rounded w-9 h-9 flex items-center justify-center text-white text-xl hover:bg-[#219FB9] transition-all duration-300",onClick:()=>E(o.id),children:e.jsx(H,{size:16})}),e.jsx("div",{className:"bg-white rounded-lg p-2 aspect-square",children:e.jsx("img",{src:`/storage/images/item/${o.image}`,alt:o.name,className:"h-28 object-cover aspect-square mb-2"})}),e.jsx("div",{className:"text-white text-center line-clamp-3  mt-2 max-w-[180px]",children:o.name})]},o.id))})]})})})},le=({isOpen:s,onClose:d,products:m,onRemoveProduct:E})=>{const[j,b]=u.useState([]),[g,x]=u.useState(!1),[o,y]=u.useState(!1),w=u.useRef(null);u.useEffect(()=>{s&&m&&m.length>0?(x(!0),Promise.all(m.map(t=>V.get(`/api/items/${t.id}`).then(i=>i.data).catch(()=>null))).then(t=>{b(t.filter(Boolean)),x(!1)})):b([])},[s,m]);const S=async()=>{if(!(!w.current||o))try{y(!0);const t=w.current.cloneNode(!0);t.style.width="800px",t.style.paddingLeft="40px",t.style.paddingRight="40px",t.style.paddingTop="10px",t.style.paddingBottom="10px",t.style.backgroundColor="#ffffff";const i=[];t.querySelectorAll('a[href*="/producto/"]').forEach((l,c)=>{const n=l.getAttribute("href");if(n){const a=n.startsWith("http")?n:`${window.location.origin}${n}`;i.push({url:a,index:c});const r=document.createElement("a");r.href=a,r.innerHTML="üîó Ver detalles completos",r.style.cssText=`
            display: block;
            width: 80%;
            text-align: center;
            background-color: #0066cc;
            color: white;
            text-decoration: none;
            padding: 12px 16px;
            margin: 12px auto;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            box-sizing: border-box;
          `,l.parentNode.replaceChild(r,l)}}),t.querySelectorAll(".print-hide:not(a[href*='/producto/'])").forEach(l=>l.remove()),t.querySelectorAll(".space-y-2").forEach(l=>{const c=l.querySelectorAll('div[class*="p-3"]'),n=Math.min(5,c.length);for(let a=n;a<c.length;a++)c[a]&&c[a].remove();if(c.length>n){const a=document.createElement("div");a.className="p-3 rounded-md bg-gray-100 text-center",a.innerHTML=`
            <p class="font-medium text-sm text-gray-600">
              ... y ${c.length-n} especificaciones m√°s
            </p>
            <p class="text-xs text-gray-500 mt-1">
              Ver producto completo para m√°s detalles
            </p>
          `,l.appendChild(a)}});const N=document.createElement("div");N.style.position="absolute",N.style.left="-9999px",N.style.top="0",N.appendChild(t),document.body.appendChild(N);const p=document.createElement("h1");p.textContent="Comparaci√≥n de Productos",p.style.textAlign="center",p.style.fontSize="32px",p.style.fontWeight="bold",p.style.marginBottom="20px",p.style.color="#333",p.style.fontFamily="Arial, sans-serif",t.insertBefore(p,t.firstChild),await new Promise(l=>setTimeout(l,200));const h=await G(t,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",allowTaint:!0,windowWidth:t.scrollWidth,windowHeight:t.scrollHeight});document.body.removeChild(N);const L=h.toDataURL("image/jpeg",.5),f=new U({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),P=f.internal.pageSize.getWidth(),M=f.internal.pageSize.getHeight(),C=P-20,k=h.height*C/h.width,F=M-20;if(k<=F)f.addImage(L,"JPEG",10,10,C,k,void 0,"FAST"),i.length>0&&i.forEach((l,c)=>{const n=80+c*90,a=15,r=C-30;f.link(20,n,r,a,{url:l.url})});else{let l=k,c=0,n=0;for(;l>0;){n>0&&f.addPage();const a=Math.min(l,F),r=document.createElement("canvas"),z=r.getContext("2d");r.width=h.width,r.height=h.height*a/k,z.drawImage(h,0,h.height*c/k,h.width,h.height*a/k,0,0,r.width,r.height);const T=r.toDataURL("image/jpeg",.8);f.addImage(T,"JPEG",10,10,C,C*r.height/r.width,void 0,"FAST"),n===0&&i.length>0&&i.forEach((A,R)=>{const B=80+R*90,_=15,q=C-30;B<F&&f.link(20,B,q,_,{url:A.url})}),l-=a,c+=a,n++}}f.save("comparacion_productos.pdf")}catch(t){console.error("Error al generar PDF:",t)}finally{y(!1)}};return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto ",children:e.jsxs("div",{className:"relative  overflow-hidden pt-10 bg-white",children:[e.jsx("button",{onClick:d,className:"print-hide absolute right-12 top-4  flex items-center justify-center w-10 h-10 rounded-md z-[999] bg-primary  text-white hover:bg-[#219FB9]",type:"button","aria-label":"Cerrar",children:e.jsx(H,{className:"h-5 w-5"})}),e.jsxs("div",{className:"bg-white   w-full min-w-[800px] max-w-7xl pb-8   relative max-h-[90vh] overflow-y-auto scrollbar-none shadow-2xl ",children:[!g&&e.jsxs("div",{className:"sticky pt-8 top-0 z-20 bg-white  pb-4 mb-6 rounded-t-xl shadow-md px-4 md:px-8",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-[#262626] ",children:"Comparar productos"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:S,disabled:g||o||j.length===0,className:"gap-2 print-hide flex tracking-wider items-center border border-gray-300 bg-[#219FB9]  hover:bg-primary text-white px-4 py-3 rounded-md  shadow-sm hover:brightness-100 disabled:opacity-60 disabled:cursor-not-allowed",type:"button",children:[o?e.jsx(D,{className:"h-4 w-4 animate-spin"}):"",e.jsx("span",{children:o?"Generando PDF...":"Descargar PDF"})]})})]}),e.jsx("p",{className:"text-sm text-[#262626] mt-1",children:"Puede a√±adir un m√°ximo de cuatro art√≠culos para comparar"})]}),e.jsx("div",{ref:w,className:"bg-white  rounded-lg  px-8",children:g?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(D,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"customtext-neutral-dark ",children:"Cargando detalles de productos..."})]}):j.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50  rounded-lg",children:[e.jsx("p",{className:"customtext-neutral-dark text-lg",children:"No hay productos para comparar."}),e.jsx("p",{className:"customtext-neutral-dark text-sm mt-2",children:"A√±ada productos para iniciar la comparaci√≥n."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(t=>e.jsxs("div",{className:"overflow-hidden h-full flex flex-col bg-white  rounded-lg",children:[e.jsxs("div",{className:"relative pt-12",children:[e.jsx("button",{onClick:()=>E(t.id),className:"absolute top-2 left-0 bg-primary  text-white  rounded w-9 h-9 flex items-center justify-center hover:bg-secondary shadow-md print-hide",children:e.jsx(H,{size:20})}),e.jsx("div",{className:"bg-gray-100  aspect-square flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`/storage/images/item/${t.image}`,alt:t.name,className:"w-full h-full object-contain p-4"})})]}),e.jsxs("div",{className:"flex-grow flex flex-col py-4",children:[e.jsx("div",{className:"mb-0",children:e.jsx("span",{className:"inline-block   text-[#219FB9] rounded-full text-md",children:t.code})}),e.jsx("h3",{className:"font-bold  mb-3 line-clamp-2 text-2xl whitespace-pre-line customtext-neutral-dark",children:t.name}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",dangerouslySetInnerHTML:{__html:t==null?void 0:t.description}})}),e.jsx("a",{href:`/producto/${t.slug}`,className:"mb-4 w-full block text-center bg-primary hover:bg-secondary text-white py-3 rounded  text-base transition-all duration-200 shadow-sm hover:shadow-md print-hide",children:"Ver"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-bold text-lg tracking-wider mt-2 mb-4 text-gray-800  border-gray-200 pb-2",children:"Especificaciones t√©cnicas"}),e.jsxs("div",{className:"space-y-1",children:[console.log(t.specifications),(()=>{let i=[];return Array.isArray(t.specifications)?i=t.specifications:t.specifications&&typeof t.specifications=="object"&&(i=Object.values(t.specifications)),i.length>0?i.slice(0,10).map((v,$)=>e.jsx("div",{className:`p-3  ${$%2===0?"bg-gray-50":"bg-white "}`,children:e.jsxs("p",{className:"text-base text-[#262626]",children:[e.jsx("span",{className:"font-bold tracking-wider text-sm  customtext-neutral-dark",children:v.key||v.name}),e.jsx("br",{})," ",v.value]})},v.key||v.name||$)):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-md",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Sin especificaciones t√©cnicas disponibles"})})})()]})]})]})]},t.id))})}),e.jsx("div",{className:"flex justify-end mt-8 print-hide mr-8",children:e.jsx("button",{onClick:d,className:"bg-primary  text-white px-8 py-3 rounded text-lg font-bold transition-colors",type:"button",children:"Cerrar"})})]})]})}):null};export{ae as C,ie as a,le as b};
