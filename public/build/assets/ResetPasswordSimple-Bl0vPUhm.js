import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as s}from"./index-BH53Isel.js";import{J as j}from"./JSEncrypt-BF8AmNNu.js";import{G as f}from"./Global-ErywZRdd.js";import{S as p}from"./ProductCard-Ap6bpF1Q.js";import{m as x}from"./main-BvVILmTO.js";import{A as g}from"./AuthClientRest-CFrcbUFf.js";import"./index-yBjzXJbu.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-CMHsc23u.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";const y="/build/reset-password.png";function G(){const r=new j;r.setPublicKey(f.PUBLIC_RSA_KEY);const[a,l]=s.useState(!1),i=s.useRef(),c=s.useRef(),m=s.useRef(),u=s.useRef();s.useEffect(()=>{x.GET.message&&p.fire({icon:"info",title:"Mensaje",text:x.GET.message,showConfirmButton:!1,timer:3e3})},[null]),s.useEffect(()=>{const o=new URLSearchParams(window.location.search),t=o.get("token"),n=o.get("email");t?(m.current=t,u.current=n):console.error("No se encontró el token en la URL.")},[]);const h=async o=>{o.preventDefault(),l(!0);const t=i.current.value,n=m.current,d=c.current.value,w=u.current;if(t!==d)return p.fire({icon:"error",title:"Error",text:"Las contraseñas no coinciden",showConfirmButton:!1,timer:3e3});const b={email:r.encrypt(w),password:r.encrypt(t),token:n,confirmation:r.encrypt(d)};if(!await g.resetPassword(b))return l(!1);window.location.href="/"};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#F7F9FB] px-primary 2xl:px-0  ",children:e.jsx("div",{className:"2xl:max-w-7xl w-full mx-auto ",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:min-h-[600px] ",children:[e.jsxs("div",{className:"hidden lg:block lg:w-1/2 relative",children:[e.jsx("img",{src:`/assets/${f.APP_CORRELATIVE}/restore.png`||y,alt:"Imagen decorativa",className:"absolute inset-0 w-full  h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"})]}),e.jsx("div",{className:"w-full lg:w-1/2 px-6 py-12 sm:px-12 lg:px-16",children:e.jsxs("div",{className:"max-w-md mx-auto h-full flex flex-col justify-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"customtext-primary font-medium",children:"Nueva contraseña"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Restaurar contraseña"}),e.jsx("p",{className:"customtext-neutral-light",children:"Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos."})]}),e.jsxs("form",{className:"space-y-4 mt-4",onSubmit:h,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",htmlFor:"password",children:"Contraseña"}),e.jsx("input",{id:"password",name:"password",ref:i,type:"password",className:"w-full px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm mb-1 customtext-neutral-dark",htmlFor:"confirm-password",children:"Confirmar contraseña"}),e.jsx("input",{id:"confirm-password",name:"confirm-password",ref:c,type:"password",className:"w-full px-4 py-3 border customtext-neutral-dark  border-neutral-ligth rounded-xl focus:ring-0 focus:outline-0   transition-all duration-300",required:!0,disabled:a})]}),e.jsxs("button",{disabled:a,type:"submit",className:"w-full rounded-xl font-semibold  bg-primary px-4 py-3 text-white hover:opacity-90 focus:outline-none focus:ring-2 transition-all duration-300 flex items-center justify-center",children:[a?e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):null,a?"Procesando...":"Restablecer contraseña"]})]})]})})]})})})})}export{G as default};
