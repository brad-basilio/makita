import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as x}from"./index-BH53Isel.js";import{I as Y}from"./ItemsRest-DGjwRLrz.js";import{N as _}from"./NoResult-C9qZVva5.js";import{m as T}from"./main-BvVILmTO.js";import{C as ee}from"./CardProductMakita-D9GuUtEe.js";import{X as R}from"./x-DBMwyD6F.js";import{c as B}from"./createLucideIcon-Cy5Ya80P.js";import{F as I}from"./filter-Ci9tsc_e.js";import{S as V}from"./search-TwiiKGP5.js";import{C as se}from"./chevron-down-DS-mdh9v.js";import{T as te}from"./tag-BY9rARtP.js";import"./index-yBjzXJbu.js";import"./BasicRest-B3rfI5GY.js";import"./index-CMHsc23u.js";import"./index-rimy3MAc.js";import"./index-fNjTmf9T.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=B("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=B("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),z=new Y,re=()=>e.jsx("div",{className:"group animate-pulse transition-transform duration-300 hover:scale-105 w-1/2 lg:w-1/4 flex-shrink-0 font-font-general customtext-primary cursor-pointer",children:e.jsx("div",{className:"px-4",children:e.jsx("div",{className:"bg-white rounded-3xl",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"aspect-square bg-gray-300 rounded-3xl overflow-hidden flex items-center justify-center bg-secondary",children:e.jsx("svg",{className:"w-10 h-10 text-gray-200","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 18",children:e.jsx("path",{d:"M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"})})})})})})}),Pe=({items:ne,data:w,filteredData:le,cart:D,setCart:U})=>{const[p,k]=x.useState([]),[u,b]=x.useState([]),[A,N]=x.useState({}),[oe,ce]=x.useState(null),[j,P]=x.useState("grid"),[F,q]=x.useState({especificaciones:!0}),[h,L]=x.useState({specifications:{},name:T.GET.search||null}),[G,O]=x.useState(!0),E=(i,s)=>Array.isArray(i)?i.filter(t=>{var a,r,n,l,m,g;if(!t)return!1;if(s.name&&s.name.trim()!==""){const d=s.name.toLowerCase(),f=(t.name||"").toLowerCase(),c=(t.description||"").toLowerCase(),o=(t.summary||"").toLowerCase();if(!f.includes(d)&&!c.includes(d)&&!o.includes(d))return!1}if(s.specifications&&Object.keys(s.specifications).length>0){for(const[d,f]of Object.entries(s.specifications))if(f.length>0){let c=!1;if(t.specifications&&Array.isArray(t.specifications)&&t.specifications.forEach(o=>{o.type==="technical"&&o.title===d&&f.includes(o.description)&&(c=!0)}),!c){const o={Color:t.color,Textura:t.texture,SKU:t.sku,Marca:(a=t.brand)==null?void 0:a.name,Categoría:(r=t.category)==null?void 0:r.name,Subcategoría:(n=t.subcategory)==null?void 0:n.name,Colección:(l=t.collection)==null?void 0:l.name,Plataforma:(m=t.platform)==null?void 0:m.name,Familia:(g=t.family)==null?void 0:g.name};o[d]?c=f.includes(o[d]):c=f.some(y=>t.name.toLowerCase().includes(y.toLowerCase()))}if(!c)return!1}}return!0}):(console.log("filterProducts: products no es un array:",i),[]),H=i=>{console.log("Iniciando procesamiento de especificaciones para",i.length,"productos");const s={};if(!Array.isArray(i)||i.length===0)return console.log("No hay productos para procesar o products no es un array:",i),{};i.forEach(a=>{var n,l,m,g,d,f;if(!a)return;const r={Color:a.color,Textura:a.texture,SKU:a.sku,Marca:(n=a.brand)==null?void 0:n.name,Categoría:(l=a.category)==null?void 0:l.name,Subcategoría:(m=a.subcategory)==null?void 0:m.name,Colección:(g=a.collection)==null?void 0:g.name,Plataforma:(d=a.platform)==null?void 0:d.name,Familia:(f=a.family)==null?void 0:f.name};if(Object.entries(r).forEach(([c,o])=>{o&&o.toString().trim()!==""&&o.toString().trim()!=="null"&&(s[c]||(s[c]=new Set),s[c].add(o.toString().trim()))}),a.specifications&&Array.isArray(a.specifications)?(console.log(`Procesando especificaciones para producto ${a.name}:`,a.specifications),a.specifications.forEach(c=>{if(c.type==="technical"&&c.title&&c.description){const o=c.title.trim(),y=c.description.trim();console.log(`Especificación técnica encontrada: ${o} = ${y}`),o!==""&&y!==""&&y!=="null"&&(s[o]||(s[o]=new Set),s[o].add(y))}})):console.log(`Producto ${a.name} no tiene especificaciones o no es un array:`,a.specifications),a.specifications&&typeof a.specifications=="object"&&!Array.isArray(a.specifications)&&Object.entries(a.specifications).forEach(([c,o])=>{o&&o.toString().trim()!==""&&o.toString().trim()!=="null"&&(s[c]||(s[c]=new Set),s[c].add(o.toString().trim()))}),a.name){const c=Z(a.name);Object.entries(c).forEach(([o,y])=>{s[o]||(s[o]=new Set),s[o].add(y)})}});const t={};return Object.entries(s).forEach(([a,r])=>{r.size>0&&(t[a]=Array.from(r).sort((n,l)=>{const m=parseFloat(n),g=parseFloat(l);return!isNaN(m)&&!isNaN(g)?m-g:n.localeCompare(l)}))}),console.log("Especificaciones procesadas:",t),t},Z=i=>{const s={};return[{regex:/(\d+(?:\.\d+)?)\s*w(?:att)?s?/gi,key:"Potencia (W)"},{regex:/(\d+(?:\.\d+)?)\s*kw/gi,key:"Potencia (kW)"},{regex:/(\d+(?:\.\d+)?)\s*v(?:olt)?s?/gi,key:"Tensión nominal (V)"},{regex:/(\d+(?:[,.]\d+)?)\s*-\s*(\d+(?:[,.]\d+)?)\s*rpm/gi,key:"Velocidad (RPM)"},{regex:/(\d+(?:[,.]\d+)?)\s*rpm/gi,key:"Velocidad (RPM)"},{regex:/(\d+(?:[,.]\d+)?)\s*min⁻¹/gi,key:"Velocidad (min⁻¹)"},{regex:/(\d+(?:\.\d+)?)\s*kg/gi,key:"Peso (kg)"},{regex:/(\d+(?:\.\d+)?)\s*g(?!r)/gi,key:"Peso (g)"},{regex:/(\d+(?:\.\d+)?)\s*x\s*(\d+(?:\.\d+)?)\s*x\s*(\d+(?:\.\d+)?)\s*mm/gi,key:"Dimensiones (mm)"},{regex:/(\d+(?:\.\d+)?)\s*mm/gi,key:"Medida (mm)"},{regex:/(\d+(?:\.\d+)?)\s*cm/gi,key:"Medida (cm)"},{regex:/(\d+(?:\.\d+)?)\s*nm/gi,key:"Torque (Nm)"},{regex:/(\d+(?:\.\d+)?)\s*"/gi,key:"Medida (pulgadas)"},{regex:/(\d+(?:\.\d+)?)\s*''/gi,key:"Medida (pulgadas)"},{regex:/(\d+(?:\.\d+)?)\s*l(?:itros?)?/gi,key:"Capacidad (L)"},{regex:/(\d+(?:\.\d+)?)\s*ml/gi,key:"Capacidad (ml)"},{regex:/(\d+(?:\.\d+)?)\s*ah/gi,key:"Capacidad batería (Ah)"},{regex:/(\d+(?:\.\d+)?)\s*mah/gi,key:"Capacidad batería (mAh)"},{regex:/(\d+(?:\.\d+)?)\s*bar/gi,key:"Presión (bar)"},{regex:/(\d+(?:\.\d+)?)\s*psi/gi,key:"Presión (PSI)"},{regex:/(\d+(?:\.\d+)?)\s*mbar/gi,key:"Presión (mbar)"},{regex:/(\d+(?:\.\d+)?)\s*m³\/min/gi,key:"Volumen de aire (m³/min)"},{regex:/(\d+(?:\.\d+)?)\s*cfm/gi,key:"Volumen de aire (CFM)"},{regex:/(\d+(?:\.\d+)?)\s*db\(a\)/gi,key:"Nivel sonoro (dB(A))"},{regex:/(\d+(?:\.\d+)?)\s*db/gi,key:"Nivel sonoro (dB)"},{regex:/(\d+(?:\.\d+)?)\s*hz/gi,key:"Frecuencia (Hz)"},{regex:/(\d+(?:\.\d+)?)\s*°c/gi,key:"Temperatura (°C)"},{regex:/(\d+(?:\.\d+)?)\s*°f/gi,key:"Temperatura (°F)"}].forEach(a=>{const r=[...i.matchAll(a.regex)];r.length>0&&r.forEach(n=>{let l;a.key==="Dimensiones (mm)"&&n[3]?l=`${n[1]} x ${n[2]} x ${n[3]} mm`:a.key==="Velocidad (RPM)"&&n[2]?l=`${n[1]} - ${n[2]} RPM`:l=n[1]||n[0],l&&l.toString().trim()!==""&&(s[a.key]||(s[a.key]=l.toString().trim()))})}),s},K=async()=>{O(!0);try{const i={take:1e4,skip:0,requireTotalCount:!1};console.log("Obteniendo todos los productos..."),console.log("Parámetros enviados:",i),console.log("ItemsRest instance:",z);const s=await z.paginate(i);if(console.log("Respuesta completa de la API:",s),!s||!s.data){console.error("La respuesta de la API no tiene la estructura esperada:",s),k([]),b([]),N({});return}let t=[];s&&s.data&&(Array.isArray(s.data)?t=s.data:s.data.data&&Array.isArray(s.data.data)?t=s.data.data:s.data.items&&Array.isArray(s.data.items)&&(t=s.data.items)),console.log("Productos extraídos:",t),k(t);const a=H(t);console.log("Especificaciones procesadas:",a),N(a);const r=$(t),n=E(r,h);b(n)}catch(i){console.error("Error fetching products:",i),k([]),b([]),N({})}finally{O(!1)}},v=()=>{const i=new URLSearchParams(window.location.search),s={},t=i.get("category"),a=i.get("platform"),r=i.get("family"),n=i.get("brand"),l=i.get("collection");return t&&(s.category=t),a&&(s.platform=a),r&&(s.family=r),n&&(s.brand=n),l&&(s.collection=l),s},$=i=>{const s=v();return Object.keys(s).length===0?i:(console.log("Aplicando filtros desde URL:",s),i.filter(t=>{var r,n,l,m,g;let a=!0;return s.category&&((r=t.category)==null?void 0:r.slug)!==s.category&&(a=!1),s.platform&&((n=t.platform)==null?void 0:n.slug)!==s.platform&&(a=!1),s.family&&((l=t.family)==null?void 0:l.slug)!==s.family&&(a=!1),s.brand&&((m=t.brand)==null?void 0:m.slug)!==s.brand&&(a=!1),s.collection&&((g=t.collection)==null?void 0:g.slug)!==s.collection&&(a=!1),a}))};x.useEffect(()=>{K()},[]),x.useEffect(()=>{if(Array.isArray(p)&&p.length>0){const i=$(p),s=E(i,h);b(s)}else b([])},[h,p]);const C=(i,s,t=null)=>{L(a=>{if(i==="specifications"){const r={...a.specifications};r[t]||(r[t]=[]);const n=r[t],l=n.includes(s)?n.filter(m=>m!==s):[...n,s];return l.length===0?delete r[t]:r[t]=l,{...a,specifications:r}}return{...a,[i]:s}})},W=i=>{q(s=>({...s,[i]:!s[i]}))},X=()=>{L({specifications:{},name:T.GET.search||null})},[M,J]=x.useState({}),[Q,S]=x.useState(!1);return e.jsx("section",{className:"py-12 bg-sections-color customtext-neutral-dark",children:e.jsxs("div",{className:"mx-auto px-primary 2xl:px-0 2xl:max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center mb-8 pb-4 border-b-2",children:[e.jsx("h2",{className:"text-[32px] md:text-4xl font-bold md:w-6/12",children:w==null?void 0:w.title}),e.jsxs("div",{className:"flex flex-col w-full items-center justify-end gap-4 md:flex-row md:w-5/12",children:[e.jsxs("span",{className:"block md:w-6/12 order-1 md:order-none",children:["Productos encontrados:"," ",e.jsx("strong",{children:Array.isArray(u)?u.length:0}),Array.isArray(p)&&p.length>0&&e.jsxs("span",{className:"text-gray-500 text-sm",children:[" de ",p.length]})]}),(Object.keys(h.specifications).length>0||Object.keys(v()).length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[Object.entries(v()).map(([i,s])=>e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full flex items-center gap-1",children:[i,": ",s,e.jsx("span",{className:"text-xs opacity-70",children:"(URL)"})]},`url-${i}-${s}`)),Object.entries(h.specifications).map(([i,s])=>s.map(t=>e.jsxs("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full flex items-center gap-1",children:[i,": ",t,e.jsx("button",{onClick:()=>C("specifications",t,i),className:"hover:bg-primary/20 rounded-full p-0.5",children:e.jsx(R,{className:"h-3 w-3"})})]},`${i}-${t}`)))]}),e.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[e.jsx("button",{onClick:()=>P("grid"),className:`p-2 rounded-md ${j==="grid"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Vista grilla",children:e.jsx(ae,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>P("list"),className:`p-2 rounded-md ${j==="list"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Vista lista",children:e.jsx(ie,{className:"h-5 w-5"})})]})]})]}),e.jsxs("div",{className:"relative flex flex-col lg:flex-row gap-4",children:[e.jsxs("button",{className:"w-full flex lg:hidden gap-2 items-center",onClick:()=>S(!0),children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Filtros"}),e.jsx(I,{className:"h-5 w-5"})]}),e.jsxs("div",{className:`${Q?"fixed inset-0  bg-white flex flex-col h-screen z-[999]":"hidden"} lg:block lg:w-3/12 lg:bg-white lg:p-4 lg:rounded-lg lg:h-max`,children:[e.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white p-4 border-b z-10 h-16 flex items-center justify-between lg:relative lg:p-0 lg:border-none lg:h-auto",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtros"}),e.jsxs("div",{className:"flex items-center gap-2",children:[Object.keys(h.specifications).length>0&&e.jsx("button",{onClick:X,className:"text-sm text-primary hover:text-primary-dark underline",children:"Limpiar"}),e.jsx("button",{className:"lg:hidden",onClick:()=>S(!1),children:e.jsx(R,{className:"h-5 w-5"})}),e.jsx(I,{className:"hidden lg:block h-5 w-5"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 mt-16 pb-20 lg:mt-0 lg:pb-0 lg:px-0",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-1 focus:ring-primary/50 focus:outline-0",value:h.name||"",onChange:i=>C("name",i.target.value)})]})}),Object.keys(A||{}).length>0?e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>W("especificaciones"),className:"flex items-center justify-between w-full mb-4 p-2 lg:p-0",children:[e.jsx("span",{className:"font-medium",children:"Características"}),e.jsx(se,{className:`h-5 w-5 transform transition-transform ${F.especificaciones?"":"-rotate-180"}`})]}),F.especificaciones&&e.jsx("div",{className:"space-y-6",children:()=>{const i={"Energía y Alimentación":["Voltaje de batería","Capacidad de batería","Potencia","Frecuencia"],"Dimensiones y Peso":["Peso","Dimensiones","Longitud","Ancho","Alto"],Rendimiento:["Velocidad","Torque","Presión de aire","Volumen de aire","Nivel de presión sonora"],Capacidades:["Capacidad del tanque de polvo","Sellado de succión","Potencia de succión","Capacidad"],Otros:[]},s={};return Object.keys(i).forEach(t=>{s[t]={}}),Object.entries(A).forEach(([t,a])=>{let r=!1;for(const[n,l]of Object.entries(i))if(l.some(m=>t.toLowerCase().includes(m.toLowerCase()))){s[n][t]=a,r=!0;break}r||(s.Otros[t]=a)}),Object.entries(s).map(([t,a])=>Object.keys(a).length===0?null:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),t,e.jsxs("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:[Object.keys(a).length," filtros"]})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([r,n])=>{var g;const l=M[r]||"",m=n.filter(d=>d.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"bg-white rounded-md p-3 border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-sm text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),r,e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:n.length}),((g=h.specifications[r])==null?void 0:g.length)>0&&e.jsxs("span",{className:"text-xs text-primary bg-primary/10 px-2 py-1 rounded-full",children:[h.specifications[r].length," seleccionados"]})]}),n.length>5&&e.jsxs("div",{className:"relative mb-3",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3 w-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:`Buscar en ${r.toLowerCase()}`,className:"w-full pl-8 pr-4 py-2 text-sm border rounded-lg focus:ring-1 focus:ring-primary/50 focus:outline-0",value:M[r]||"",onChange:d=>J(f=>({...f,[r]:d.target.value}))})]}),e.jsxs("div",{className:"space-y-2 max-h-[120px] overflow-y-auto",children:[m.map(d=>{var c;const f=((c=h.specifications[r])==null?void 0:c.includes(d))||!1;return e.jsxs("label",{className:`flex items-center gap-2 py-1.5 px-2 rounded-md hover:bg-gray-50 cursor-pointer transition-colors ${f?"bg-primary/5 border border-primary/20":""}`,children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 accent-primary",onChange:()=>C("specifications",d,r),checked:f}),e.jsx("span",{className:`text-sm ${f?"text-primary font-medium":"text-gray-700"}`,children:d})]},`${r}-${d}`)}),m.length===0&&l&&e.jsx("p",{className:"text-sm text-gray-500 italic py-2 text-center",children:"No se encontraron coincidencias"})]})]},r)})})]},t)).filter(Boolean)}})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No hay características disponibles para filtrar"}),e.jsx("p",{className:"text-sm",children:"Los filtros se generarán cuando se carguen los productos"})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 h-20 flex items-center lg:hidden",children:e.jsx("button",{className:"w-full bg-primary text-white py-3 rounded-xl font-bold hover:bg-primary-dark transition-colors",onClick:()=>S(!1),children:"Ver resultados"})})]}),e.jsx("div",{className:"w-full lg:w-9/12 py-4",children:G?e.jsx("div",{className:"flex items-center flex-wrap gap-y-8 transition-all duration-300 ease-in-out",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(i=>e.jsx(re,{},i))}):e.jsx("div",{className:`flex ${j==="grid"?"items-center flex-wrap":"flex-col gap-6"} transition-all duration-300 ease-in-out`,children:Array.isArray(u)&&u.length>0?u.map(i=>e.jsx("div",{className:j==="grid"?"w-1/2 lg:w-1/3 xl:w-1/3 lg:h-[460px] lg:max-h-[460px] xl:h-[400px] xl:max-h-[400px] 2xl:h-[430px] 2xl:max-h-[430px] flex items-center justify-center":"w-full mb-2 flex items-center justify-center shadow-sm hover:shadow-lg transition-shadow duration-200",children:e.jsx(ee,{data:w,product:i,viewType:j,widthClass:"w-full sm:w-full lg:w-full",cart:D,setCart:U})},i.id)):e.jsxs("div",{className:"w-full text-center py-12",children:[e.jsx(_,{}),p.length>0&&e.jsx("p",{className:"text-gray-500 mt-4",children:"Intenta ajustar los filtros para ver más productos"})]})})})]})]})})};export{Pe as default};
