import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r}from"./index-BH53Isel.js";import{N as b}from"./Number2Currency-e57Tgsuk.js";import{B as I,a as V,D as Z}from"./DeliveryPricesRest-vbzfoqYl.js";import{T as O}from"./trash-2-DK1wnsDn.js";import{M as z}from"./minus-jyhodMPN.js";import{P as B}from"./plus-Bot15Khs.js";import{u as R,S as q}from"./SelectForm-m9ZsfpcY.js";import{m as P}from"./main-BSEyQEJW.js";import{I as w}from"./InputForm-BF3tk65A.js";import{s as ee}from"./server.browser-Bf4gQIc7.js";import{R as se}from"./PaymentModal-BB1JXzaZ.js";import{G as _}from"./Global-ErywZRdd.js";import"./index-yBjzXJbu.js";import"./createLucideIcon-Cy5Ya80P.js";import"./chevron-down-DS-mdh9v.js";import"./search-TwiiKGP5.js";import"./check-DQ7QoS0v.js";import"./___vite-browser-external_commonjs-proxy-0zb4Agf2.js";import"./index-fNjTmf9T.js";import"./index-Chjiymov.js";const G=({setCart:p,...l})=>{const u=()=>{p(x=>x.filter(m=>m.id!==l.id))},o=()=>{p(x=>x.map(m=>m.id===l.id?{...m,quantity:(m.quantity||1)+1}:m))},t=()=>{p(x=>x.map(m=>{if(m.id===l.id){const h=(m.quantity||1)-1;return h<=0?(u(l.id),null):{...m,quantity:h}}return m}).filter(Boolean))};return console.log(l),e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hidden md:table-row border-b bg-gray-50 font-font-general",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/storage/images/item/${l.image}`,alt:l.name,className:"w-16 h-16 object-cover rounded mr-4"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:l.name}),e.jsxs("div",{className:"text-[12px] 2xl:text-sm customtext-neutral-dark space-y-1 mt-1",children:[e.jsxs("p",{children:["Color: ",l.color]}),e.jsx("button",{onClick:u,className:" text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(O,{size:18})})]})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("button",{type:"button",onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Decrease quantity",children:e.jsx(z,{size:16})}),e.jsx("div",{className:"w-8 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:l.quantity||1})}),e.jsx("button",{type:"button",onClick:o,className:"p-2 text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Increase quantity",children:e.jsx(B,{size:16})})]})})}),e.jsxs("td",{className:"px-4 py-4 text-right min-w-32",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(l.price).toFixed(2)]}),e.jsxs("div",{className:"font-bold",children:["S/ ",Number(l.final_price).toFixed(2)]})]}),e.jsxs("td",{className:"px-4 py-4 text-right font-bold",children:["S/ ",Number(l.final_price*l.quantity).toFixed(2)]})]},l.id),e.jsx("div",{className:"md:hidden bg-gray-50  rounded-lg shadow p-4 mb-4 w-full font-font-general",children:e.jsxs("div",{className:"flex items-start gap-4 relative",children:[e.jsx("img",{src:`/storage/images/item/${l.image}`,alt:l.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1 leading-tight customtext-neutral-dark",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Color: ",l.color]}),e.jsxs("div",{className:"mt-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden shadow-sm w-20",children:[e.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:bg-gray-100",children:e.jsx(z,{size:16})}),e.jsx("div",{className:"w-12 h-8 flex justify-center items-center bg-white",children:e.jsx("span",{className:"font-semibold text-sm",children:l.quantity||1})}),e.jsx("button",{onClick:o,className:"p-2 text-gray-600 hover:bg-gray-100",children:e.jsx(B,{size:16})})]}),e.jsxs("div",{className:"text-right mt-2",children:[e.jsxs("div",{className:"text-xs text-gray-500 line-through",children:["S/ ",Number(l.price).toFixed(2)]}),e.jsxs("div",{className:"font-bold",children:["S/ ",Number(l.final_price).toFixed(2)]}),e.jsxs("div",{className:"text-sm font-bold mt-1",children:["Subtotal: S/ ",Number(l.final_price*l.quantity).toFixed(2)]})]})]})]}),e.jsx("button",{onClick:u,className:"absolute -top-2 -right-2 text-red-500 transition-colors duration-200 rounded-full hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-200","aria-label":"Remove item",children:e.jsx(O,{size:18})})]})})]})};function ae({cart:p,setCart:l,onContinue:u,subTotal:o,envio:t,igv:x,totalFinal:m}){return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-y-8 md:gap-8",children:[e.jsxs("div",{className:"lg:col-span-3 flex flex-row w-full",children:[e.jsx("div",{className:"hidden md:block overflow-x-auto rounded-lg w-full",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"!font-font-general",children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Producto"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Cantidad"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Precio"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-sm 2xl:text-base font-semibold customtext-neutral-dark",children:"Subtotal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((h,N)=>e.jsx(G,{...h,setCart:l},N))})]})}),e.jsx("div",{className:"md:hidden space-y-4 w-full",children:p.map((h,N)=>e.jsx(G,{...h,setCart:l},N))})]}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6 customtext-neutral-dark",children:"Resumen de compra"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(o)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(x)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(t)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",b(m)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(I,{className:"rounded-2xl xl:rounded-3xl",onClick:u,children:"  Continuar"}),e.jsx(V,{className:"rounded-2xl xl:rounded-3xl",href:"/",children:" Cancelar"})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas losÂ ",e.jsx("a",{className:"customtext-primary font-bold",children:"TÃ©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestraÂ ",e.jsx("a",{className:"customtext-primary font-bold",children:"PolÃ­tica de Privacidad"}),"."]})})]})]})]})}function te({isOpen:p,onClose:l,onPaymentComplete:u}){const[o,t]=r.useState("yape"),[x,m]=r.useState(!1),h=()=>{m(!0),setTimeout(()=>{m(!1),u(),l()},1e3)};return e.jsx(se,{isOpen:p,onRequestClose:l,className:"absolute left-1/2 -translate-x-1/2 bg-white rounded-2xl shadow-lg w-[95%] max-w-4xl top-1/2 -translate-y-1/2 overflow-hidden",overlayClassName:"fixed inset-0 bg-black bg-opacity-50 z-50",ariaHideApp:!1,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx("div",{className:"hidden md:block bg-[#f8f5f2] h-full",children:e.jsx("img",{src:"/assets/img/salafabulosa/portadapagos.png",alt:"MÃ©todos de pago",className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"p-6 max-h-[80vh]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#3a2723]",children:"Â¿CÃ³mo deseas pagar tu pedido?"}),e.jsx("p",{className:"text-[#5c504c] mt-2",children:"Elige una de las opciones disponibles para completar tu pago de forma segura."})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("div",{className:`border rounded-lg p-3 cursor-pointer transition-colors ${o==="tarjeta"?"border-[#3a2723] bg-[#f8f5f2]":"border-gray-200 hover:border-[#3a2723]"}`,onClick:()=>t("tarjeta"),children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[e.jsx("input",{type:"radio",id:"tarjeta",name:"paymentMethod",checked:o==="tarjeta",onChange:()=>t("tarjeta"),className:"h-5 w-5 text-[#3a2723] focus:ring-[#3a2723] hidden"}),e.jsx("label",{htmlFor:"tarjeta",className:"font-medium text-base 2xl:text-lg",children:"Pago con Tarjeta"}),e.jsx("p",{className:"text-[#5c504c] ml-7 mt-1",children:"Renueva tus espacios con estilo: Fundas exclusivas para cada temporada."})]}),e.jsx("div",{className:"min-w-5 flex items-center justify-center",children:e.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${o==="tarjeta"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:e.jsx("div",{className:`h-2 w-2 rounded-full ${o==="tarjeta"?"bg-white":""}`})})})]})}),e.jsx("div",{className:`border rounded-lg p-3 cursor-pointer transition-colors ${o==="yape"?"border-[#3a2723] bg-[#f8f5f2]":"border-gray-200 hover:border-[#3a2723]"}`,onClick:()=>t("yape"),children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[e.jsx("input",{type:"radio",id:"yape",name:"paymentMethod",checked:o==="yape",onChange:()=>t("yape"),className:"h-5 w-5 text-[#3a2723] focus:ring-[#3a2723] hidden"}),e.jsx("label",{htmlFor:"yape",className:"font-medium text-base 2xl:text-lg",children:"Yape / Plin"}),e.jsx("p",{className:"text-[#5c504c] ml-7 mt-1",children:"Realiza el pago desde tu celular sin comisiones."})]}),e.jsx("div",{className:"min-w-5 flex items-center justify-center",children:e.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${o==="yape"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:e.jsx("div",{className:`h-2 w-2 rounded-full ${o==="yape"?"bg-white":""}`})})})]})}),e.jsx("div",{className:`border rounded-lg p-3 cursor-pointer transition-colors ${o==="transferencia"?"border-[#3a2723] bg-[#f8f5f2]":"border-gray-200 hover:border-[#3a2723]"}`,onClick:()=>t("transferencia"),children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-start justify-center space-x-2",children:[e.jsx("input",{type:"radio",id:"transferencia",name:"paymentMethod",checked:o==="transferencia",onChange:()=>t("transferencia"),className:"h-5 w-5 text-[#3a2723] focus:ring-[#3a2723] hidden"}),e.jsx("label",{htmlFor:"transferencia",className:"font-medium text-base 2xl:text-lg",children:"Pago por Transferencia"}),e.jsx("p",{className:"text-[#5c504c] ml-7 mt-1",children:"Haz una transferencia bancaria desde tu app o banca por internet."})]}),e.jsx("div",{className:"min-w-5 flex items-center justify-center",children:e.jsx("div",{className:`h-5 w-5 rounded-full flex items-center justify-center ${o==="transferencia"?"bg-[#3a2723]":"border-2 border-[#d0ccca]"}`,children:e.jsx("div",{className:`h-2 w-2 rounded-full ${o==="transferencia"?"bg-white":""}`})})})]})})]}),e.jsxs("div",{className:"mt-8 space-y-3",children:[e.jsx("button",{className:`w-full bg-[#3a2723] hover:bg-[#2a1d1a] text-white py-4 rounded-md text-lg font-medium transition-colors ${x?"opacity-70 cursor-not-allowed":""}`,onClick:h,disabled:x,children:x?"Procesando...":"Pagar ahora"}),e.jsx("button",{className:"w-full border border-[#3a2723] text-[#3a2723] hover:bg-[#f8f5f2] py-4 rounded-md text-lg font-medium transition-colors",onClick:l,disabled:x,children:"Volver"})]})]})]})})}function le({cart:p,setSale:l,setCode:u,setDelivery:o,setCart:t,onContinue:x,noContinue:m,subTotal:h,igv:N,totalFinal:C,user:s,setEnvio:y,envio:k,prefixes:F}){const[c,d]=r.useState({name:(s==null?void 0:s.name)||"",lastname:(s==null?void 0:s.lastname)||"",email:(s==null?void 0:s.email)||"",phone_prefix:(s==null?void 0:s.phone_prefix)||"51",phone:(s==null?void 0:s.phone)||"",department:(s==null?void 0:s.department)||"",province:(s==null?void 0:s.province)||"",district:(s==null?void 0:s.district)||"",address:(s==null?void 0:s.address)||"",number:(s==null?void 0:s.number)||"",comment:(s==null?void 0:s.comment)||"",reference:(s==null?void 0:s.reference)||"",shippingOption:"delivery",invoiceType:(s==null?void 0:s.invoiceType)||"boleta",documentType:(s==null?void 0:s.documentType)||"dni",document:(s==null?void 0:s.document)||"",businessName:(s==null?void 0:s.businessName)||""}),i=n=>{const{name:a,value:g}=n.target;d(S=>({...S,[a]:g})),a==="invoiceType"&&d(S=>({...S,documentType:g==="factura"?"ruc":"dni",document:"",businessName:g==="factura"?S.businessName:""}))},[j,v]=r.useState(""),[f,T]=r.useState(""),[E,D]=r.useState(""),[U,H]=r.useState([]),[J,Q]=r.useState([]),[Y,M]=r.useState([]),[oe,ce]=r.useState(0);r.useEffect(()=>{const n=[...new Set(R.map(a=>a.departamento))];H(n)},[]),r.useEffect(()=>{if(j){const n=[...new Set(R.filter(a=>a.departamento===j).map(a=>a.provincia))];Q(n),T(""),D(""),M([]),d(a=>({...a,department:j,province:"",district:""}))}},[j]),r.useEffect(()=>{if(f){const n=R.filter(a=>a.departamento===j&&a.provincia===f).map(a=>a.distrito);M(n),D(""),d(a=>({...a,province:f,district:""}))}},[f]),r.useEffect(()=>{E&&(d(a=>({...a,district:E})),(async()=>{try{const a=await Z.getShippingCost({department:j,district:E});y(a.data.price),b(a.data.price)>0?A("express"):A("free")}catch(a){console.error("Error fetching shipping cost:",a),alert("No se pudo obtener el costo de envÃ­o.")}})())},[E]),r.useEffect(()=>{const n=a=>{const g=a.element.dataset.code,S=a.element.dataset.flag;return ee.renderToString(e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-8 font-emoji text-center",children:S}),e.jsx("b",{className:"me-1",children:a.text}),e.jsx("span",{className:"text-sm text-opacity-20",children:g})]}))};$(".select2-prefix-selector").select2({dropdownCssClass:"py-1",containerCssClass:"!border !border-gray-300 !rounded p-2 !h-[42px]",arrowCssClass:'!text-primary top-1/2 -translate-y-1/2"',templateResult:function(a){if(!a.id)return a.text;var g=$(n(a));return g},templateSelection:function(a){if(!a.id)return a.text;var g=$(n(a));return g},matcher:function(a,g){if(!a.term||!g.element)return g;const S=g.element.dataset.country||"",X=g.text||"";return S.toLowerCase().includes(a.term.toLowerCase())||X.toLowerCase().includes(a.term.toLowerCase())?g:null}})},[c.phone_prefix]);const[ie,A]=r.useState("free"),[K,L]=r.useState(!1),W=()=>{console.log("Pago completado")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-y-8 lg:gap-8 ",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{className:"space-y-6 bg-[#f9f9f9] p-6 rounded-2xl font-font-general",onSubmit:n=>n.preventDefault(),children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 ",children:[e.jsx(w,{type:"text",label:"Nombres",name:"name",value:c.name,onChange:i,placeholder:"Nombres"}),e.jsx(w,{label:"Apellidos",type:"text",name:"lastname",value:c.lastname,onChange:i,placeholder:"Apellidos"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 ",children:[e.jsx(w,{label:"Correo electrÃ³nico",type:"email",name:"email",value:c.email,onChange:i,placeholder:"Ej. hola@gmail.com"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm mb-1",children:"Celular"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"select2-prefix-selector w-[200px] p-2 border border-gray-300 rounded",onChange:n=>setSelectedPrefix(n.target.value),name:"phone_prefix",value:c.phone_prefix,children:[e.jsx("option",{value:"",children:"Selecciona un paÃ­s"}),F.sort((n,a)=>n.country.localeCompare(a.country)).map((n,a)=>e.jsx("option",{value:n.realCode,"data-code":n.beautyCode,"data-flag":n.flag,"data-country":n.country},a))]}),e.jsx("input",{type:"text",id:"phone",name:"phone",value:c.phone,onChange:i,className:"flex-1 p-2 border border-gray-300 rounded",placeholder:"000 000 000"})]})]})]}),e.jsx(q,{label:"Departamento",options:U,placeholder:"Selecciona un Departamento",onChange:n=>{v(n),d(a=>({...a,department:j}))}}),e.jsx(q,{disabled:!j,label:"Provincia",options:J,placeholder:"Selecciona una Provincia",onChange:n=>{T(n),d(a=>({...a,province:f}))}}),e.jsx(q,{disabled:!f,label:"Distrito",options:Y,placeholder:"Selecciona un Distrito",onChange:n=>{D(n),d(a=>({...a,district:E}))}}),e.jsx(w,{label:"Avenida / Calle / JirÃ³n",type:"text",name:"address",value:c.address,onChange:i,placeholder:"Ingresa el nombre de la calle"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[e.jsx(w,{label:"NÃºmero",type:"text",name:"number",value:c.number,onChange:i,placeholder:"Ingresa el nÃºmero de la calle"}),e.jsx(w,{label:"Dpto./ Interior/ Piso/ Lote/ Bloque (opcional)",type:"text",name:"comment",value:c.comment,onChange:i,placeholder:"Ej. Casa 3, Dpto 101"})]}),e.jsx(w,{label:"Referencia",type:"text",name:"reference",value:c.reference,onChange:i,placeholder:"Ejem. Altura de la avenida..."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium customtext-neutral-dark",children:"Tipo de comprobante"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"boleta",checked:c.invoiceType==="boleta",onChange:i}),e.jsx("span",{className:"ml-2",children:"Boleta"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",className:"form-radio",name:"invoiceType",value:"factura",checked:c.invoiceType==="factura",onChange:i}),e.jsx("span",{className:"ml-2",children:"Factura"})]})]})]}),e.jsx(w,{label:c.documentType==="dni"?"DNI":"RUC",type:"text",name:"document",value:c.document,onChange:i,placeholder:`Ingrese su ${c.documentType==="dni"?"DNI":"RUC"}`,maxLength:c.documentType==="dni"?"8":"11"}),c.invoiceType==="factura"&&e.jsx(w,{label:"RazÃ³n Social",type:"text",name:"businessName",value:c.businessName,onChange:i,placeholder:"Ingrese la razÃ³n social"})]})}),e.jsxs("div",{className:"bg-[#F7F9FB] rounded-xl shadow-lg p-6 col-span-2 h-max font-font-general",children:[e.jsx("h3",{className:"text-2xl font-bold pb-6 customtext-neutral-dark",children:"Resumen de compra"}),e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:p.map((n,a)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white p-0 rounded-xl",children:e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"w-20 h-20 object-cover rounded  "})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold customtext-neutral-dark text-base 2xl:text-lg mb-2",children:n.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Color:"," ",e.jsx("span",{className:"customtext-neutral-dark",children:n.color})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad:"," ",e.jsxs("span",{className:"customtext-neutral-dark",children:[n.quantity," "]})]})]})]})},n.id))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(h)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(N)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(k)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",b(C)]})]})}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsxs(I,{className:"payment-button",onClick:()=>L(!0),children:[" ","Continuar"]}),e.jsx("div",{id:"mercadopago-button-container"}),e.jsxs(V,{onClick:m,children:[" ","Cancelar"]})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm customtext-neutral-dark",children:["Al realizar tu pedido, aceptas los",e.jsx("a",{className:"customtext-primary font-bold",children:"TÃ©rminos y Condiciones"}),", y que nosotros usaremos sus datos personales de acuerdo con nuestra",e.jsx("a",{className:"customtext-primary font-bold",children:"PolÃ­tica de Privacidad"}),"."]})})]})]})]}),e.jsx(te,{isOpen:K,onClose:()=>L(!1),onPaymentComplete:W})]})}const ne=({code:p})=>new Promise(async(l,u)=>{try{console.log("Codigo de venta:",p);const{status:o,result:t}=await P.Fetch("./api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:p})});if(!o||!t.order){P.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:(t==null?void 0:t.message)||"Error no se pudo cargar la orden",type:"danger"}),u((t==null?void 0:t.message)||"Error no se pudo cargar la orde");return}l(t)}catch(o){console.error("Error en processMercadoPagoPayment:",o),P.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:o.message||"Error en la integraciÃ³n con MercadoPago",type:"danger"}),u(o.message||"Error en la integraciÃ³n con MercadoPago")}});function re({setCart:p,cart:l,code:u,delivery:o}){var c;const[t,x]=r.useState(null),[m,h]=r.useState(!0),[N,C]=r.useState(null);if(r.useEffect(()=>{u&&((async()=>{try{const i=await ne({code:u});x(i.order)}catch(i){C(i.message)}finally{h(!1)}})(),P.Local.delete(`${_.APP_CORRELATIVE}_cart`),P.Local.set(`${_.APP_CORRELATIVE}_cart`,[]))},[u]),m)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center",children:e.jsx("p",{children:"Cargando detalles de la orden..."})})});if(N)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center text-red-500",children:e.jsxs("p",{children:["Error al cargar la orden: ",N]})})});if(!t)return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general text-center",children:e.jsx("p",{children:"No se encontraron datos de la orden"})})});const y=((((c=t==null?void 0:t.items)==null?void 0:c.reduce((d,i)=>{const j=i.price||0,v=i.quantity||0;return d+j*v},0))||0)/1.18).toFixed(2),k=(y*.18).toFixed(2),F=parseFloat(y)+parseFloat(k)+parseFloat(t.delivery);return e.jsx("div",{className:"mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6 font-font-general",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-base xl:text-xl customtext-neutral-light",children:"Gracias por tu compra ðŸŽ‰"}),e.jsx("p",{className:"customtext-neutral-dark text-2xl xl:text-5xl font-semibold",children:"Tu orden ha sido recibida"}),e.jsxs("div",{className:"py-4",children:[e.jsx("div",{className:" customtext-neutral-light",children:"CÃ³digo de pedido"}),e.jsxs("div",{className:"customtext-neutral-dark text-lg font-semibold",children:["#",t.code]})]}),e.jsxs("div",{className:"space-y-4 max-w-lg bg-[#F7F9FB] mx-auto p-8 rounded-xl",children:[e.jsx("div",{className:"space-y-6 border-b-2 pb-6",children:t.items.map((d,i)=>e.jsx("div",{className:"rounded-lg",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl w-max",children:e.jsx("img",{src:d.image?`/storage/images/item/${d.image}`:"/assets/img/noimage/no_img.jpg",alt:d.name,className:"w-20 h-20 object-cover rounded",onError:j=>j.target.src="/assets/img/noimage/no_img.jpg"})}),e.jsxs("div",{className:"text-start",children:[e.jsx("h3",{className:"font-medium text-lg",children:d.name}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Color: ",e.jsx("span",{className:"customtext-neutral-dark",children:d.color})]}),e.jsxs("p",{className:"text-sm customtext-neutral-light",children:["Cantidad: ",e.jsx("span",{className:"customtext-neutral-dark",children:parseInt(d.quantity)})," - Precio: ",e.jsxs("span",{className:"customtext-neutral-dark",children:[" S/ ",b(d.price)]})]})]})]})},i))}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(y)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"IGV"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(k)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"customtext-neutral-dark",children:"EnvÃ­o"}),e.jsxs("span",{className:"font-semibold",children:["S/ ",b(t.delivery)]})]}),e.jsx("div",{className:"py-3 border-y-2 mt-6",children:e.jsxs("div",{className:"flex justify-between font-bold text-[20px] items-center",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["S/ ",b(F)]})]})})]}),e.jsx("div",{className:"pt-3",children:e.jsx(I,{href:"/catalogo",children:"  Seguir Comprando"})})]})]})})})}function $e({cart:p,setCart:l,user:u,prefixes:o}){const[t,x]=r.useState(1),h=(p.reduce((v,f)=>{const T=f.final_price;return v+T*f.quantity},0)/1.18).toFixed(2),N=(h*.18).toFixed(2),[C,s]=r.useState(0),y=parseFloat(h)+parseFloat(N)+parseFloat(C),[k,F]=r.useState([]),[c,d]=r.useState([]),[i,j]=r.useState([]);return r.useEffect(()=>{const f=new URLSearchParams(window.location.search).get("code");f&&(d(f),x(3))},[window.location.search]),r.useEffect(()=>{c&&P.Local.delete(`${_.APP_CORRELATIVE}_cart`)},[c]),r.useEffect(()=>{(()=>{const f=document.createElement("script");f.src="https://sdk.mercadopago.com/js/v2",f.async=!0,document.body.appendChild(f)})()},[]),e.jsxs("div",{className:"min-h-screen bg-white py-6 px-primary",children:[e.jsxs("div",{className:"bg-white  py-8 sm:p-8 rounded-xl",children:[e.jsxs("div",{className:`mb-4 xl:mb-8 grid lg:grid-cols-5 !font-font-general ${t===3?"mx-auto max-w-3xl":""} `,children:[e.jsxs("div",{className:`flex items-center justify-between  mx-1 gap-2 lg:mx-5 ${t===3?"lg:col-span-5":"lg:col-span-3"}  text-center`,children:[e.jsx("div",{className:`text-sm sm:text-base 2xl:text-lg tracking-tight ${t===1?"customtext-primary font-semibold":"customtext-neutral-dark"}`,children:"Carrito de compra"}),e.jsx("div",{className:`text-sm sm:text-base 2xl:text-lg tracking-tight ${t===2?"customtext-primary font-semibold":"customtext-neutral-dark"}`,children:"Detalles de envÃ­o"}),e.jsx("div",{className:`text-sm sm:text-base 2xl:text-lg tracking-tight ${t===3?"customtext-primary font-semibold":"customtext-neutral-dark"}`,children:"Orden confirmada"})]}),e.jsx("div",{className:`mt-4 h-1 max-w-3xl bg-gray-200 ${t===3?"lg:col-span-5":"lg:col-span-3"} `,children:e.jsx("div",{className:"h-1 bg-primary transition-all duration-500",style:{width:`${(t-1)/2*100}%`}})})]}),t===1&&e.jsx(ae,{cart:p,setCart:l,onContinue:()=>x(2),subTotal:h,envio:C,igv:N,totalFinal:y}),t===2&&e.jsx(le,{setCode:d,setDelivery:j,cart:p,setSale:F,setCart:l,onContinue:()=>x(3),noContinue:()=>x(1),subTotal:h,envio:C,setEnvio:s,igv:N,totalFinal:y,user:u,prefixes:o}),t===3&&e.jsx(re,{code:c,setCart:l,delivery:i,cart:k,subTotal:h,envio:C,igv:N,totalFinal:y})]}),e.jsx("section",{className:"px-[5%] xl:px-[8%] bg-white py-12 xl:py-16 font-paragraph",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start items-center bg-gradient-to-br from-[#FFFFFF] to-[#91502D1A] w-full rounded-3xl relative",children:[e.jsxs("div",{className:"flex flex-col gap-5 py-8 px-5 lg:pl-16 xl:pl-20  justify-start items-start w-full 2xl:w-3/5 max-w-xl 2xl:max-w-5xl text-white text-left",children:[e.jsx("h1",{className:"customtext-primary text-opacity-20 font-bold text-3xl md:text-4xl xl:text-5xl",children:"Â¡Tu compra merece un envÃ­o GRATIS!"}),e.jsx("p",{className:"customtext-primary  font-normal text-base xl:text-lg 2xl:text-xl",children:"LlÃ©vate tus regalos favoritos y obtÃ©n envÃ­o gratis en compras mayores a S/100."}),e.jsx("div",{className:"flex flex-col",children:e.jsx("a",{className:"w-auto bg-primary px-6 py-3 2xl:py-4 2xl:px-8 rounded-3xl text-white font-font-general leading-none text-base 2xl:text-xl",children:"Seguir comprando"})})]}),e.jsx("div",{className:"xl:absolute right-0 bottom-0 flex flex-col ml-5 w-full items-end  md:w-6/12 2xl:w-2/5 mt-0 md:-mb-14 ",children:e.jsx("img",{src:"/assets/img/backgrounds/resources/image-cart.png",onError:v=>v.target.src="/assets/img/noimage/no_img.jpg",className:"object-contain min-h-[300px] max-h-[500px] md:object-contain  xl:max-h-[400px]  md:max-h-none w-full object-bottom"})})]})})]})}export{$e as default};
