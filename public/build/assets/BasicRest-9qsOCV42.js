var h=Object.defineProperty;var u=(c,e,o)=>e in c?h(c,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[e]=o;var n=(c,e,o)=>u(c,typeof e!="symbol"?e+"":e,o);import{m as a}from"./main-BvVILmTO.js";import{t as i}from"./index-CMHsc23u.js";class m{constructor(){n(this,"is_use_notify",!0);n(this,"path",null);n(this,"hasFiles",!1);n(this,"controller",null);n(this,"simpleGet",async(e,o)=>{try{const{status:t,result:r}=await a.Fetch(e,o);if(!t)throw new Error((r==null?void 0:r.message)||"Ocurrio un error inesperado");return r.data??!0}catch(t){return i.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});n(this,"paginate",async e=>{this.controller.abort("Nothing"),this.controller=new AbortController;const o=this.controller.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(a.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(e),signal:o})).json()});n(this,"save",async(e,o=()=>{})=>{try{let t=!1,r={};if(this.hasFiles){const s=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(a.Cookies.get("XSRF-TOKEN"))},body:e});t=s.ok,r=JSON.parseable(await s.text())}else{const s=await a.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(e)});t=s.status,r=s.result}if(!t)throw new Error((r==null?void 0:r.message)||"Ocurrio un error inesperado");return this.is_use_notify&&i.success("¡Excelente!",{description:r.message,duration:3e3,position:"bottom-center",richColors:!0}),o==null||o(),(r==null?void 0:r.data)??!0}catch(t){return i.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});n(this,"status",async({id:e,status:o})=>{try{const{status:t,result:r}=await a.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:e,status:o})});if(!t)throw new Error((r==null?void 0:r.message)??"Ocurrio un error inesperado");return i.success("¡Excelente!",{description:r.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(t){return i.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});n(this,"boolean",async({id:e,field:o,value:t})=>{try{const{status:r,result:s}=await a.Fetch(`/api/${this.path}/${o}`,{method:"PATCH",body:JSON.stringify({id:e,value:t})});if(!r)throw new Error((s==null?void 0:s.message)??"Ocurrio un error inesperado");return i.success("¡Excelente!",{description:s.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(r){return i.error("¡Error!",{description:r.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});n(this,"delete",async e=>{try{const{status:o,result:t}=await a.Fetch(`/api/${this.path}/${e}`,{method:"DELETE"});if(!o)throw new Error((t==null?void 0:t.message)??"Ocurrio un error inesperado");return i.success("¡Excelente!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),!0}catch(o){return i.error("¡Error!",{description:o.message,duration:3e3,position:"bottom-center",richColors:!0}),!1}});n(this,"get",async(e={},o=[])=>{try{let t=`/api/${this.path}`;if(typeof e=="string"||typeof e=="number")t+=`/${e}`;else if(typeof e=="object"&&Object.keys(e).length>0){const s=new URLSearchParams(e).toString();t+=`?${s}`}if(o.length>0){const s=o.join(",");t+=`${t.includes("?")?"&":"?"}with=${s}`}const r=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(a.Cookies.get("XSRF-TOKEN"))}});if(!r.ok)throw new Error(`Error ${r.status}: ${r.statusText}`);return await r.json()}catch(t){return i.error("¡Error!",{description:t.message,duration:3e3,position:"bottom-center",richColors:!0}),null}});this.controller=new AbortController}}export{m as B};
