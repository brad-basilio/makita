import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as x}from"./index-BH53Isel.js";import{C as z}from"./chevron-up-D78jyEhP.js";import{C as T}from"./chevron-down-DS-mdh9v.js";import{X as B}from"./x-DBMwyD6F.js";import{a as V}from"./index-xsH4HHeE.js";import{E as W}from"./CompareDetailsModal-CRbNeHaa.js";import U from"./html2canvas.esm-CBrSDip1.js";import{S as O,a as G}from"./BlogCarousel-CCgb3gK1.js";/* empty css               */import{L as D}from"./loader-circle-CrvBvIt1.js";const ce=({product:s,bgImagen:c="",data:r,widthClass:b,cart:l,setCart:h,viewType:g="grid",onCompareClick:f})=>{var k,C,j;const[n,p]=x.useState(!1);return s?g==="list"?e.jsxs("div",{className:"bg-transparent w-full  rounded-xl  flex flex-row h-auto transition-all duration-200  overflow-hidden",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsxs("div",{className:`relative  flex justify-center items-center  w-1/3 min-w-[300px] max-w-[300px] p-2 ${c||"bg-white"}`,children:[s.is_new===1&&e.jsx("span",{className:"absolute top-2 right-2 md:top-2 md:right-2 bg-primary max-w-max text-white text-xs font-bold px-2 py-1 rounded-sm z-10",children:"NUEVO"}),e.jsx("img",{src:`/storage/images/item/${s.image}`,onError:y=>y.target.src="/assets/img/noimage/no_img.jpg",alt:s.name,className:"object-contain h-48 md:h-56 max-w-full mx-auto",loading:"lazy"})]}),e.jsxs("div",{className:" p-8 flex flex-col flex-grow",children:[e.jsxs("div",{className:"customtext-primary tracking-wider text-sm font-medium mb-1",children:[s.sku||"DMR200",e.jsx("span",{className:"customtext-neutral-dark !capitalize",children:((k=s==null?void 0:s.category)==null?void 0:k.name)&&` | ${(j=(C=s==null?void 0:s.category)==null?void 0:C.name)==null?void 0:j.toLowerCase()}`})]}),e.jsx("h3",{className:"customtext-neutral-dark  font-bold text-[30px] mb-2 leading-tight line-clamp-2",children:s.name||s.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-3 lg:line-clamp-3 ",dangerouslySetInnerHTML:{__html:s.description}}),e.jsx("div",{className:`mt-auto pt-3 ${n?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-start",children:[e.jsx("button",{className:"flex-1 md:flex-none bg-white border border-primary customtext-primary py-2 px-6 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:f,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${s.slug}`,className:"flex-1 md:flex-none w-32 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):e.jsxs("div",{className:"bg-transparent w-full   flex flex-col h-full transition-all duration-200  overflow-hidden",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsxs("div",{className:`relative  rounded-lg aspect-square flex justify-center items-center  p-2 lg:p-4 ${c||"bg-white"}`,children:[s&&s.is_new===1&&e.jsx("span",{className:"absolute top-8 right-0 bg-primary tracking-widest text-white text-sm font-normal px-2 py-2 rounded-l-md",children:"NUEVO"}),e.jsx("img",{src:s&&s.image?`/storage/images/item/${s.image}`:"/assets/img/noimage/no_img.jpg",onError:y=>y.target.src="/assets/img/noimage/no_img.jpg",alt:s&&s.name?s.name:"",className:"object-contain aspect-square",loading:"lazy"})]}),e.jsxs("div",{className:"p-2 lg:p-5 flex flex-col flex-grow",children:[e.jsx("div",{className:"text-[#219FB9] text-sm font-medium mb-1",children:s.sku||"DMR200"}),e.jsx("h3",{className:"customtext-neutral-dark font-bold text-2xl mb-2 leading-tight line-clamp-2",children:s.name||s.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-2",dangerouslySetInnerHTML:{__html:s.description}}),e.jsx("div",{className:` pt-0 ${n?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 w-full",children:[e.jsx("button",{className:"flex-1 bg-white border border-primary customtext-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:f,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${s.slug}`,className:"flex-1 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):null},oe=({open:s,minimized:c,products:r,onRemove:b,onCompare:l,onMinimize:h,onRestore:g})=>{if(!r||r.length===0)return null;const f=x.useRef(null);return x.useEffect(()=>{f.current&&(f.current.style.pointerEvents="auto")},[r.length,c]),e.jsx("div",{ref:f,className:"fixed   lg:h-auto left-0 right-0 bottom-0 z-50 w-full",style:{pointerEvents:"none"},children:e.jsx("div",{className:`w-full bg-[#262626EB] ${c?"h-auto":"h-[calc(100dvh-17dvh)]"} lg:h-auto  shadow-lg px-2 sm:px-6 ${c?"py-2":"py-10 lg:py-20"}`,style:{margin:0,pointerEvents:"auto"},children:c?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("button",{onClick:g,className:" rounded text-2xl md:text-[30px]  p-2 text-white flex items-center gap-2 lg:gap-6 ",children:[e.jsx("button",{onClick:g,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(z,{size:24})}),e.jsx("span",{children:"Comparar productos"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 lg:gap-8",children:[e.jsx("button",{onClick:h,className:"bg-primary rounded min-w-14 min-h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(T,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-[32px] font-medium text-white",children:"Comparar productos"}),e.jsx("p",{className:"text-base line-clamp-1 lg:line-clamp-none md:text-base text-white",children:"Puede añadir un máximo de cuatro artículos para comparar"})]})]}),e.jsx("button",{className:`hidden md:block bg-[#219FB9] text-white px-4 py-3 rounded-md text-lg tracking-wider transition-all ${r.length===4?"hover:bg-[#1786a1]":"opacity-50 cursor-not-allowed"}`,disabled:r.length!==4,onClick:()=>{l(),h&&h()},children:"Comparar"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"overflow-x-auto md:overflow-x-visible max-h-[66dvh] overflow-y-auto md:pb-0 pb-20",children:e.jsx("div",{className:"grid grid-cols-2 md:flex md:justify-center gap-4 md:gap-6 lg:gap-12 min-w-full md:min-w-0",children:r.map(n=>e.jsxs("div",{className:"flex flex-col items-center min-w-0",children:[e.jsx("button",{className:"mt-2 mb-4 bg-primary rounded w-9 h-9 flex items-center justify-center text-white text-xl hover:bg-[#219FB9] transition-all duration-300",onClick:()=>b(n.id),children:e.jsx(B,{size:16})}),e.jsx("div",{className:"bg-white rounded-lg p-2 aspect-square",children:e.jsx("img",{src:`/storage/images/item/${n.image}`,alt:n.name,className:"h-28 object-cover aspect-square mb-2",onError:p=>p.target.src="/assets/img/noimage/no_img.jpg"})}),e.jsx("div",{className:"text-white text-center line-clamp-3 mt-2 max-w-[180px]",children:n.name})]},n.id))})}),e.jsx("div",{className:"md:hidden absolute bottom-0 left-0 right-0 bg-[#262626EB] p-4 flex justify-center",children:e.jsx("button",{className:`bg-[#219FB9] text-white px-6 py-3 rounded-md text-lg tracking-wider transition-all ${r.length===4?"hover:bg-[#1786a1]":"opacity-50 cursor-not-allowed"}`,disabled:r.length!==4,onClick:()=>{l(),h&&h()},children:"Comparar"})})]})]})})})},X=({isActive:s,onClick:c})=>e.jsx("button",{onClick:c,className:"cursor-pointer transition-all duration-300 p-1 flex items-center justify-center",children:s?e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"#219FB9"})}):e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("circle",{opacity:"0.4",cx:"8",cy:"8",r:"8",fill:"#219FB9",fillOpacity:"0.32"})})}),Y="",me=({isOpen:s,onClose:c,products:r,onRemoveProduct:b})=>{const[l,h]=x.useState([]),[g,f]=x.useState(!1),[n,p]=x.useState(!1),[k,C]=x.useState(0),[j,y]=x.useState(null),E=x.useRef(null);x.useEffect(()=>{s&&r&&r.length>0?(f(!0),Promise.all(r.map(t=>V.get(`/api/items/${t.id}`).then(a=>a.data).catch(()=>null))).then(t=>{h(t.filter(Boolean)),f(!1)})):h([])},[s,r]);const H=async()=>{p(!0);try{const t=document.querySelectorAll(".print-hide"),a=[];if(l.length===0){console.log("No hay detalles para generar PDF");return}t.forEach((m,u)=>{a[u]=m.style.display,m.style.display="none"});const i=await U(E.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:E.current.scrollWidth,height:E.current.scrollHeight,scrollX:0,scrollY:0,onclone:m=>{const u=m.querySelector('[ref="contentRef"]');u&&(u.style.width="auto",u.style.height="auto");try{const d=m.querySelectorAll("img");d&&d.length&&d.forEach(N=>{try{const S=N.getAttribute("alt")||"";r.find(M=>(M.name||"")===S)&&(N.style.maxWidth="100%",N.style.height="auto")}catch{}})}catch(d){console.warn("No se pudieron ajustar imágenes en onclone:",d)}m.querySelectorAll("h2, h3, h4").forEach(d=>{d.style.pageBreakAfter="avoid",d.style.pageBreakInside="avoid"})}});if(t.forEach((m,u)=>{m.style.display=a[u]}),console.log("Canvas generado directamente:",{width:i.width,height:i.height,dataURL:i.toDataURL().substring(0,100)+"..."}),i.width===0||i.height===0)throw new Error("El canvas generado está vacío");const o=new W({orientation:"portrait",unit:"mm",format:"a4"}),q=i.toDataURL("image/png"),L=o.internal.pageSize.getWidth(),P=o.internal.pageSize.getHeight(),$=i.width/i.height,F=L-20,_=P-20;let w,v;$>F/_?(w=F,v=F/$):(v=_,w=_*$);const A=(L-w)/2,I=(P-v)/2;if(o.addImage(q,"PNG",A,I,w,v),l&&l.length>0){const m=v/l.length;l.forEach((u,R)=>{const d=I+R*m,N=A,S=w;o.link(N,d,S,m,{url:`${window.location.origin}/producto/${u.slug}`})})}o.save("comparacion-productos.pdf")}catch(t){console.error("Error al generar PDF:",t)}finally{p(!1)}};return s?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto ",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:Y}}),e.jsxs("div",{className:"relative  overflow-hidden pt-10 bg-white",children:[e.jsx("button",{onClick:c,className:"print-hide absolute right-12 top-4  flex items-center justify-center w-10 h-10 rounded-md z-[999] bg-primary  text-white hover:bg-[#219FB9]",type:"button","aria-label":"Cerrar",children:e.jsx(B,{className:"h-5 w-5"})}),e.jsxs("div",{className:"bg-white w-full min-w-0 md:min-w-[800px] max-w-7xl pb-8 relative max-h-[90vh] overflow-y-auto scrollbar-none shadow-2xl",children:[!g&&e.jsxs("div",{className:"sticky pt-8 top-0 z-20 bg-white  pb-4 mb-6 rounded-t-xl shadow-md px-4 md:px-8",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-[#262626] ",children:"Comparar productos"}),e.jsx("div",{className:"hidden lg:flex items-center gap-2",children:e.jsxs("button",{onClick:H,disabled:g||n||l.length===0,className:"gap-2 print-hide flex tracking-wider items-center border border-gray-300 bg-[#219FB9]  hover:bg-primary text-white px-4 py-3 rounded-md  shadow-sm hover:brightness-100 disabled:opacity-60 disabled:cursor-not-allowed",type:"button",children:[n?e.jsx(D,{className:"h-4 w-4 animate-spin"}):"",e.jsx("span",{children:n?"Generando PDF...":"Descargar PDF"})]})})]}),e.jsx("p",{className:"text-sm line-clamp-1 text-[#262626] mt-1",children:"Puede añadir un máximo de cuatro artículos para comparar"}),e.jsx("div",{className:" lg:hidden items-center gap-2",children:e.jsxs("button",{onClick:H,disabled:g||n||l.length===0,className:"gap-2 mt-4 print-hide flex tracking-wider items-center border border-gray-300 bg-[#219FB9]  hover:bg-primary text-white px-4 py-3 rounded-md  shadow-sm hover:brightness-100 disabled:opacity-60 disabled:cursor-not-allowed",type:"button",children:[n?e.jsx(D,{className:"h-4 w-4 animate-spin"}):"",e.jsx("span",{children:n?"Generando PDF...":"Descargar PDF"})]})})]}),e.jsx("div",{ref:E,className:"bg-white rounded-lg px-4 md:px-8",children:g?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(D,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"customtext-neutral-dark ",children:"Cargando detalles de productos..."})]}):l.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50  rounded-lg",children:[e.jsx("p",{className:"customtext-neutral-dark text-lg",children:"No hay productos para comparar."}),e.jsx("p",{className:"customtext-neutral-dark  text-sm mt-2",children:"Añada productos para iniciar la comparación."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx(O,{spaceBetween:0,slidesPerView:1,onSwiper:y,onSlideChange:t=>C(t.activeIndex),className:"compare-swiper w-full",children:l.map(t=>e.jsx(G,{className:"w-full",style:{width:"100%"},children:e.jsxs("div",{className:"overflow-hidden w-full h-full flex flex-col bg-white rounded-lg min-w-0",children:[e.jsxs("div",{className:"relative pt-12 max-w-[350px]",children:[e.jsx("button",{onClick:()=>b(t.id),className:"absolute top-2 left-0 bg-primary text-white rounded w-9 h-9 flex items-center justify-center hover:bg-secondary shadow-md print-hide",children:e.jsx(B,{size:20})}),e.jsx("div",{className:"bg-gray-100 aspect-square flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`/storage/images/item/${t.image}`,alt:t.name,className:"w-full h-full object-contain p-4",onError:a=>a.target.src="/assets/img/noimage/no_img.jpg"})})]}),e.jsxs("div",{className:"flex-grow flex flex-col p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-block text-[#219FB9] rounded-full text-sm font-medium",children:t.code})}),e.jsx("h3",{className:"font-bold mb-3 text-lg leading-tight customtext-neutral-dark min-h-[3rem] flex items-start break-words",children:t.name}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed min-w-0",dangerouslySetInnerHTML:{__html:t==null?void 0:t.description}})}),e.jsx("a",{href:`/producto/${t.slug}`,className:"mb-4 w-full block text-center bg-primary hover:bg-secondary text-white py-3 rounded  text-base transition-all duration-200 shadow-sm hover:shadow-md print-hide",children:"Ver"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-bold text-lg tracking-wider mt-2 mb-4 text-gray-800  border-gray-200 pb-2",children:"Especificaciones técnicas"}),e.jsx("div",{className:"space-y-1",children:(()=>{let a=[];return Array.isArray(t.specifications)?a=t.specifications:t.specifications&&typeof t.specifications=="object"&&(a=Object.values(t.specifications)),a.length>0?a.slice(0,10).map((i,o)=>e.jsx("div",{className:`p-3  ${o%2===0?"bg-gray-50":"bg-white "}`,children:e.jsxs("p",{className:"text-base text-[#262626]",children:[e.jsx("span",{className:"font-bold tracking-wider text-sm  customtext-neutral-dark",children:i.key||i.name}),e.jsx("br",{})," ",i.value]})},i.key||i.name||o)):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-md",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Sin especificaciones técnicas disponibles"})})})()})]})]})]})},t.id))}),l.length>1&&e.jsx("div",{className:"flex justify-center items-center mt-4 px-4",children:e.jsx("div",{className:"flex gap-3",children:l.map((t,a)=>e.jsx(X,{isActive:a===k,onClick:()=>{j&&j.slideTo(a)}},a))})})]}),e.jsx("div",{className:"hidden md:grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:l.map(t=>e.jsxs("div",{className:"overflow-hidden h-full flex flex-col bg-white rounded-lg min-w-0",children:[e.jsxs("div",{className:"relative pt-12",children:[e.jsx("button",{onClick:()=>b(t.id),className:"absolute top-2 left-0 bg-primary text-white rounded w-9 h-9 flex items-center justify-center hover:bg-secondary shadow-md print-hide",children:e.jsx(B,{size:20})}),e.jsx("div",{className:"bg-gray-100 aspect-square flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`/storage/images/item/${t.image}`,alt:t.name,className:"w-full h-full object-contain p-4",onError:a=>a.target.src="/assets/img/noimage/no_img.jpg"})})]}),e.jsxs("div",{className:"flex-grow flex flex-col p-4",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-block text-[#219FB9] rounded-full text-sm font-medium",children:t.code})}),e.jsx("h3",{className:"font-bold mb-3 text-lg leading-tight customtext-neutral-dark min-h-[3rem] flex items-start",children:t.name}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"text-sm text-gray-600 line-clamp-2 leading-relaxed",dangerouslySetInnerHTML:{__html:t==null?void 0:t.description}})}),e.jsx("a",{href:`/producto/${t.slug}`,className:"mb-4 w-full block text-center bg-primary hover:bg-secondary text-white py-3 rounded  text-base transition-all duration-200 shadow-sm hover:shadow-md print-hide",children:"Ver"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-bold text-lg tracking-wider mt-2 mb-4 text-gray-800  border-gray-200 pb-2",children:"Especificaciones técnicas"}),e.jsx("div",{className:"space-y-1",children:(()=>{let a=[];return Array.isArray(t.specifications)?a=t.specifications:t.specifications&&typeof t.specifications=="object"&&(a=Object.values(t.specifications)),a.length>0?a.slice(0,10).map((i,o)=>e.jsx("div",{className:`p-3  ${o%2===0?"bg-gray-50":"bg-white "}`,children:e.jsxs("p",{className:"text-base text-[#262626]",children:[e.jsx("span",{className:"font-bold tracking-wider text-sm  customtext-neutral-dark",children:i.key||i.name}),e.jsx("br",{})," ",i.value]})},i.key||i.name||o)):e.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-md",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Sin especificaciones técnicas disponibles"})})})()})]})]})]},t.id))})]})}),e.jsx("div",{className:"flex justify-end mt-8 print-hide mr-8",children:e.jsx("button",{onClick:c,className:"bg-primary  text-white px-8 py-3 rounded text-lg  transition-colors",type:"button",children:"Cerrar"})})]})]})]}):null};export{ce as C,oe as a,me as b};
