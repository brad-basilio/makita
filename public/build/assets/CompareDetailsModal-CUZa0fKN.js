import{j as e}from"./AboutSimple-Cf8x2fCZ.js";import{r as f}from"./index-BH53Isel.js";import{C as q}from"./chevron-up-D78jyEhP.js";import{C as W}from"./chevron-down-DS-mdh9v.js";import{X as D}from"./x-DBMwyD6F.js";import{a as I}from"./index-xsH4HHeE.js";import{E as V}from"./CompareDetailsModal-Khdr67Ug.js";import U from"./html2canvas.esm-CBrSDip1.js";import{L}from"./loader-circle-CrvBvIt1.js";import{D as G}from"./download-Dh5rRDOT.js";const ie=({product:a,bgImagen:d="",data:m,widthClass:C,cart:j,setCart:u,viewType:b="grid",onCompareClick:x})=>{var w,E,t;const[o,y]=f.useState(!1);return a?b==="list"?e.jsxs("div",{className:"bg-transparent w-full  rounded-xl  flex flex-row h-auto transition-all duration-200  overflow-hidden",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[e.jsxs("div",{className:`relative  flex justify-center items-center  w-1/3 min-w-[300px] max-w-[300px] p-2 ${d||"bg-white"}`,children:[a.is_new===1&&e.jsx("span",{className:"absolute top-2 right-2 md:top-2 md:right-2 bg-primary max-w-max text-white text-xs font-bold px-2 py-1 rounded-sm z-10",children:"NUEVO"}),e.jsx("img",{src:`/storage/images/item/${a.image}`,onError:r=>r.target.src="/assets/img/noimage/no_img.jpg",alt:a.name,className:"object-contain h-48 md:h-56 max-w-full mx-auto",loading:"lazy"})]}),e.jsxs("div",{className:" p-8 flex flex-col flex-grow",children:[e.jsxs("div",{className:"customtext-primary tracking-wider text-sm font-medium mb-1",children:[a.sku||"DMR200",e.jsx("span",{className:"customtext-neutral-dark !capitalize",children:((w=a==null?void 0:a.category)==null?void 0:w.name)&&` | ${(t=(E=a==null?void 0:a.category)==null?void 0:E.name)==null?void 0:t.toLowerCase()}`})]}),e.jsx("h3",{className:"customtext-neutral-dark  font-bold text-[30px] mb-2 leading-tight line-clamp-2",children:a.name||a.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-3 lg:line-clamp-3 ",dangerouslySetInnerHTML:{__html:a.description}}),e.jsx("div",{className:`mt-auto pt-3 ${o?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-start",children:[e.jsx("button",{className:"flex-1 md:flex-none bg-white border border-primary customtext-primary py-2 px-6 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:x,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${a.slug}`,className:"flex-1 md:flex-none w-32 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):e.jsxs("div",{className:"bg-transparent w-full   flex flex-col h-full transition-all duration-200  overflow-hidden",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[e.jsxs("div",{className:`relative  rounded-lg aspect-square flex justify-center items-center  p-2 lg:p-4 ${d||"bg-white"}`,children:[a&&a.is_new===1&&e.jsx("span",{className:"absolute top-8 right-0 bg-primary tracking-widest text-white text-sm font-normal px-2 py-2 rounded-l-md",children:"NUEVO"}),e.jsx("img",{src:a&&a.image?`/storage/images/item/${a.image}`:"/assets/img/noimage/no_img.jpg",onError:r=>r.target.src="/assets/img/noimage/no_img.jpg",alt:a&&a.name?a.name:"",className:"object-contain aspect-square",loading:"lazy"})]}),e.jsxs("div",{className:"p-2 lg:p-5 flex flex-col flex-grow",children:[e.jsx("div",{className:"text-[#219FB9] text-sm font-medium mb-1",children:a.sku||"DMR200"}),e.jsx("h3",{className:"customtext-neutral-dark font-bold text-2xl mb-2 leading-tight line-clamp-2",children:a.name||a.title}),e.jsx("p",{className:"customtext-neutral-light text-sm mb-3 line-clamp-2",dangerouslySetInnerHTML:{__html:a.description}}),e.jsx("div",{className:` pt-0 ${o?"lg:opacity-100":"lg:opacity-0"} opacity-100 transition-opacity duration-300`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 w-full",children:[e.jsx("button",{className:"flex-1 bg-white border border-primary customtext-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-primary hover:text-white transition-colors duration-500",onClick:x,children:e.jsx("span",{className:"font-medium text-base",children:"Comparar"})}),e.jsx("a",{href:`/producto/${a.slug}`,className:"flex-1 bg-primary text-white border border-primary py-2 px-3 rounded-sm flex items-center justify-center gap-1 hover:bg-secondary transition-colors duration-500",children:e.jsx("span",{className:"font-medium text-base",children:"Ver"})})]})})]})]}):null},le=({open:a,minimized:d,products:m,onRemove:C,onCompare:j,onMinimize:u,onRestore:b})=>{if(!m||m.length===0)return null;const x=f.useRef(null);return f.useEffect(()=>{x.current&&(x.current.style.pointerEvents="auto")},[m.length,d]),e.jsx("div",{ref:x,className:"fixed left-0 right-0 bottom-0 z-50 w-full",style:{pointerEvents:"none"},children:e.jsx("div",{className:`w-full bg-[#262626EB]  shadow-lg px-2 sm:px-6 ${d?"py-2":"py-20"}`,style:{margin:0,pointerEvents:"auto"},children:d?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("button",{onClick:b,className:" rounded text-3xl md:text-[30px]  p-2 text-white flex items-center gap-6 ",children:[e.jsx("button",{onClick:b,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(q,{size:24})}),e.jsx("span",{children:"Comparar productos"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row px-[5%] 2xl:px-0 2xl:max-w-7xl mx-auto items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("button",{onClick:u,className:"bg-primary rounded w-14 h-14 flex items-center justify-center text-white text-2xl hover:bg-[#219FB9] transition-all duration-300",children:e.jsx(W,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-[32px] font-medium text-white",children:"Comparar productos"}),e.jsx("p",{className:"text-base md:text-base text-white",children:"Puede a침adir un m치ximo de cuatro art칤culos para comparar"})]})]}),e.jsx("button",{className:`bg-[#219FB9] text-white px-4 py-3 rounded-md text-lg tracking-wider transition-all ${m.length===4?"hover:bg-[#1786a1]":"opacity-50 cursor-not-allowed"}`,disabled:m.length!==4,onClick:()=>{j(),u&&u()},children:"Comparar"})]}),e.jsx("div",{className:"flex justify-center gap-6 md:gap-12 flex-wrap",children:m.map(o=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{className:"mt-2 mb-4 bg-primary rounded w-9 h-9 flex items-center justify-center text-white text-xl hover:bg-[#219FB9] transition-all duration-300",onClick:()=>C(o.id),children:e.jsx(D,{size:16})}),e.jsx("div",{className:"bg-white rounded-lg p-2 aspect-square",children:e.jsx("img",{src:`/storage/images/item/${o.image}`,alt:o.name,className:"h-28 object-cover aspect-square mb-2"})}),e.jsx("div",{className:"text-white text-center line-clamp-3  mt-2 max-w-[180px]",children:o.name})]},o.id))})]})})})},ne=({isOpen:a,onClose:d,products:m,onRemoveProduct:C})=>{const[j,u]=f.useState([]),[b,x]=f.useState(!1),[o,y]=f.useState(!1),w=f.useRef(null);f.useEffect(()=>{a&&m&&m.length>0?(x(!0),Promise.all(m.map(t=>I.get(`/api/items/${t.id}`).then(r=>r.data).catch(()=>null))).then(t=>{u(t.filter(Boolean)),x(!1)})):u([])},[a,m]);const E=async()=>{if(!(!w.current||o))try{y(!0);const t=w.current.cloneNode(!0);t.style.width="800px",t.style.paddingLeft="40px",t.style.paddingRight="40px",t.style.paddingTop="10px",t.style.paddingBottom="10px",t.style.backgroundColor="#ffffff";const r=[];t.querySelectorAll('a[href*="/producto/"]').forEach((i,c)=>{const n=i.getAttribute("href");if(n){const s=n.startsWith("http")?n:`${window.location.origin}${n}`;r.push({url:s,index:c});const l=document.createElement("a");l.href=s,l.innerHTML="游댕 Ver detalles completos",l.style.cssText=`
            display: block;
            width: 80%;
            text-align: center;
            background-color: #0066cc;
            color: white;
            text-decoration: none;
            padding: 12px 16px;
            margin: 12px auto;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            box-sizing: border-box;
          `,i.parentNode.replaceChild(l,i)}}),t.querySelectorAll(".print-hide:not(a[href*='/producto/'])").forEach(i=>i.remove()),t.querySelectorAll(".space-y-2").forEach(i=>{const c=i.querySelectorAll('div[class*="p-3"]'),n=Math.min(5,c.length);for(let s=n;s<c.length;s++)c[s]&&c[s].remove();if(c.length>n){const s=document.createElement("div");s.className="p-3 rounded-md bg-gray-100 text-center",s.innerHTML=`
            <p class="font-medium text-sm text-gray-600">
              ... y ${c.length-n} especificaciones m치s
            </p>
            <p class="text-xs text-gray-500 mt-1">
              Ver producto completo para m치s detalles
            </p>
          `,i.appendChild(s)}});const v=document.createElement("div");v.style.position="absolute",v.style.left="-9999px",v.style.top="0",v.appendChild(t),document.body.appendChild(v);const g=document.createElement("h1");g.textContent="Comparaci칩n de Productos",g.style.textAlign="center",g.style.fontSize="32px",g.style.fontWeight="bold",g.style.marginBottom="20px",g.style.color="#333",g.style.fontFamily="Arial, sans-serif",t.insertBefore(g,t.firstChild),await new Promise(i=>setTimeout(i,200));const h=await U(t,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",allowTaint:!0,windowWidth:t.scrollWidth,windowHeight:t.scrollHeight});document.body.removeChild(v);const P=h.toDataURL("image/jpeg",.5),p=new V({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),F=p.internal.pageSize.getWidth(),M=p.internal.pageSize.getHeight(),N=F-20,k=h.height*N/h.width,$=M-20;if(k<=$)p.addImage(P,"JPEG",10,10,N,k,void 0,"FAST"),r.length>0&&r.forEach((i,c)=>{const n=80+c*90,s=15,l=N-30;p.link(20,n,l,s,{url:i.url})});else{let i=k,c=0,n=0;for(;i>0;){n>0&&p.addPage();const s=Math.min(i,$),l=document.createElement("canvas"),B=l.getContext("2d");l.width=h.width,l.height=h.height*s/k,B.drawImage(h,0,h.height*c/k,h.width,h.height*s/k,0,0,l.width,l.height);const T=l.toDataURL("image/jpeg",.8);p.addImage(T,"JPEG",10,10,N,N*l.height/l.width,void 0,"FAST"),n===0&&r.length>0&&r.forEach((z,R)=>{const H=80+R*90,_=15,A=N-30;H<$&&p.link(20,H,A,_,{url:z.url})}),i-=s,c+=s,n++}}p.save("comparacion_productos.pdf")}catch(t){console.error("Error al generar PDF:",t)}finally{y(!1)}};return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto py-10",children:e.jsxs("div",{className:"bg-white  rounded-xl w-full max-w-7xl pb-8   relative max-h-[90vh] overflow-y-auto scrollbar-none shadow-2xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"sticky pt-8 top-0 z-20 bg-white  pb-4 mb-6 rounded-t-xl shadow-md px-4 md:px-8",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)"},children:[e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold customtext-neutral-dark ",children:"Comparar productos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:E,disabled:b||o||j.length===0,className:"gap-2 print-hide flex items-center border border-gray-300 bg-primary brightness-125 text-white px-4 py-2 rounded-md  shadow-sm hover:brightness-100 disabled:opacity-60 disabled:cursor-not-allowed",type:"button",children:[o?e.jsx(L,{className:"h-4 w-4 animate-spin"}):e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:o?"Generando PDF...":"Descargar PDF"})]}),e.jsx("button",{onClick:d,className:"print-hide flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100 text-gray-700",type:"button","aria-label":"Cerrar",children:e.jsx(D,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-sm customtext-neutral-dark dark:text-gray-400 mt-1",children:"Puede a침adir un m치ximo de cuatro art칤culos para comparar"}),e.jsx("hr",{className:"mt-4 border-gray-200 dark:border-gray-800"})]}),e.jsx("div",{ref:w,className:"bg-white  rounded-lg  px-8",children:b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(L,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"customtext-neutral-dark ",children:"Cargando detalles de productos..."})]}):j.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50  rounded-lg",children:[e.jsx("p",{className:"customtext-neutral-dark text-lg",children:"No hay productos para comparar."}),e.jsx("p",{className:"customtext-neutral-dark text-sm mt-2",children:"A침ada productos para iniciar la comparaci칩n."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(t=>e.jsxs("div",{className:"overflow-hidden h-full flex flex-col bg-white  rounded-lg shadow border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"bg-gray-100  aspect-square flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:`/storage/images/item/${t.image}`,alt:t.name,className:"w-full h-full object-contain p-4"})}),e.jsx("button",{onClick:()=>C(t.id),className:"absolute top-2 right-2 bg-white  text-gray-700 dark:text-gray-200 rounded-full w-8 h-8 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-700 shadow-md print-hide",children:e.jsx(D,{size:16})})]}),e.jsxs("div",{className:"flex-grow flex flex-col p-4",children:[e.jsx("span",{className:"inline-block self-start mb-2 px-2 py-1  customtext-primary rounded text-xs font-semibold bg-primary/10",children:t.code}),e.jsx("h3",{className:"font-bold text-lg mb-2 line-clamp-2 customtext-neutral-dark dark:text-white",children:t.name}),e.jsx("div",{className:"prose prose-sm dark:prose-invert line-clamp-2 customtext-neutral-dark  mb-4",dangerouslySetInnerHTML:{__html:t==null?void 0:t.description}}),e.jsx("a",{href:`/producto/${t.slug}`,className:"mb-4 w-full block text-center bg-primary hover:bg-primary/90 text-white py-2 rounded-md font-medium text-sm transition-colors print-hide",children:"Ver detalles"}),e.jsx("hr",{className:"my-4 border-gray-200 dark:border-gray-800"}),e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 customtext-neutral-dark dark:text-white",children:"Especificaciones t칠cnicas"}),e.jsx("div",{className:"space-y-2",children:(t.specifications||[]).slice(0,10).length>0?(t.specifications||[]).slice(0,10).map((r,S)=>e.jsxs("div",{className:`p-3 rounded-md ${S%2===0?"bg-gray-50 ":"bg-white  border border-gray-100 dark:border-gray-800"}`,children:[e.jsx("p",{className:"font-medium text-sm customtext-neutral-dark dark:text-white",children:r.key||r.name}),e.jsx("p",{className:"text-sm customtext-neutral-dark dark:text-gray-400 mt-1",children:r.value})]},r.key||r.name||S)):e.jsx("p",{className:"text-center customtext-neutral-dark dark:text-gray-400 py-4",children:"Sin especificaciones"})})]})]})]},t.id))})}),e.jsx("div",{className:"flex justify-end mt-8 print-hide mr-8",children:e.jsx("button",{onClick:d,className:"bg-primary  text-white px-8 py-3 rounded text-lg font-bold transition-colors",type:"button",children:"Cerrar"})})]})}):null};export{ie as C,le as a,ne as b};
